{"mappings":"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","sources":["node_modules/@swc/helpers/src/_class_call_check.js","node_modules/@swc/helpers/src/_create_class.js","node_modules/@swc/helpers/src/_get_prototype_of.js","node_modules/@swc/helpers/src/_set_prototype_of.js","node_modules/@swc/helpers/src/_inherits.js","node_modules/@swc/helpers/src/_possible_constructor_return.js","node_modules/@swc/helpers/src/_type_of.js","node_modules/@swc/helpers/src/_assert_this_initialized.js","node_modules/@swc/helpers/src/_iterable_to_array.js","node_modules/@swc/helpers/src/_sliced_to_array.js","node_modules/@swc/helpers/src/_array_with_holes.js","node_modules/@swc/helpers/src/_non_iterable_rest.js","node_modules/@swc/helpers/src/_to_consumable_array.js","node_modules/@swc/helpers/src/_array_without_holes.js","node_modules/@swc/helpers/src/_non_iterable_spread.js","src/Debug.js","src/DOM.js","src/Request.js","src/FileSystem.js","src/Form.js","node_modules/process/browser.js","src/Platform.js","src/Preload.js","src/SpaceAdapter/LocalStorage.js","src/Space.js","src/SpaceAdapter/SessionStorage.js","src/SpaceAdapter/IndexedDB.js","src/SpaceAdapter/RemoteStorage.js","src/Text.js","src/Util.js","browser.js"],"sourcesContent":["export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n","function getPrototypeOf(o) {\n  getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return getPrototypeOf(o);\n}\n\nexport default function _getPrototypeOf(o) {\n  return getPrototypeOf(o);\n}","function setPrototypeOf(o, p) {\n  setPrototypeOf = Object.setPrototypeOf || function setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return setPrototypeOf(o, p);\n}\n\nexport default function _setPrototypeOf(o, p) {\n  return setPrototypeOf(o, p);\n}\n","import setPrototypeOf from './_set_prototype_of';\n\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n","import assertThisInitialized from './_assert_this_initialized';\nimport _typeof from './_type_of';\n\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n","export default function _typeof(obj) {\n    return obj && obj.constructor === Symbol ? \"symbol\" : typeof obj;\n};\n","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n","export default function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n","import arrayWithHoles from './_array_with_holes';\nimport iterableToArrayLimit from './_iterable_to_array';\nimport nonIterableRest from './_non_iterable_rest';\n\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n","import arrayWithoutHoles from './_array_without_holes';\nimport iterableToArray from './_iterable_to_array';\nimport nonIterableSpread from './_non_iterable_spread';\n\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}\n","export default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n","/**\n * ==============================\n * Debug\n * ==============================\n */\n\n/* eslint no-console: \"off\" */\n\n/**\n * List of Log Levels available.\n */\nexport const DebugLevel = {\n\tNONE: 0,\n\tERROR: 1,\n\tWARNING: 2,\n\tINFO: 3,\n\tDEBUG: 4,\n\tALL: 5\n};\n\n/**\n * This class acts as a proxy for the console. It shares the same methods as the\n * web console but they are conditioned to a debug level.\n *\n * @class\n */\nexport class Debug {\n\n\t/**\n\t * @static level - Set the log level\n\t *\n\t * @param {DebugLevel} level The debug level to use\n\t *\n\t * @return {void}\n\t */\n\tstatic level (level) {\n\t\tif (typeof level === 'number') {\n\t\t\tthis._level = level;\n\t\t}\n\t\treturn this._level;\n\t}\n\n\t/**\n\t * @static log - Log the given elements.\n\t *\n\t * Logs will only be made if the level is set to DEBUG or above\n\t *\n\t * @param  {...any} args\n\t *\n\t * @return {void}\n\t */\n\tstatic log (...args) {\n\t\tif (this.level () >= DebugLevel.DEBUG) {\n\t\t\tconsole.log (...args);\n\t\t}\n\t}\n\n\t/**\n\t * @static debug - Show a debugging log\n\t *\n\t * Logs will only be made if the level is set DEBUG or above\n\t *\n\t * @param  {...any} args\n\t *\n\t * @return {void}\n\t */\n\tstatic debug (...args) {\n\t\tif (this.level () >= DebugLevel.DEBUG) {\n\t\t\tconsole.debug (...args);\n\t\t}\n\t}\n\n\t/**\n\t * @static info - Show an info log\n\t *\n\t * Logs will only be made if the level is set to INFO or above\n\t *\n\t * @param  {...any} args\n\t *\n\t * @return {void}\n\t */\n\tstatic info (...args) {\n\t\tif (this.level () >= DebugLevel.INFO) {\n\t\t\tconsole.info (...args);\n\t\t}\n\t}\n\n\t/**\n\t * @static error - Show an error log\n\t *\n\t * Logs will only be made if the level is set to ERROR or above\n\t *\n\t * @param  {...any} args\n\t *\n\t * @return {void}\n\t */\n\tstatic error (...args) {\n\t\tif (this.level () >= DebugLevel.ERROR) {\n\t\t\tconsole.error (...args);\n\t\t}\n\t}\n\n\t/**\n\t * @static warning - Show an warning log\n\t *\n\t * Logs will only be made if the level is set to WARNING or above\n\t *\n\t * @param  {...any} args\n\t *\n\t * @return {void}\n\t */\n\tstatic warning (...args) {\n\t\tif (this.level () >= DebugLevel.WARNING) {\n\t\t\tconsole.warn (...args);\n\t\t}\n\t}\n\n\t/**\n\t * @static table - Show data as a table\n\t *\n\t * Table will only be made if the level is set to DEBUG or above\n\t *\n\t * @param  {...any} args\n\t *\n\t * @return {void}\n\t */\n\tstatic table (...args) {\n\t\tif (this.level () >= DebugLevel.DEBUG) {\n\t\t\tconsole.table (...args);\n\t\t}\n\t}\n\n\t/**\n\t * @static group - Start an indented group\n\t *\n\t * @param  {...any} args\n\t *\n\t * @return {void}\n\t */\n\tstatic group (...args) {\n\t\tif (this.level () >= DebugLevel.DEBUG) {\n\t\t\tconsole.group (...args);\n\t\t}\n\t}\n\n\t/**\n\t * @static groupCollapsed - Start an indented group collapsed by default\n\t *\n\t * @param  {...any} args\n\t *\n\t * @return {void}\n\t */\n\tstatic groupCollapsed (...args) {\n\t\tif (this.level () >= DebugLevel.DEBUG) {\n\t\t\tconsole.groupCollapsed (...args);\n\t\t}\n\t}\n\n\t/**\n\t * @static groupEnd - End a previously started group\n\t *\n\t * @param  {...any} args\n\t *\n\t * @return {void}\n\t */\n\tstatic groupEnd (...args) {\n\t\tif (this.level () >= DebugLevel.DEBUG) {\n\t\t\tconsole.groupEnd (...args);\n\t\t}\n\t}\n\n\t/**\n\t * @static time - Start a timer\n\t *\n\t * The timer will only start if the level is set to DEBUG or above\n\t *\n\t * @param  {...any} args\n\t *\n\t * @return {void}\n\t */\n\tstatic time (...args) {\n\t\tif (this.level () >= DebugLevel.DEBUG) {\n\t\t\tconsole.time (...args);\n\t\t}\n\t}\n\n\t/**\n\t * @static timeLog - Log the time a timer has been running for\n\t *\n\t * The time will only be logged if the level is set to DEBUG or above\n\t *\n\t * @param  {...any} args\n\t *\n\t * @return {void}\n\t */\n\tstatic timeLog (...args) {\n\t\tif (this.level () >= DebugLevel.DEBUG) {\n\t\t\tconsole.timeLog (...args);\n\t\t}\n\t}\n\n\t/**\n\t * @static timeEnd - End a timer\n\t *\n\t * The timer will only be available if the level is set to DEBUG or above\n\t *\n\t * @param  {...any} args\n\t *\n\t * @return {void}\n\t */\n\tstatic timeEnd (...args) {\n\t\tif (this.level () >= DebugLevel.DEBUG) {\n\t\t\tconsole.timeEnd (...args);\n\t\t}\n\t}\n\n\t/**\n\t * @static trace - Show the stack trace\n\t *\n\t * The stack trace will only be available if the level is set to DEBUG or above\n\t *\n\t * @param  {...any} args\n\t *\n\t * @return {void}\n\t */\n\tstatic trace (...args) {\n\t\tif (this.level () >= DebugLevel.DEBUG) {\n\t\t\tconsole.trace (...args);\n\t\t}\n\t}\n}\n\nDebug._level = DebugLevel.NONE;","/**\n * ==============================\n * DOM\n * ==============================\n */\n\n/**\n * Simple DOM manipulation functions\n *\n * @class\n */\nexport class DOM {\n\n\t/**\n\t * Create a new DOM object\n\t *\n\t * @constructor\n\t * @param  {string|Object|array} selector - Selector or DOM element to use\n\t * @return {DOM} - New instance of DOM\n\t */\n\tconstructor (selector) {\n\n\t\tif (selector === null) {\n\t\t\tthis.collection = [];\n\t\t\tthis.length = 0;\n\t\t\treturn;\n\t\t}\n\n\t\tif (typeof selector == 'string') {\n\t\t\tthis.collection = document.querySelectorAll (selector);\n\t\t\tthis.length = this.collection.length;\n\t\t\tthis._selector = selector;\n\t\t} else if (selector instanceof NodeList) {\n\t\t\tthis.collection = selector;\n\t\t\tthis.length = selector.length;\n\t\t\tthis._selector = selector;\n\t\t} else if (selector instanceof DOM) {\n\t\t\tthis.collection = selector.collection;\n\t\t\tthis.length = this.collection.length;\n\t\t\tthis._selector = selector._selector;\n\t\t} else if (selector instanceof HTMLElement) {\n\t\t\tthis.collection = [selector];\n\t\t\tthis.length = this.collection.length;\n\t\t\tthis._selector = selector;\n\t\t} else if (typeof selector == 'object') {\n\t\t\tif (selector.length >= 1) {\n\t\t\t\tthis.collection = selector;\n\t\t\t} else {\n\t\t\t\tthis.collection = [selector];\n\t\t\t}\n\t\t\tthis.length = this.collection.length;\n\t\t\tthis._selector = selector;\n\t\t} else {\n\t\t\treturn undefined;\n\t\t}\n\n\t}\n\n\t/**\n\t * Hide elements by setting their `display` property to 'none'.\n\t *\n\t * @return {DOM} - Current instance\n\t */\n\thide () {\n\t\tfor (const element of this.collection) {\n\t\t\telement.style.display = 'none';\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Show elements by setting their `display` property to the given value.\n\t *\n\t * @param {string} [display='block'] - Display property to set\n\t *\n\t * @return {DOM} - Current instance\n\t */\n\tshow (display = 'block') {\n\t\tfor (const element of this.collection) {\n\t\t\telement.style.display = display;\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Add a class to the classList object\n\t *\n\t * @param  {string} newClass - Class name to add\n\t *\n\t * @return {DOM} - Current instance\n\t */\n\taddClass (newClass) {\n\t\tfor (const element of this.collection) {\n\t\t\telement.classList.add (newClass);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Remove a given class from the classList object\n\t *\n\t * @param  {string} [oldClass=null] - Class to remove. If it's empty or null,\n\t * all classes will be removed\n\t *\n\t * @return {DOM} - Current instance\n\t */\n\tremoveClass (oldClass = null) {\n\t\tif (oldClass !== null) {\n\t\t\tfor (const element of this.collection) {\n\t\t\t\telement.classList.remove (oldClass);\n\t\t\t}\n\t\t} else {\n\t\t\tfor (const element of this.collection) {\n\t\t\t\twhile (element.classList.length > 0) {\n\t\t\t\t\telement.classList.remove (element.classList.item (0));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Toggle between two classes\n\t *\n\t * @param  {string} classes - Space separated class names\n\t *\n\t * @return {DOM} - Current instance\n\t */\n\ttoggleClass (classes) {\n\t\tclasses = classes.split (' ');\n\t\tfor (const element of this.collection) {\n\t\t\tfor (let j = 0; j < classes.length; j++) {\n\t\t\t\telement.classList.toggle (classes[j]);\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Check if the first element matching the selector has the given class\n\t *\n\t * @param  {string} classToCheck - Class name to check for\n\t *\n\t * @return {boolean} - Whether the class is present or not\n\t */\n\thasClass (classToCheck) {\n\t\tfor (const element of this.collection) {\n\t\t\tif (!element.classList.contains (classToCheck)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\t/**\n\t * Get or set the value from the first element matching the selector\n\t *\n\t * @param  {string} value - Value to set to the element.\n\t *\n\t * @return {string|DOM} - If a value is provided, this returns the current\n\t * instance, otherwise it returns the value of the element instead of\n\t * setting it\n\t */\n\tvalue (value) {\n\t\tif (typeof value !== 'undefined') {\n\t\t\tfor (const element of this.collection) {\n\t\t\t\telement.value = value;\n\t\t\t}\n\n\t\t\treturn this;\n\t\t} else {\n\t\t\tif (this.length > 0) {\n\t\t\t\treturn this.collection[0].value;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Focus on the first element matching the selector\n\t *\n\t * @return {DOM} - Current instance\n\t */\n\tfocus () {\n\t\tif (this.length > 0) {\n\t\t\tthis.collection[0].focus ();\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Add a callback for the 'click' event on every element matching the selector\n\t *\n\t * @param  {function} callback - Callback function to run when the event is triggered\n\t *\n\t * @return {DOM} - Current instance\n\t */\n\tclick (callback) {\n\t\tfor (const element of this.collection) {\n\t\t\telement.addEventListener ('click', callback, false);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Add a callback for the 'keyup' event on every element matching the selector\n\t *\n\t * @param  {function} callback - Callback function to run when the event is triggered\n\t *\n\t * @return {DOM} - Current instance\n\t */\n\tkeyup (callback) {\n\t\tfor (const element of this.collection) {\n\t\t\telement.addEventListener ('keyup', callback, false);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Add a callback for the 'keydown' event on every element matching the selector\n\t *\n\t * @param  {function} callback - Callback function to run when the event is triggered\n\t *\n\t * @return {DOM} - Current instance\n\t */\n\tkeydown (callback) {\n\t\tfor (const element of this.collection) {\n\t\t\telement.addEventListener ('keydown', callback, false);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Add a callback for the 'submit' event on every element matching the selector\n\t *\n\t * @param  {function} callback - Callback function to run when the event is triggered\n\t *\n\t * @return {DOM} - Current instance\n\t */\n\tsubmit (callback) {\n\t\tfor (const element of this.collection) {\n\t\t\telement.addEventListener ('submit', callback, false);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Add a callback for the 'change' event on every element matching the selector\n\t *\n\t * @param  {function} callback - Callback function to run when the event is triggered\n\t *\n\t * @return {DOM} - Current instance\n\t */\n\tchange (callback) {\n\t\tfor (const element of this.collection) {\n\t\t\telement.addEventListener ('change', callback, false);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Add a callback for the 'scroll' event on every element matching the selector\n\t *\n\t * @param  {function} callback - Callback function to run when the event is triggered\n\t *\n\t * @return {DOM} - Current instance\n\t */\n\tscroll (callback) {\n\t\tfor (const element of this.collection) {\n\t\t\telement.addEventListener ('scroll', callback, false);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Add a callback function to a given event\n\t *\n\t * @param  {string} event - Event to add the listener to\n\t * @param  {string} target - Target element on which to detect the event\n\t * @param  {function} callback - Callback function to run when the event is triggered\n\t *\n\t * @return {DOM} - Current instance\n\t */\n\ton (event, target, callback) {\n\t\tevent = event.split(' ');\n\t\tfor (const element of this.collection) {\n\t\t\tfor (let j = 0; j < event.length; j++) {\n\n\t\t\t\t// Check if no target was defined and just a function was provided\n\t\t\t\tif (typeof target === 'function') {\n\t\t\t\t\telement.addEventListener(event[j], target, false);\n\t\t\t\t} else if (typeof target === 'string' && typeof callback === 'function') {\n\t\t\t\t\telement.addEventListener(event[j], (e) => {\n\t\t\t\t\t\tif (!e.target) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst targetElement = $_(e.target).closestParent (target, this._selector);\n\n\t\t\t\t\t\tif (targetElement.exists ()) {\n\t\t\t\t\t\t\tcallback.call (targetElement.get (0), e);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}, false);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Filter from the current collection to only those matching the new selector\n\t *\n\t * @param  {string} element - Selector to filter the collection with\n\t *\n\t * @return {DOM} - New DOM instance with the filtered collection\n\t */\n\tfilter (selector) {\n\t\tif (this.length > 0) {\n\t\t\treturn new DOM (this.collection[0].querySelector (selector));\n\t\t}\n\n\t\treturn new DOM (null);\n\t}\n\n\t/**\n\t * Check if there are any elements that match the selector.\n\t *\n\t * @return {boolean} - Whether elements matching the selector existed or not\n\t */\n\texists () {\n\t\treturn this.length > 0;\n\t}\n\n\t/**\n\t * Get or set a `data` property\n\t *\n\t * @param  {string} name - Name of the data property\n\t * @param  {string} [value] - Value of the property\n\t *\n\t * @return {string|DOM} - If no value is provided, this function returns\n\t * the first matching element value, otherwise it returns the current instance\n\t */\n\tdata (name, value) {\n\t\tif (typeof value !== 'undefined') {\n\t\t\tfor (const element of this.collection) {\n\t\t\t\telement.dataset[name] = value;\n\t\t\t}\n\n\t\t\treturn this;\n\t\t} else {\n\t\t\tif (this.length > 0) {\n\t\t\t\treturn this.collection[0].dataset[name];\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Remove a data property from all the elements on the collection given its\n\t * name.\n\t *\n\t * @param {string} name - Name of the data property to remove\n\t *\n\t * @return {DOM} - Current instance\n\t */\n\tremoveData (name) {\n\t\tfor (const element of this.collection) {\n\t\t\tdelete element.dataset[name];\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Get or set the text of the first element matching the selector\n\t *\n\t * @param  {string} [value] - Value to set the text to\n\t *\n\t * @return {string|DOM} - If no value is provided, this function returns the\n\t * inner text of the first matching element. Otherwise it returns the current\n\t * instance.\n\t */\n\ttext (value) {\n\t\tif (typeof value !== 'undefined') {\n\t\t\tfor (const element of this.collection) {\n\t\t\t\telement.textContent = value;\n\t\t\t}\n\n\t\t\treturn this;\n\t\t} else {\n\t\t\tif (this.length > 0) {\n\t\t\t\treturn this.collection[0].textContent;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Get or set the inner HTML of the first element matching the selector\n\t *\n\t * @param  {string} [value] - Value to set the HTML to\n\t *\n\t * @return {string|DOM} - If no value is provided, this function returns the\n\t * first matching element HTML. Otherwise it returns the current instance\n\t */\n\thtml (value) {\n\t\tif (typeof value !== 'undefined') {\n\t\t\tfor (const element of this.collection) {\n\t\t\t\telement.innerHTML = value;\n\t\t\t}\n\n\t\t\treturn this;\n\t\t} else {\n\t\t\tif (this.length > 0) {\n\t\t\t\treturn this.collection[0].innerHTML;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Append an element to the first element matching the selector\n\t *\n\t * @param  {string} element - String representation of the element to add\n\t *\n\t * @return {DOM} - Current instance\n\t */\n\tappend (element) {\n\t\tif (this.length > 0) {\n\t\t\tif (typeof element === 'string') {\n\t\t\t\tconst div = document.createElement ('div');\n\t\t\t\tif (typeof element === 'string') {\n\t\t\t\t\tdiv.innerHTML = element.trim ();\n\t\t\t\t} else {\n\t\t\t\t\tdiv.innerHTML = element;\n\t\t\t\t}\n\t\t\t\tthis.collection[0].appendChild (div.firstChild);\n\t\t\t} else {\n\t\t\t\tthis.collection[0].appendChild (element);\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Prepend an element to the first element matching the selector\n\t *\n\t * @param  {string} element - String representation of the element to add\n\t *\n\t * @return {DOM} - Current instance\n\t */\n\tprepend (element) {\n\t\tif (this.length > 0) {\n\t\t\tif (typeof element === 'string') {\n\t\t\t\tconst div = document.createElement ('div');\n\t\t\t\tif (typeof element === 'string') {\n\t\t\t\t\tdiv.innerHTML = element.trim ();\n\t\t\t\t} else {\n\t\t\t\t\tdiv.innerHTML = element;\n\t\t\t\t}\n\t\t\t\tif (this.collection[0].childNodes.length > 0) {\n\t\t\t\t\tthis.collection[0].insertBefore (div.firstChild, this.collection[0].childNodes[0]);\n\t\t\t\t} else {\n\t\t\t\t\tthis.collection[0].appendChild (div.firstChild);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (this.collection[0].childNodes.length > 0) {\n\t\t\t\t\tthis.collection[0].insertBefore (element, this.collection[0].childNodes[0]);\n\t\t\t\t} else {\n\t\t\t\t\tthis.collection[0].appendChild (element);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Iterate over the collection of elements matching the selector\n\t *\n\t * @param  {function} callback - Callback to run for every element\n\t *\n\t * @return {DOM} - Current instance\n\t */\n\teach (callback) {\n\t\tfor (const element of this.collection) {\n\t\t\tcallback (element);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Get an element from the collection given it's index\n\t *\n\t * @param  {int} index - Index of the element to retrieve\n\t *\n\t * @return {HTMLElement} - HTML Element in the position indicated by the index\n\t */\n\tget (index) {\n\t\treturn this.collection[index];\n\t}\n\n\t/**\n\t * Get the first element in the collection\n\t *\n\t * @return {DOM} - DOM instance with the first element\n\t */\n\tfirst () {\n\t\tif (this.length > 0) {\n\t\t\treturn new DOM (this.collection[0]);\n\t\t}\n\n\t\treturn new DOM (null);\n\t}\n\n\t/**\n\t * Get the last element in the collection\n\t *\n\t * @return {DOM} - DOM instance with the last element\n\t */\n\tlast () {\n\t\tif (this.length > 0) {\n\t\t\treturn new DOM (this.collection[this.collection.length - 1]);\n\t\t}\n\n\t\treturn new DOM (null);\n\t}\n\n\t/**\n\t * Check if the elements in the collection are visible by checking their\n\t * display, offsetWidth and offsetHeight properties\n\t *\n\t * @return {boolean} - Whether the elements are visible or not\n\t */\n\tisVisible () {\n\t\tfor (const element of this.collection) {\n\t\t\tif (element.display != 'none' && element.offsetWidth > 0 && element.offsetHeight > 0) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\t/**\n\t * Get the parent of the first element matching the selector\n\t *\n\t * @return {DOM} - DOM instance of the parent element\n\t */\n\tparent () {\n\t\tif (this.length > 0) {\n\t\t\treturn new DOM (this.collection[0].parentElement);\n\t\t}\n\n\t\treturn new DOM (null);\n\t}\n\n\t/**\n\t * Find an element that matches the given selector in the first element of the collection\n\t *\n\t * @param  {string} selector - Selector to find the element with\n\t *\n\t * @return {DOM} - DOM instance with the element if found\n\t */\n\tfind (selector) {\n\t\tif (this.length > 0) {\n\t\t\treturn new DOM (this.collection[0].querySelectorAll (selector));\n\t\t}\n\n\t\treturn new DOM (null);\n\t}\n\n\t/**\n\t * Get the top and left offsets of the first element matching the selector\n\t *\n\t * @return {object|void} - Object with `top` and `left` offsets\n\t */\n\toffset () {\n\t\tif (this.length > 0) {\n\t\t\tconst rect = this.collection[0].getBoundingClientRect ();\n\t\t\treturn {\n\t\t\t\ttop: rect.top + document.body.scrollTop,\n\t\t\t\tleft: rect.left + document.body.scrollLeft\n\t\t\t};\n\t\t}\n\t}\n\n\t/**\n\t * Find the closest element matching the given selector. This bubbles up\n\t * from the initial object and then follows to its parents.\n\t *\n\t * @param  {string} selector - Selector to match the closest element with\n\t *\n\t * @return {DOM} - DOM instance with the closest HTML element matching the selector\n\t */\n\tclosest (selector) {\n\t\tlet found = null;\n\t\tlet element = this;\n\t\twhile (element.exists () && found === null) {\n\t\t\t// Check if the current element matches the selector\n\t\t\tconst matches = element.matches (selector);\n\n\t\t\tif (matches === true) {\n\t\t\t\treturn element;\n\t\t\t}\n\n\t\t\tconst search = element.find (selector);\n\t\t\tif (search) {\n\t\t\t\tif (search.length > 0) {\n\t\t\t\t\tfound = search;\n\t\t\t\t}\n\t\t\t}\n\t\t\telement = element.parent ();\n\t\t}\n\n\t\tif (found !== null) {\n\t\t\treturn found;\n\t\t}\n\n\t\treturn element;\n\t}\n\n\t/**\n\t * Find the closest parent element matching the given selector. This bubbles up\n\t * from the initial object and then follows to its parents.\n\t *\n\t * @param  {string} selector - Selector to match the closest element with\n\t * @param  {string} limit - Selector for limit element. If the limit is reached\n\t * and no element matching the provided selector was found, it will cause an\n\t * early return.\n\t *\n\t * @return {DOM} - DOM instance with the closest HTML element matching the selector\n\t */\n\tclosestParent (selector, limit) {\n\t\tlet element = this;\n\t\twhile (element.exists ()) {\n\n\t\t\t// Check if the current element matches the selector\n\t\t\tconst matches = element.matches (selector);\n\n\t\t\tif (matches === true) {\n\t\t\t\treturn element;\n\t\t\t}\n\n\t\t\tif (typeof limit === 'string') {\n\t\t\t\tif (element.matches (limit)) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\telement = element.parent ();\n\t\t}\n\n\t\treturn new DOM (null);\n\t}\n\n\t/**\n\t * Get or set the value of a given attribute\n\t *\n\t * @param  {string} attribute - Attribute's name\n\t * @param  {string|Number} [value] - Value to set the attribute to\n\t *\n\t * @return {string|number|DOM} - If no value is provided, this function returns the current\n\t * value of the provided attribute\n\t */\n\tattribute (attribute, value) {\n\t\tif (typeof value !== 'undefined') {\n\t\t\tfor (const element of this.collection) {\n\t\t\t\telement.setAttribute (attribute, value);\n\t\t\t}\n\n\t\t\treturn this;\n\t\t} else {\n\t\t\tif (this.length > 0) {\n\t\t\t\treturn this.collection[0].getAttribute (attribute);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Check whether an element has an attribute or not\n\t *\n\t * @param {string} attribute - The name of the attribute to check existance for\n\t *\n\t * @returns {boolean} - Whether or not the attribute is present\n\t */\n\thasAttribute (attribute) {\n\t\tfor (const element of this.collection) {\n\t\t\tif (!element.hasAttribute (attribute)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\t/**\n\t * Insert content to the `after` property of an element\n\t *\n\t * @param  {string} content - String representation of the content to add\n\t *\n\t * @return {DOM} - Current instance\n\t */\n\tafter (content) {\n\t\tfor (const element of this.collection) {\n\t\t\telement.insertAdjacentHTML ('afterend', content);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Insert content to the `before` property of an element\n\t *\n\t * @param  {string} content - String representation of the content to add\n\t *\n\t * @return {DOM} - Current instance\n\t */\n\tbefore (content) {\n\t\tfor (const element of this.collection) {\n\t\t\telement.insertAdjacentHTML ('beforebegin', content);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Get or modify the `style` properties of the elements matching the selector\n\t *\n\t * @param  {string|Object} properties - Properties to change or get. Can be\n\t * either an individual property or a JSON object with key-value pairs\n\t * @param  {string} [value] - Value to set the property to when only changing\n\t * one property\n\t *\n\t * @return {string|DOM} - If a property is given but not a value for it, this\n\t * function will return its current value\n\t */\n\tstyle (properties, value) {\n\t\tfor (let i = 0; i < this.collection.length; i++) {\n\t\t\tif (typeof properties === 'string' && typeof value !== 'undefined') {\n\t\t\t\tthis.collection[i].style[properties] = value;\n\t\t\t} else if (typeof properties === 'string' && typeof value === 'undefined') {\n\t\t\t\treturn this.collection[i].style[properties];\n\t\t\t} else if (typeof properties === 'object') {\n\t\t\t\tfor (const property in properties) {\n\t\t\t\t\tthis.collection[i].style[property] = properties[property];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t}\n\n\t/**\n\t * Animate the given `style` properties on all elements in the collection in\n\t * with a given time duration\n\t *\n\t * @param  {Object} style - JSON object with the key-value pairs of properties\n\t * to animate\n\t * @param  {int} time - Time in milliseconds during which the properties will\n\t * be animated\n\t *\n\t * @return {DOM} - Current instance\n\t */\n\tanimate (style, time) {\n\t\tfor (let i = 0; i < this.collection.length; i++) {\n\t\t\tfor (const property in style) {\n\n\t\t\t\tconst start = new Date().getTime();\n\t\t\t\tconst collection = this.collection;\n\t\t\t\tlet timer;\n\t\t\t\tlet initialValue;\n\t\t\t\tif (typeof this.collection[i].style[property] !== 'undefined') {\n\t\t\t\t\tinitialValue = this.collection[i].style[property];\n\n\t\t\t\t\ttimer = setInterval (() => {\n\t\t\t\t\t\tconst step = Math.min (1, (new Date ().getTime () - start) / time);\n\n\t\t\t\t\t\tcollection[i].style[property] = (initialValue + step * (style[property] - initialValue));\n\n\t\t\t\t\t\tif (step == 1) {\n\t\t\t\t\t\t\tclearInterval (timer);\n\t\t\t\t\t\t}\n\t\t\t\t\t}, 25);\n\t\t\t\t\tthis.collection[i].style[property] = initialValue;\n\n\t\t\t\t} else if (typeof (this.collection[i])[property] !== 'undefined') {\n\t\t\t\t\tinitialValue = (this.collection[i])[property];\n\n\t\t\t\t\ttimer = setInterval(() => {\n\t\t\t\t\t\tconst step = Math.min (1, (new Date ().getTime () - start) / time);\n\n\t\t\t\t\t\t(collection[i])[property] = (initialValue + step * (style[property] - initialValue));\n\n\t\t\t\t\t\tif (step == 1) {\n\t\t\t\t\t\t\tclearInterval (timer);\n\t\t\t\t\t\t}\n\t\t\t\t\t}, 25);\n\t\t\t\t\t(this.collection[i])[property] = initialValue;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Use a fade in animation i the first element matching the selector\n\t *\n\t * @param  {type} [time=400] - Time duration for the animation\n\t * @param  {type} callback - Callback function to run once the animation is over\n\t *\n\t * @return {DOM} - Current instance\n\t */\n\tfadeIn (time = 400, callback) {\n\t\tif (this.length > 0) {\n\t\t\tconst element = this.collection[0];\n\t\t\telement.style.opacity = 0;\n\n\t\t\tlet last = +new Date();\n\n\t\t\tconst tick = () => {\n\t\t\t\telement.style.opacity = +element.style.opacity + (new Date() - last) / time;\n\t\t\t\tlast = +new Date();\n\n\t\t\t\tif (+element.style.opacity < 1) {\n\t\t\t\t\t(window.requestAnimationFrame && requestAnimationFrame(tick)) || setTimeout(tick, 16);\n\t\t\t\t} else {\n\t\t\t\t\tif (typeof callback === 'function') {\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\ttick();\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Use a fade out animation i the first element matching the selector\n\t *\n\t * @param  {type} [time=400] - Time duration for the animation\n\t * @param  {type} callback - Callback function to run once the animation is over\n\t *\n\t * @return {DOM} - Current instance\n\t */\n\tfadeOut (time = 400, callback) {\n\t\tif (this.length > 0) {\n\t\t\tlet last = +new Date ();\n\t\t\tconst element = this.collection[0];\n\t\t\tconst tick = () => {\n\t\t\t\telement.style.opacity = +element.style.opacity - (new Date() - last) / time;\n\t\t\t\tlast = +new Date ();\n\n\t\t\t\tif (+element.style.opacity > 0) {\n\t\t\t\t\t(window.requestAnimationFrame && requestAnimationFrame (tick)) || setTimeout(tick, 16);\n\t\t\t\t} else {\n\t\t\t\t\tif (typeof callback === 'function') {\n\t\t\t\t\t\tcallback ();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\ttick ();\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\tCheck if the first element in the collection matches a given selector\n\t *\n\t * @param  {string} selector - Selector to match\n\t *\n\t * @return {boolean} - Whether the element matches the selector or not\n\t */\n\tmatches (selector) {\n\t\tconst check = Element.prototype;\n\t\tconst polyfill = check.matches || check.webkitMatchesSelector || check.mozMatchesSelector || check.msMatchesSelector || function () {\n\t\t\treturn [].indexOf.call (document.querySelectorAll (selector), this) !== -1;\n\t\t};\n\n\t\tif (this.length > 0) {\n\t\t\treturn polyfill.call (this.collection[0], selector);\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * Remove all elements in the collection\n\t *\n\t * @return {DOM} - Current instance\n\t */\n\tremove () {\n\t\tfor (const element of this.collection) {\n\t\t\telement.parentNode.removeChild (element);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Replace the first element in the collection with a new one\n\t *\n\t * @return {DOM} - Current instance\n\t */\n\treplaceWith (newElement) {\n\t\tlet replaceElement = newElement;\n\n\t\tif (typeof newElement === 'string') {\n\t\t\tconst div = document.createElement ('div');\n\t\t\tdiv.innerHTML = newElement;\n\t\t\treplaceElement = div.firstChild;\n\t\t}\n\n\t\tfor (const element of this.collection) {\n\t\t\telement.parentElement.replaceChild (replaceElement, element);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Reset every element in the collection\n\t *\n\t * @return {DOM} - Current instance\n\t */\n\treset () {\n\t\tfor (const element of this.collection) {\n\t\t\telement.reset ();\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Get or set a property for the first element in the collection\n\t *\n\t * @param  {string} property - Property name to set or get\n\t * @param  {string|Number} [value] - Value to set the property to\n\t *\n\t * @return {string|Number} - If no value is provided, this function will return the\n\t * current value of the indicated property\n\t */\n\tproperty (property, value) {\n\t\tif (typeof value !== 'undefined') {\n\t\t\tfor (const element of this.collection) {\n\t\t\t\telement[property] = value;\n\t\t\t}\n\n\t\t\treturn this;\n\t\t} else {\n\t\t\tif (this.length > 0) {\n\t\t\t\treturn this.collection[0][property];\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * Simple wrapper function to use the DOM library\n *\n * @param  {string|Object|array} selector - Selector or DOM element to use\n *\n * @return {DOM} - DOM instance or class if no selector is used\n */\nexport function $_ (selector) {\n\tif (typeof selector !== 'undefined') {\n\t\treturn new DOM (selector);\n\t} else {\n\t\treturn DOM;\n\t}\n}\n\n/**\n * Utility function to attach the 'load' listener to the window\n *\n * @param  {function} callback - Callback function to run when the window is ready\n */\nexport function $_ready (callback) {\n\twindow.addEventListener ('load', callback);\n}","/**\n* ==============================\n* Request\n* ==============================\n*/\n\n/**\n * Simple Wrapper for the fetch API, providing simple functions to handle requests\n *\n * @class\n */\nexport class Request {\n\n\t/**\n\t * @static serialize - Serialize an object of data into a URI encoded format\n\t *\n\t * @param  {Object} data - Key-value object of data to serialize\n\t * @return {string} - Serialized Data\n\t */\n\tstatic serialize (data) {\n\t\treturn Object.keys (data).map ((key) => {\n\t\t\treturn encodeURIComponent (key) + '=' + encodeURIComponent (data[key]);\n\t\t}).join ('&');\n\t}\n\n\t/**\n\t * @static get - Make a GET request to a given URL with the provided data\n\t * parameters and an optional configuration object for the request.\n\t *\n\t * @param  {string} url - URL to make the request to\n\t * @param  {Object} [data = {}] - Parameters to send in the URL, represented\n\t * as a JSON object. These parameters will be sent as a query in the URL\n\t * @param  {Object} [options = {}] - Options object for configurations you want\n\t * to use in the fetch () request made.\n\t * @return {Promise<Response>} - Resolves to the response of the request\n\t */\n\tstatic get (url, data = {}, options = {}) {\n\t\tconst query = Request.serialize (data);\n\n\t\t// Check if there is actually any data parameters and join them to the\n\t\t// url as query parameters\n\t\tif (query !== '') {\n\t\t\turl = `${url}?${query}`;\n\t\t}\n\n\t\treturn fetch (url, options);\n\t}\n\n\t/**\n\t * @static post - Make a POST request to a given URL with the provided data\n\t * and an optional configuration object for the request.\n\t *\n\t * @param  {string} url - URL to make the request\n\t * @param  {Object} [data = {}] - Set of data to send in the URL, represented\n\t * as a JSON object\n \t * @param  {Object} [options = {}] - Options object for configurations you want\n\t * to use in the fetch () request made. The Content-Type header is used to\n\t * serialize data in the correct format and defaults to application/x-www-form-urlencoded\n\t * @return {Promise<Response>} - Resolves to the response of the request\n\t */\n\tstatic post (url, data, options = {}) {\n\t\tlet formData;\n\n\t\tif (typeof options.headers !== 'undefined') {\n\t\t\tconst contentType = options.headers['Content-Type'];\n\t\t\tif (typeof contentType !== 'undefined') {\n\t\t\t\tif (contentType == 'multipart/form-data') {\n\t\t\t\t\tformData = new FormData ();\n\t\t\t\t\tfor (const value in data) {\n\t\t\t\t\t\tformData.append (value, data[value]);\n\t\t\t\t\t}\n\t\t\t\t} else if (contentType == 'application/json') {\n\t\t\t\t\tformData = JSON.stringify (data);\n\t\t\t\t} else {\n\t\t\t\t\tformData = Request.serialize (data);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tformData = Request.serialize (data);\n\t\t}\n\n\t\tconst props = Object.assign ({}, {\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/x-www-form-urlencoded'\n\t\t\t},\n\t\t\tbody: formData\n\t\t}, options);\n\n\t\t// Delete the explicit multipart/form-data header to allow boundary automatic filling\n\t\tif (typeof props.headers !== 'undefined') {\n\t\t\tif (props.headers['Content-Type'] === 'multipart/form-data') {\n\t\t\t\tdelete props.headers['Content-Type'];\n\t\t\t}\n\t\t}\n\n\t\treturn fetch (url, props);\n\t}\n\n\t/**\n\t * @static put - Make a PUT request to a given URL with the provided data\n\t * and an optional configuration object for the request.\n\t *\n\t * @param  {string} url - URL to make the request\n\t * @param  {Object} [data = {}] - Set of data to send in the URL, represented\n\t * as a JSON object\n \t * @param  {Object} [options = {}] - Options object for configurations you want\n\t * to use in the fetch () request made. The Content-Type header is used to\n\t * serialize data in the correct format and defaults to application/x-www-form-urlencoded\n\t * @return {Promise<Response>} - Resolves to the response of the request\n\t */\n\tstatic put (url, data, options = {}) {\n\t\treturn Request.post (url, data, Object.assign ({}, {method: 'PUT'}, options));\n\t}\n\n\t/**\n\t * @static delete - Make a DELETE request to a given URL with the provided data\n\t * and an optional configuration object for the request.\n\t *\n\t * @param  {string} url - URL to make the request\n\t * @param  {Object} [data = {}] - Parameters to send in the URL, represented\n\t * as a JSON object. These parameters will be sent as a query in the URL\n \t * @param  {Object} [options = {}] - Options object for configurations you want\n\t * to use in the fetch () request made. The Content-Type header is used to\n\t * serialize data in the correct format and defaults to application/x-www-form-urlencoded\n\t * @return {Promise<Response>} - Resolves to the response of the request\n\t */\n\tstatic delete (url, data, options = {}) {\n\t\treturn Request.get (url, data, Object.assign ({}, {method: 'DELETE'}, options));\n\t}\n\n\t/**\n \t * @static json - Request a JSON object from a given URL through a GET request\n \t *\n \t * @param  {string} url - URL to make the request to\n \t * @param  {Object} [data = {}] - Parameters to send in the URL, represented\n \t * as a JSON object. These parameters will be sent as a query in the URL\n \t * @param  {Object} [options = {}] - Options object for configurations you want\n \t * to use in the fetch () request made.\n \t * @return {Promise<Object>} - Resolves to the json object obtained from the request response\n \t */\n\tstatic json (url, data = {}, options = {}) {\n\t\treturn Request.get (url, data, options).then ((response) => {\n\t\t\treturn response.json ();\n\t\t});\n\t}\n\n\t/**\n \t * @static blob - Request a Blob from a given URL through a GET request\n \t *\n \t * @param  {string} url - URL to make the request to\n \t * @param  {Object} [data = {}] - Parameters to send in the URL, represented\n \t * as a JSON object. These parameters will be sent as a query in the URL\n \t * @param  {Object} [options = {}] - Options object for configurations you want\n \t * to use in the fetch () request made.\n \t * @return {Promise<Blob>} - Resolves to the blob obtained from the request response\n \t */\n\tstatic blob (url, data = {}, options = {}) {\n\t\treturn Request.get (url, data, options).then ((response) => {\n\t\t\treturn response.blob ();\n\t\t});\n\t}\n}","/**\n * ==============================\n * File System\n * ==============================\n */\n\nimport { Request } from './Request';\n\n/**\n * A simple class wrapper for the File and FileReader web API, while this class\n * doesn't actually provide acces to the host file system, it does provide useful\n * utilities for form file inputs and remote content loading.\n *\n * @class\n */\nexport class FileSystem {\n\n\n\t/**\n\t * @static readRemote - Read a file from a remote location given a URL. This\n\t * function will fetch the file blob using the Request class and then use the\n\t * read () function to read the blob in the format required.\n\t *\n\t * @param {type} url - URL to fetch the file from\n\t * @param {type} [type = 'base64'] - Type of data to be read, values can be\n\t * 'text', 'base64' and 'buffer'. This parameter is used for the read () function.\n\t * @param {Object} [props = {}] - Props to send to the Request object\n\t * @return {Promise<ArrayBuffer|string>} - Content of the file. The format\n\t * depends on the type parameter used.\n\t */\n\tstatic readRemote (url, type = 'base64', props = {}) {\n\t\treturn Request.blob (url, {}, props).then ((file) => {\n\t\t\treturn FileSystem.read (file, type);\n\t\t});\n\t}\n\n\t/**\n\t * @static read - Read a given File or Blob object.\n\t *\n\t * @param  {File|Blob} file - File to read\n\t * @param  {string} [type = 'text'] - Type of data to be read, values can be\n\t * 'text', 'base64' and 'buffer'.\n\t *\n\t * @return {Promise<Event, ArrayBuffer|string>} - Promise that resolves to\n\t * the Load event and content of the file. The format depends on the type\n\t * parameter used.\n\t */\n\tstatic read (file, type = 'text') {\n\t\treturn new Promise ((resolve, reject) => {\n\t\t\tconst reader = new FileReader ();\n\n\t\t\treader.onload = (event) => {\n\t\t\t\t// Pass down the event object and the content\n\t\t\t\tresolve (event, event.target.result);\n\t\t\t};\n\n\t\t\treader.onerror = (error) => {\n\t\t\t\treject (error);\n\t\t\t};\n\n\t\t\tif (type === 'base64') {\n\t\t\t\treader.readAsDataURL (file);\n\t\t\t} else if (type === 'buffer') {\n\t\t\t\treader.readAsArrayBuffer (file);\n\t\t\t} else {\n\t\t\t\treader.readAsText (file, 'UTF-8');\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * @static create - Create a new File, this uses the File API and will note\n\t * actually create a file in the user's file system, however using it with\n\t * other features, that may be possible\n\t *\n\t * @param  {string} file - Name of the file (Including extension)\n\t * @param  {ArrayBuffer|ArrayBufferView|Blob|string} content - Content to save in the file\n\t * @param  {string} [type = 'text/plain'] - Mime Type for the file\n\t *\n\t * @return {Promise<File>}\n\t */\n\tstatic create (name, content, type = 'text/plain') {\n\t\treturn Promise.resolve (new File ([content], name, {type}));\n\t}\n\n\t/**\n\t * @static extension - Returns the extension of a file given its file name.\n\t *\n\t * @param  {string} name - Name or full path of the file\n\t *\n\t * @return {string} - File extension without the leading dot (.)\n\t */\n\tstatic extension (name) {\n\t\treturn name.split ('.').pop ();\n\t}\n\n\t/**\n\t * @static isImage - Check if a file is an image by its extension.\n\t *\n\t * @param  {string} name - Name or full path of the file\n\t *\n\t * @return {boolean}\n\t */\n\tstatic isImage (name) {\n\t\tconst extensions = ['jpg', 'jpeg', 'png', 'gif', 'svg', 'webp', 'bmp'];\n\t\treturn extensions.indexOf (FileSystem.extension (name).toLowerCase ()) > -1;\n\t}\n\n}","/**\n* ==============================\n* Form\n* ==============================\n*/\n\nimport { $_ } from './DOM';\n\n/**\n * Utility class that provides simple function for filling and retrieving values\n * from froms. This class requires the use of the `data-form` attribute.\n *\n * @class\n */\nexport class Form {\n\n\t/**\n\t * @static fill - Fill a form's inputs with the given values. Each key in the\n\t * provided object must match the `name` attribute of the input to fill.\n\t *\n\t * @param  {string} name - Form name. Must match the `data-form` attribute of the Form.\n\t * @param  {Object} data - JSON object with key-value pairs to fill the inputs.\n\t */\n\tstatic fill (name, data) {\n\t\tfor (const field in data) {\n\t\t\tconst element = $_(`form[data-form='${name}'] [name='${field}']`).get (0);\n\t\t\tif (typeof element != 'undefined') {\n\t\t\t\tswitch (element.type) {\n\n\t\t\t\t\tcase 'file':\n\t\t\t\t\tcase 'file[]':\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\telement.value = data[field];\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t}\n\n\t/**\n\t * @static values - Get all the values from a form's input. The keys are mapped\n\t * using the `name` attribute of each input.\n\t *\n\t * @param  {string} name - Form name. Must match the `data-form` attribute of the Form.\n\t * @return {Object} - Key-value JSON object\n\t */\n\tstatic values (name) {\n\t\tconst data = {};\n\t\t$_(`form[data-form='${name}'] [name]`).each ((element) => {\n\t\t\tlet value;\n\t\t\tswitch (element.type) {\n\t\t\t\tcase 'file[]':\n\t\t\t\t\tvalue = element.files;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'file':\n\t\t\t\t\tvalue = element.files[0];\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tvalue = element.value;\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif (typeof value != 'undefined' && value !== null) {\n\t\t\t\tdata[element.name] = value;\n\t\t\t}\n\t\t});\n\n\t\treturn data;\n\t}\n}","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","/**\n* ==============================\n* Platform\n* ==============================\n*/\n\n/**\n * General checks for what kind of platform is the being used to run the app.\n * @class\n */\nexport class Platform {\n\n\t/**\n\t * Check if the screen has a retina pixel ratio\n\t * @returns {boolean}\n\t */\n\tstatic retina () {\n\t\treturn window.devicePixelRatio >= 2;\n\t}\n\n\t/**\n\t * Check if the device is on portrait orientation\n\t * @returns {boolean}\n\t */\n\tstatic portrait () {\n\t\treturn window.orientation === 0 || window.orientation === 180;\n\t}\n\n\t/**\n\t * Check if the device is on landscape orientation\n\t * @returns {boolean}\n\t */\n\tstatic landscape () {\n\t\treturn (window.orientation === 90 || window.orientation === -90);\n\t}\n\n\t/**\n\t * Get device Orientation\n\t * @returns {string} portrait | landscape\n\t */\n\tstatic orientation () {\n\t\treturn Platform.portrait () ? 'portrait' : 'landscape';\n\t}\n\n\t/**\n\t * Check if the app is running over Electron\n\t * @returns {boolean}\n\t */\n\tstatic electron () {\n\t\t// Renderer process\n\t\tif (typeof window !== 'undefined' && typeof window.process === 'object' && window.process.type === 'renderer') {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Main process\n\t\t// eslint-disable-next-line no-undef\n\t\tif (typeof process !== 'undefined' && typeof process.versions === 'object' && !!process.versions.electron) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Detect the user agent when the `nodeIntegration` option is set to true\n\t\tif (typeof navigator === 'object' && typeof navigator.userAgent === 'string' && navigator.userAgent.indexOf('Electron') > -1) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * Check if the app is running over Cordova\n\t * @returns {boolean}\n\t */\n\tstatic cordova () {\n\t\treturn !!window.cordova;\n\t}\n\n\t/**\n\t * Check if the app is running in a desktop platform\n\t * @returns {boolean}\n\t */\n\tstatic desktop (platform = 'Any') {\n\t\tlet match = false;\n\t\tswitch (platform) {\n\t\t\tcase 'Windows':\n\t\t\t\tmatch = navigator.platform.includes ('Win');\n\t\t\t\tbreak;\n\n\t\t\tcase 'macOS':\n\t\t\t\tmatch = navigator.platform.includes ('Mac');\n\t\t\t\tbreak;\n\n\t\t\tcase 'Linux':\n\t\t\t\tmatch = navigator.platform.includes ('Linux');\n\t\t\t\tbreak;\n\n\t\t\tcase 'FreeBSD':\n\t\t\t\tmatch = navigator.platform.includes ('FreeBSD');\n\t\t\t\tbreak;\n\n\t\t\tcase 'webOS':\n\t\t\t\tmatch = navigator.platform.includes ('WebTV');\n\t\t\t\tbreak;\n\n\t\t\tcase 'Any':\n\t\t\tdefault:\n\t\t\t\tmatch = navigator.platform.includes ('Win')\n\t\t\t\t\t\t|| navigator.platform.includes ('Mac')\n\t\t\t\t\t\t|| navigator.platform.includes ('Linux')\n\t\t\t\t\t\t|| navigator.platform.includes ('FreeBSD')\n\t\t\t\t\t\t|| navigator.platform.includes ('WebTV');\n\t\t\t\tbreak;\n\t\t}\n\t\treturn match;\n\t}\n\n\t/**\n\t * Check if the app is running in a mobile platform\n\t * @param {string } [platform='Any'] - Check for a specific mobile platform [Android | iOS | Opera | Windows | BlackBerry | Any]\n\t * @returns {boolean}\n\t */\n\tstatic mobile (platform = 'Any') {\n\t\tlet match = false;\n\t\tswitch (platform) {\n\t\t\tcase 'Android':\n\t\t\t\tmatch = /Android/i.test (navigator.userAgent);\n\t\t\t\tbreak;\n\n\t\t\tcase 'iOS':\n\t\t\t\tmatch = /iPhone|iPad|iPod/i.test (navigator.userAgent);\n\t\t\t\tbreak;\n\n\t\t\tcase 'Opera':\n\t\t\t\tmatch = /Opera Mini/i.test (navigator.userAgent);\n\t\t\t\tbreak;\n\n\t\t\tcase 'Windows':\n\t\t\t\tmatch = /Windows Phone|IEMobile|WPDesktop/i.test (navigator.userAgent);\n\t\t\t\tbreak;\n\n\t\t\tcase 'BlackBerry':\n\t\t\t\tmatch = /BlackBerry|BB10/i.test (navigator.userAgent);\n\t\t\t\tbreak;\n\n\t\t\tcase 'Any':\n\t\t\tdefault:\n\t\t\t\tmatch = /Android|iPhone|iPad|iPod|Windows Phone|IEMobile|WPDesktop|BlackBerry|BB10/i.test (navigator.userAgent);\n\t\t\t\tbreak;\n\t\t}\n\t\treturn match;\n\t}\n\n\t/**\n\t * @static serviceWorkers - Check if the platform allows the use of service\n\t * workers\n\t *\n\t * @return {boolean} - Whether they're supported or not\n\t */\n\tstatic serviceWorkers () {\n\t\tif (typeof navigator !== 'undefined') {\n\t\t\tif ('serviceWorker' in navigator && location.protocol.indexOf ('http') > -1) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n}","/**\n * ==============================\n * Preload\n * ==============================\n */\n\nimport { Request } from './Request';\n\n/**\n * A simple class for asset preloading. This class assumes you have a service\n * worker set up that will be caching all requests.\n * @class\n */\nexport class Preload {\n\n\t/**\n\t * @static image - Preload an image file\n\t *\n\t * @param  {string} route - Route to the image\n\t * @return {Promise} - Resolves to the image object or gets rejected with\n\t * the rejection event\n\t */\n\tstatic image (route) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst image = new Image ();\n\n\t\t\timage.onload = () => {\n\t\t\t\tresolve (image);\n\t\t\t};\n\n\t\t\timage.onerror = (e) => {\n\t\t\t\treject (e);\n\t\t\t};\n\n\t\t\timage.src = route;\n\t\t});\n\t}\n\n\t/**\n\t * @static file - Preload any kind of file\n\t *\n\t * @param  {string} route - Route to the file\n\t * @return {Promise} - Resolves or rejects depending on request success\n\t */\n\tstatic file (route) {\n\t\treturn Request.blob (route);\n\t}\n}","/**\n* ==============================\n* Local Storage Adapter\n* ==============================\n*/\n\n/**\n * The Local Storage Adapter provides the Space Class the ability to interact\n * with the localStorage api found in most modern browsers.\n *\n * @class\n */\nexport class LocalStorage {\n\n\t/**\n\t * Create a new LocalStorage. If no configuration is provided, the LocalStorage\n\t * global object is used. The LocalStorage Adapter can provide independency\n\t * by store name and space name.\n\t *\n\t * @constructor\n\t * @param {Object} [configuration={name = '', version = '', store = ''}] - Configuration Object for the Adapter\n\t * @param {string} configuration.name - Name of the Space\n\t * @param {string} configuration.version - Version of the Space in Semantic versioning syntax\n\t * @param {string} configuration.store - Name of the Object Store to use\n\t *\n\t */\n\tconstructor ({name = '', version = '', store = ''}) {\n\t\tthis.name = name;\n\t\tthis.version = version;\n\t\tthis.store = store;\n\n\t\tthis.upgrades = {};\n\n\t\tif (this.version === '') {\n\t\t\tthis.numericVersion = 0;\n\t\t} else {\n\t\t\tthis.numericVersion = parseInt (version.replace (/\\./g, ''));\n\t\t}\n\n\t\tif (name !== '' && version !== '' && store !== '') {\n\t\t\tthis.id = `${this.name}::${this.store}::${this.version}_`;\n\t\t} else if (name !== '' && version !== '') {\n\t\t\tthis.id = `${this.name}::${this.version}_`;\n\t\t} else if (name !== '') {\n\t\t\tthis.id = `${this.name}::_`;\n\t\t} else {\n\t\t\tthis.id = '';\n\t\t}\n\t}\n\n\t/**\n\t * Open the Storage Object\n\t *\n\t * @return {Promise}\n\t */\n\topen () {\n\t\tif (typeof this.storage === 'object' && !(this.storage instanceof Promise)) {\n\t\t\treturn Promise.resolve (this);\n\t\t} else if (this.storage instanceof Promise) {\n\t\t\treturn this.storage;\n\t\t} else {\n\t\t\tthis.storage = new Promise ((resolve) => {\n\t\t\t\tlet upgradesToApply = [];\n\n\t\t\t\t// Check if this space is versioned\n\t\t\t\tif (this.version !== '') {\n\t\t\t\t\t// Get the versionless part of the ID to check if an upgrade needs\n\t\t\t\t\t// to ocurr based on the version available on storage and the current\n\t\t\t\t\t// version.\n\t\t\t\t\tlet versionless = '';\n\t\t\t\t\tif (this.name !== '' && this.version !== '' && this.store !== '') {\n\t\t\t\t\t\tversionless = `${this.name}::${this.store}::`;\n\t\t\t\t\t} else if (this.name !== '' && this.version !== '') {\n\t\t\t\t\t\tversionless = `${this.name}::`;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Get all the currently stored keys that contain the versionless\n\t\t\t\t\t// ID, which means they belong to this space\n\t\t\t\t\tconst storedVersions = Object.keys (window.localStorage).filter ((key) => {\n\t\t\t\t\t\treturn key.indexOf (versionless) === 0;\n\t\t\t\t\t}).map ((key) => {\n\t\t\t\t\t\t// Remove the versionless part of the ID and keep only the\n\t\t\t\t\t\t// part of the key belonging to the ID\n\t\t\t\t\t\treturn key.replace (versionless, '').split ('_')[0];\n\t\t\t\t\t}). filter ((key) => {\n\t\t\t\t\t\t// Filter all that didn't match the versionless part fully\n\t\t\t\t\t\treturn key.indexOf ('::') === -1;\n\t\t\t\t\t}).sort ();\n\n\t\t\t\t\tif (storedVersions.length > 0) {\n\t\t\t\t\t\t// We'll only take the lowest one every time\n\t\t\t\t\t\tconst oldVersion = storedVersions[0];\n\t\t\t\t\t\tconst oldVersionNumeric = parseInt (oldVersion.replace (/\\./g, ''));\n\n\t\t\t\t\t\tif (oldVersionNumeric < this.numericVersion) {\n\t\t\t\t\t\t\t// Check what upgrade functions have been declared in their respective order\n\t\t\t\t\t\t\tconst availableUpgrades = Object.keys (this.upgrades).sort ();\n\n\t\t\t\t\t\t\t// Find the first update that needs to be applied to the database given\n\t\t\t\t\t\t\t// the old version it currently has.\n\t\t\t\t\t\t\tconst startFrom = availableUpgrades.findIndex (u => {\n\t\t\t\t\t\t\t\tconst [old, ] = u.split ('::');\n\t\t\t\t\t\t\t\treturn parseInt (old) === oldVersionNumeric;\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tif (startFrom > -1) {\n\t\t\t\t\t\t\t\tupgradesToApply = availableUpgrades.slice (startFrom).filter ((u) => {\n\t\t\t\t\t\t\t\t\tconst [old, next] = u.split ('::');\n\t\t\t\t\t\t\t\t\treturn parseInt (old) < this.numericVersion && parseInt (next) <= this.numericVersion;\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Get the previous ID using the old version\n\t\t\t\t\t\t\tlet previousId = `${this.name}::${oldVersion}_`;\n\n\t\t\t\t\t\t\tif (this.name !== '' && this.version !== '' && this.store !== '') {\n\t\t\t\t\t\t\t\tpreviousId = `${this.name}::${this.store}::${oldVersion}_`;\n\t\t\t\t\t\t\t} else if (this.name !== '' && this.version !== '') {\n\t\t\t\t\t\t\t\tpreviousId = `${this.name}::${oldVersion}_`;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Get all keys from the previous version\n\t\t\t\t\t\t\tconst keys = Object.keys (window.localStorage).filter ((key) => {\n\t\t\t\t\t\t\t\treturn key.indexOf (previousId) === 0;\n\t\t\t\t\t\t\t}).map ((key) => {\n\t\t\t\t\t\t\t\treturn key.replace (previousId, '');\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tfor (const key of keys) {\n\t\t\t\t\t\t\t\t// Get the value stored with the previous version\n\t\t\t\t\t\t\t\tconst previous = window.localStorage.getItem (`${previousId}${key}`);\n\n\t\t\t\t\t\t\t\t// Re-insert the value using the new ID as a key\n\t\t\t\t\t\t\t\twindow.localStorage.setItem (this.id + key, previous);\n\n\t\t\t\t\t\t\t\t// Delete the previous value.\n\t\t\t\t\t\t\t\twindow.localStorage.removeItem (`${previousId}${key}`);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tresolve ({ upgrades: upgradesToApply });\n\t\t\t}).then (({ upgrades }) => {\n\t\t\t\tthis.storage = window.localStorage;\n\t\t\t\treturn new Promise ((resolve) => {\n\t\t\t\t\tconst res = () => resolve (this);\n\t\t\t\t\tthis._upgrade (upgrades, res);\n\t\t\t\t});\n\t\t\t});\n\t\t\treturn this.storage;\n\t\t}\n\t}\n\n\t/**\n\t * Store a key-value pair\n\t *\n\t * @param  {string} key - Key with which this value will be saved\n\t * @param  {Object|string|Number} - Value to save\n\t * @return {Promise<{key, value}>}\n\t */\n\tset (key, value) {\n\t\treturn this.open ().then (() => {\n\n\t\t\tif (typeof value === 'object') {\n\t\t\t\tthis.storage.setItem (this.id + key, JSON.stringify (value));\n\t\t\t} else {\n\t\t\t\tthis.storage.setItem (this.id + key, value);\n\t\t\t}\n\n\t\t\treturn Promise.resolve ({key, value});\n\t\t});\n\t}\n\n\t/**\n\t * Update a key-value pair. In difference with the set () method, the update\n\t * method will use an Object.assign () in the case of objects so no value is\n\t * lost.\n\t *\n\t * @param  {string} key - Key with which this value will be saved\n\t * @param  {Object|string|Number} - Value to save\n\t * @return {Promise<{key, value}>}\n\t */\n\tupdate (key, value) {\n\t\treturn this.get (key).then ((currentValue) => {\n\t\t\tif (typeof currentValue === 'object') {\n\t\t\t\tif (typeof value === 'object') {\n\t\t\t\t\tvalue = Object.assign ({}, currentValue, value);\n\t\t\t\t}\n\t\t\t\tthis.storage.setItem (this.id + key, JSON.stringify (value));\n\t\t\t} else {\n\t\t\t\tthis.storage.setItem (this.id + key, value);\n\t\t\t}\n\t\t\treturn Promise.resolve ({key, value});\n\t\t}).catch (() => {\n\t\t\treturn this.set (key, value);\n\t\t});\n\t}\n\n\t/**\n\t * Retrieves a value from storage given it's key\n\t *\n\t * @param  {string} - Key with which the value was saved\n\t * @return {Promise<Object>|Promise<string>|Promise<Number>} - Resolves to the retreived value\n\t * or its rejected if it doesn't exist\n\t */\n\tget (key) {\n\t\treturn this.open ().then (() => {\n\t\t\treturn new Promise ((resolve, reject) => {\n\t\t\t\tlet value = null;\n\t\t\t\tvalue = this.storage.getItem (this.id + key);\n\t\t\t\ttry {\n\t\t\t\t\tconst o = JSON.parse (value);\n\t\t\t\t\tif (o && typeof o === 'object') {\n\t\t\t\t\t\tvalue = o;\n\t\t\t\t\t}\n\t\t\t\t} catch (exception) {\n\t\t\t\t\t// Unable to parse to JSON\n\t\t\t\t}\n\n\t\t\t\tif (typeof value !== 'undefined' && value !== null) {\n\t\t\t\t\tresolve (value);\n\t\t\t\t} else {\n\t\t\t\t\treject ();\n\t\t\t\t}\n\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Retrieves all the values in the space in a key-value JSON object\n\t *\n\t * @return {Promise<Object>} - Resolves to the retreived values\n\t */\n\tgetAll () {\n\t\treturn this.keys ().then ((keys) => {\n\t\t\tconst values = {};\n\t\t\tconst promises = [];\n\t\t\tfor (const key of keys) {\n\t\t\t\tpromises.push (this.get (key).then ((value) => {\n\t\t\t\t\tvalues[key] = value;\n\t\t\t\t}));\n\t\t\t}\n\t\t\treturn Promise.all (promises).then (() => {\n\t\t\t\treturn values;\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Check if the space contains a given key.\n\t *\n\t * @param  {string} key - Key to look for.\n\t * @return {Promise} Promise gets resolved if it exists and rejected if\n\t * doesn't\n\t */\n\tcontains (key) {\n\t\treturn this.keys ().then ((keys) => {\n\t\t\tif (keys.includes (key)) {\n\t\t\t\tPromise.resolve ();\n\t\t\t} else {\n\t\t\t\treturn Promise.reject ();\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Upgrade a Space Version\n\t *\n\t * @param oldVersion {string} - The version of the storage to be upgraded\n\t * @param newVersion {string} - The version to be upgraded to\n\t * @param callback {function} - Function to transform the old stored values to the new version's format\n\t * @returns {Promise}\n\t */\n\tupgrade (oldVersion, newVersion, callback) {\n\t\tthis.upgrades[`${parseInt (oldVersion.replace (/\\./g, ''))}::${parseInt (newVersion.replace (/\\./g, ''))}`] = callback;\n\t\treturn Promise.resolve ();\n\t}\n\n\t// This function acts as a helper for the upgrade progress by executing the\n\t// needed upgrade callbacks in the correct order and sychronously.\n\t_upgrade (upgradesToApply, resolve) {\n\t\t// Check if there are still upgrades to apply\n\t\tif (upgradesToApply.length > 0) {\n\t\t\tthis.upgrades[upgradesToApply[0]].call (this, this).then (() => {\n\t\t\t\tthis._upgrade (upgradesToApply.slice (1), resolve);\n\t\t\t}).catch ((e) => console.error (e));\n\t\t} else {\n\t\t\tresolve ();\n\t\t}\n\t}\n\n\t/**\n\t * Rename a Space\n\t *\n\t * @param {string} name - New name to be used.\n\t * @returns {Promise} - Result of the rename operation\n\t */\n\trename (name) {\n\t\t// Check if the name is different\n\t\tif (this.name !== name) {\n\t\t\treturn this.keys ().then ((keys) => {\n\t\t\t\t// Save the previous Space id\n\t\t\t\tconst oldId = this.id;\n\n\t\t\t\t// Set new object properties with the new name\n\t\t\t\tthis.name = name;\n\n\t\t\t\tif (this.name !== '' && this.version !== '' && this.store !== '') {\n\t\t\t\t\tthis.id = `${this.name}::${this.store}::${this.version}_`;\n\t\t\t\t} else if (this.name !== '' && this.version !== '') {\n\t\t\t\t\tthis.id = `${this.name}::${this.version}_`;\n\t\t\t\t} else if (this.name !== '') {\n\t\t\t\t\tthis.id = `${this.name}::_`;\n\t\t\t\t} else {\n\t\t\t\t\tthis.id = '';\n\t\t\t\t}\n\n\t\t\t\tconst promises = [];\n\t\t\t\tfor (const key of keys) {\n\t\t\t\t\tpromises.push (this.set (key, this.storage.getItem (`${oldId}${key}`)).then (() => {\n\t\t\t\t\t\tthis.storage.removeItem (`${oldId}${key}`);\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t\treturn Promise.all (promises);\n\t\t\t});\n\t\t} else {\n\t\t\treturn Promise.reject ();\n\t\t}\n\t}\n\n\t/**\n\t * Get the key that corresponds to a given index in the storage\n\t *\n\t * @param  {Number} index - Index to get the key from\n\t * @param  {boolean} [full=false] - Whether to return the full key name including space id or just the key name\n\t * @return {Promise<string>} - Resolves to the key's name\n\t */\n\tkey (index, full = false) {\n\t\treturn this.open ().then (() => {\n\t\t\tif (full === true) {\n\t\t\t\treturn Promise.resolve (this.storage.key (index));\n\t\t\t} else {\n\t\t\t\treturn Promise.resolve (this.storage.key (index).replace (this.id, ''));\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Return all keys stored in the space.\n\t *\n\t * @param {boolean} [full=false] - Whether to return the full key name including space id or just the key name\n\t * @return {Promise<string[]>} - Array of keys\n\t */\n\tkeys (full = false) {\n\t\treturn this.open ().then (() => {\n\t\t\treturn Promise.resolve (Object.keys (this.storage).filter ((key) => {\n\t\t\t\treturn key.indexOf (this.id) === 0;\n\t\t\t}).map ((key) => {\n\t\t\t\tif (full === true) {\n\t\t\t\t\treturn key;\n\t\t\t\t} else {\n\t\t\t\t\treturn key.replace (this.id, '');\n\t\t\t\t}\n\t\t\t}));\n\t\t});\n\t}\n\n\t/**\n\t * Delete a value from the space given its key\n\t *\n\t * @param  {string} key - Key of the item to delete\n\t * @return {Promise<value>} - Resolves to the value of the deleted object\n\t */\n\tremove (key) {\n\t\treturn this.get (key).then ((value) => {\n\t\t\tthis.storage.removeItem (this.id + key);\n\t\t\treturn Promise.resolve (value);\n\t\t});\n\t}\n\n\t/**\n\t * Clear the entire space\n\t *\n\t * @return {Promise} - Result of the clear operation\n\t */\n\tclear () {\n\t\treturn this.keys ().then ((keys) => {\n\t\t\tfor (const key of keys) {\n\t\t\t\tthis.remove (key);\n\t\t\t}\n\t\t\treturn Promise.resolve ();\n\t\t});\n\t}\n}","/**\n* ==============================\n* Space\n* ==============================\n*/\n\nimport { LocalStorage } from './SpaceAdapter/LocalStorage';\nimport { SessionStorage } from './SpaceAdapter/SessionStorage';\nimport { IndexedDB } from './SpaceAdapter/IndexedDB';\nimport { RemoteStorage } from './SpaceAdapter/RemoteStorage';\n\n/**\n * List of Adapters Available\n */\nexport const SpaceAdapter = {\n\tLocalStorage,\n\tSessionStorage,\n\tIndexedDB,\n\tRemoteStorage\n};\n\n/**\n * Space provides a simple wrapper for different Storage APIs. It aims to\n * provide data independence through storage namespaces and versioning, allowing\n * transparent data formatting and content modifications through versions.\n *\n * While this class documentation provides some information, specific details may\n * be addressed on the documentation of each adapter.\n *\n * @class\n */\nexport class Space {\n\n\t/**\n\t * Create a new Space Object. If no name and version is defined, the global LocalSpace space is used.\n\t *\n\t * @constructor\n\t * @param {SpaceAdapter} [adapter = SpaceAdapter.LocalStorage] - Space Adapter\n\t * to use. Currently LocalStorage, SessionStorage, IndexedDB and Server are\n\t * available\n\t * @param {Object} [configuration = {}] - Configuration object for the space.\n\t * This configuration may change depending on the adapter used, however all\n\t * adapters have support for a name, version and store properties.\n\t * @param {string} configuration.name - Name of the Space\n\t * @param {string} configuration.version - Version of the Space in Semantic versioning syntax\n\t * @param {string} configuration.store - Name of the Object Store to use\n\t */\n\tconstructor (adapter = SpaceAdapter.LocalStorage, configuration = {}) {\n\t\t// Assign the provided configuration to the default one\n\t\tthis._configuration = Object.assign ({}, {name: '', version: '', store: ''}, configuration);\n\n\t\t// Set up the adapter instance to use\n\t\tthis.adapter = new adapter (this._configuration);\n\n\t\t// This object stores all the callbacks the user can define for the\n\t\t// space operations\n\t\tthis.callbacks = {\n\t\t\t'create': [],\n\t\t\t'update': [],\n\t\t\t'delete': []\n\t\t};\n\n\t\t// A transformation is an object that can contain a set and get functions\n\t\t// every transformation will be applied to the retrieved value or to the\n\t\t// value before storing it.\n\t\tthis.transformations = {\n\n\t\t};\n\t}\n\n\t/**\n\t * Modify the space configuration, it will also be passed down to the adapter\n\t * using its configuration () function.\n\t *\n\t * @param  {object} - Configuration object to set up\n\t * @return {object} - Configuration object if no param was passed\n\t */\n\tconfiguration (object = null) {\n\t\tif (object !== null) {\n\t\t\tthis._configuration = Object.assign ({}, this._configuration, object);\n\t\t\tthis.adapter.configuration (object);\n\t\t} else {\n\t\t\treturn this._configuration;\n\t\t}\n\t}\n\n\t/**\n\t * Open the Storage Object to be used depending on the SpaceAdapter\n\t *\n\t * @return {Promise}\n\t */\n\topen () {\n\t\treturn this.adapter.open ().then (() => {\n\t\t\treturn Promise.resolve (this);\n\t\t});\n\t}\n\n\t/**\n\t * Store a key-value pair\n\t *\n\t * @param  {string} key - Key with which this value will be saved\n\t * @param  {Object|string|Number} - Value to save\n\t * @return {Promise<{key, value}>}\n\t */\n\tset (key, value) {\n\t\t// Apply all set transformations to the value\n\t\tfor (const id of Object.keys (this.transformations)) {\n\t\t\tif (typeof this.transformations[id].set === 'function') {\n\t\t\t\tvalue = this.transformations[id].set.call (null, key, value);\n\t\t\t}\n\t\t}\n\n\t\treturn this.adapter.set (key, value).then (({key, value}) => {\n\t\t\tfor (const callback of this.callbacks.create) {\n\t\t\t\tcallback.call (null, key, value);\n\t\t\t}\n\t\t\treturn Promise.resolve ({key, value});\n\t\t});\n\t}\n\n\t/**\n\t * Update a key-value pair. In difference with the set () method, the update\n\t * method will use an Object.assign () in the case of objects so no value is\n\t * lost.\n\t *\n\t * @param  {string} key - Key with which this value will be saved\n\t * @param  {Object|string|Number} - Value to save\n\t * @return {Promise<{key, value}>}\n\t */\n\tupdate (key, value) {\n\t\t// Apply all set transformations to the value\n\t\tfor (const id of Object.keys (this.transformations)) {\n\t\t\tif (typeof this.transformations[id].set === 'function') {\n\t\t\t\tvalue = this.transformations[id].set.call (null, key, value);\n\t\t\t}\n\t\t}\n\n\t\treturn this.adapter.update (key, value).then (({key, value}) => {\n\t\t\tfor (const callback of this.callbacks.update) {\n\t\t\t\tcallback.call (null, key, value);\n\t\t\t}\n\t\t\treturn Promise.resolve ({key, value});\n\t\t});\n\t}\n\n\t/**\n\t * Retrieves a value from storage given it's key\n\t *\n\t * @param  {string} - Key with which the value was saved\n\t * @return {Promise<Object>|Promise<string>|Promise<Number>} - Resolves to the retreived value\n\t * or its rejected if it doesn't exist.\n\t */\n\tget (key) {\n\t\treturn this.adapter.get (key).then ((value) => {\n\t\t\t// Apply all get transformations to the value\n\t\t\tfor (const id of Object.keys (this.transformations)) {\n\t\t\t\tif (typeof this.transformations[id].get === 'function') {\n\t\t\t\t\tvalue = this.transformations[id].get.call (null, key, value);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn value;\n\t\t});\n\t}\n\n\t/**\n\t * Retrieves all the values in the space in a key-value JSON object\n\t *\n\t * @return {Promise<Object>} - Resolves to the retreived values\n\t */\n\tgetAll () {\n\t\treturn this.adapter.getAll ().then ((values) => {\n\t\t\t// Apply all get transformations to the value\n\t\t\tfor (const key of Object.keys (values)) {\n\t\t\t\tfor (const id of Object.keys (this.transformations)) {\n\t\t\t\t\tif (typeof this.transformations[id].get === 'function') {\n\t\t\t\t\t\tvalues[key] = this.transformations[id].get.call (null, key, values[key]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn values;\n\t\t});\n\t}\n\n\t/**\n\t * Iterate over every value in the space\n\t *\n\t * @param  {function (key, value)} callback - A callback function receiving the\n\t * key and value of a value. Must return a callback\n\t * @return {Promise} - Resolves when all callbacks have been resolved.\n\t */\n\teach (callback) {\n\t\treturn this.getAll ().then ((values) => {\n\t\t\tconst promises = [];\n\t\t\tfor (const i of Object.keys (values)) {\n\t\t\t\tpromises.push (callback.call (this, i, values[i]));\n\t\t\t}\n\t\t\treturn Promise.all (promises);\n\t\t});\n\t}\n\n\t/**\n\t * Check if a space contains a given key. Not all adapters may give this information\n\t *\n\t * @param  {string} key - Key to look for.\n\t * @return {Promise} - Promise gets resolved if it exists and rejected if\n\t * doesn't\n\t */\n\tcontains (key) {\n\t\treturn this.adapter.contains (key);\n\t}\n\n\t/**\n\t * Upgrade a Space Version. Not all adapters may provide this functionality\n\t *\n\t * @param oldVersion {string} - The version of the storage to be upgraded\n\t * @param newVersion {string} - The version to be upgraded to\n\t * @param callback {function} - Function to transform the old stored values to the new version's format\n\t *\n\t * @returns {Promise} - Result of the upgrade operation\n\t */\n\tupgrade (oldVersion, newVersion, callback) {\n\t\treturn this.adapter.upgrade (oldVersion, newVersion, callback).then (() => {\n\t\t\treturn Promise.resolve (this);\n\t\t});\n\t}\n\n\t/**\n\t * Rename a Space. Not all adapters may provide this functionality\n\t *\n\t * @param {string} name - New name to be used.\n\t * @returns {Promise} Result of the rename operation\n\t */\n\trename (name) {\n\t\treturn this.adapter.rename (name);\n\t}\n\n\t/**\n\t * Add a callback function to be run every time a value is created.\n\t *\n\t * @param  {function (key, value)} callback - Callback Function. Key and Value pair will be sent as parameters when run.\n\t */\n\tonCreate (callback) {\n\t\tthis.callbacks.create.push (callback);\n\t}\n\n\t/**\n\t * Add a callback function to be run every time a value is updated.\n\t *\n\t * @param  {function (key, value)} callback - Callback Function. Key and Value pair will be sent as parameters when run.\n\t */\n\tonUpdate (callback) {\n\t\tthis.callbacks.update.push (callback);\n\t}\n\n\t/**\n\t * Add a callback function to be run every time a value is deleted.\n\t *\n\t * @param  {function (key, value)} callback - Callback Function. Key and Value pair will be sent as parameters when run.\n\t */\n\tonDelete (callback) {\n\t\tthis.callbacks.delete.push (callback);\n\t}\n\n\t/**\n\t * Add a transformation function to the space.\n\t *\n\t * @param  {string} id - Unique transformation name or identifier\n\t * @param  {function (key, value)|null} get - Transformation function to apply to the content before\n\t * returning the value when using the get () function .\n\t * @param  {function (key, value)|null} set - Transformation function to apply to the content before\n\t * saving it when using the set () function befo.\n\t */\n\taddTransformation ({id, get, set}) {\n\t\tthis.transformations[id] = {\n\t\t\tid,\n\t\t\tget,\n\t\t\tset\n\t\t};\n\t}\n\n\t/**\n\t * Remove a transformation function given its id\n\t *\n\t * @param  {string} id - Name or identifier of the transformation to remove\n\t */\n\tremoveTransformation (id) {\n\t\tdelete this.transformations[id];\n\t}\n\n\t/**\n\t * Get the key that corresponds to a given index in the storage. Not all adapters may provide this functionality\n\t *\n\t * @param  {Number} index - Index to get the key from\n\t * @param  {boolean} [full = false] - Whether to return the full key name including space id or just the key name\n\t * @return {Promise<string>} - Resolves to the key's name\n\t */\n\tkey (index, full = false) {\n\t\treturn this.adapter.key (index, full);\n\t}\n\n\t/**\n\t * Return all keys stored in the space. Not all adapters may provide this functionality\n\t *\n\t * @param {boolean} [full = false] - Whether to return the full key name including space id or just the key name\n\t * @return {Promise<string[]>} - Array of keys\n\t */\n\tkeys (full = false) {\n\t\treturn this.adapter.keys (full);\n\t}\n\n\t/**\n\t * Delete a value from the space given it's key\n\t *\n\t * @param  {string} key - Key of the item to delete\n\t * @return {Promise<key, value>} - Resolves to the key and value of the deleted object\n\t */\n\tremove (key) {\n\t\treturn this.adapter.remove (key).then ((value) => {\n\t\t\t// Run the callback for deletions\n\t\t\tfor (const callback of this.callbacks.delete) {\n\t\t\t\tcallback.call (null, key, value);\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Clear the entire space\n\t *\n\t * @return {Promise} - Result of the clear operation\n\t */\n\tclear () {\n\t\treturn this.adapter.clear ();\n\t}\n}","/**\n* ==============================\n* Session Storage Adapter\n* ==============================\n*/\n\nimport { LocalStorage } from './LocalStorage';\n\n/**\n * The Session Storage Adapter provides the Space Class the ability to interact\n * with the sessionStorage api found in most modern browsers. Since this API\n * shares pretty much the same methods to the local storage one, this class\n * inherits from the LocalStorage adapter.\n *\n * @class\n */\nexport class SessionStorage extends LocalStorage {\n\n\t/**\n\t * Create a new SessionStorage. If no configuration is provided, the SessionStorage\n\t * global object is used.The SessionStorage Adapter can provide independency\n\t * by store name and space name.\n\t *\n\t * @constructor\n\t * @param {Object} [configuration={name = '', version = '', store = ''}] - Configuration Object for the Adapter\n\t * @param {string} configuration.name - Name of the Space\n\t * @param {string} configuration.version - Version of the Space in Semantic versioning syntax\n\t * @param {string} configuration.store - Name of the Object Store to use\n\t *\n\t */\n\tconstructor ({name = '', version = '', store = ''}) {\n\t\tsuper ({name, version, store});\n\t}\n\n\t/**\n\t * Open the Storage Object\n\n\t * @return {Promise<SessionStorage>}\n\t */\n\topen () {\n\t\tif (typeof this.storage === 'undefined') {\n\t\t\tthis.storage = window.sessionStorage;\n\t\t}\n\t\treturn Promise.resolve (this);\n\t}\n}","/**\n* ==============================\n* IndexedDB Adapter\n* ==============================\n*/\n\n/**\n * The IndexedDB Adapter provides the Space Class the ability to interact\n * with the IndexedDB API found in most modern browsers.\n *\n * @class\n */\nexport class IndexedDB {\n\n\t/**\n\t * Create a new IndexedDB. Differently from Local and Session Storages, the\n\t * IndexedDB Adapter requires a mandatory name, version and store name.\n\t *\n\t * @constructor\n\t * @param {Object} [configuration={name = '', version = '', store = '', props = {}, index = {}}] - Configuration Object for the Adapter\n\t * @param {string} configuration.name - Name of the Space\n\t * @param {string} configuration.version - Version of the Space in Semantic versioning syntax\n\t * @param {string} configuration.store - Name of the Object Store to use\n\t * @param {Object} configuration.props - Optional Parameters for the Object Store\n\t * @param {Object} configuration.index - Object of the indexes to declare for\n\t * the  Object Store. Each index is a JSON object with the following properties:\n\t * @param {String} configuration.index[...].name - Name for the Index\n\t * @param {String} configuration.index[...].field - Field on the store to apply the index to\n\t * @param {Object} configuration.index[...].props - Index properties object\n\t */\n\tconstructor ({name = '', version = '', store = '', props = {}, index = {}}) {\n\t\tthis.name = name;\n\t\tthis.version = version;\n\t\tthis.store = store;\n\t\tthis.props = props || {};\n\t\tthis.index = index;\n\n\t\tthis.keyPath = props.keyPath || 'id';\n\n\t\tthis.upgrades = {};\n\n\t\tif (this.version === '') {\n\t\t\tthis.numericVersion = 0;\n\t\t} else {\n\t\t\tthis.numericVersion = parseInt (version.replace (/\\./g, ''));\n\t\t}\n\t}\n\n\t/**\n\t * Open the Storage Object\n\t *\n\t * @return {Promise}\n\t */\n\topen () {\n\n\t\tif (this.name === '') {\n\t\t\tconsole.error ('No name has been defined for IndexedDB space.');\n\t\t\treturn Promise.reject ();\n\t\t}\n\n\t\tif (this.store === '') {\n\t\t\tconsole.error ('No store has been defined for IndexedDB space.');\n\t\t\treturn Promise.reject ();\n\t\t}\n\n\t\tif (this.storage instanceof IDBDatabase) {\n\t\t\treturn Promise.resolve (this);\n\t\t} else if (this.storage instanceof Promise) {\n\t\t\treturn this.storage;\n\t\t} else {\n\t\t\tthis.storage = new Promise ((resolve, reject) => {\n\t\t\t\tlet upgradesToApply = [];\n\t\t\t\tconst storage = window.indexedDB.open (this.name, this.numericVersion);\n\n\t\t\t\tstorage.onerror = (event) => {\n\t\t\t\t\treject (event);\n\t\t\t\t};\n\n\t\t\t\tstorage.onsuccess = (event) => {\n\t\t\t\t\tresolve ({ storage: event.target.result, upgrades: upgradesToApply });\n\t\t\t\t};\n\n\t\t\t\tstorage.onupgradeneeded = (event) => {\n\t\t\t\t\t// If the previous version is less than one, it means that\n\t\t\t\t\t// the database needs to be created first\n\t\t\t\t\tif (event.oldVersion < 1) {\n\t\t\t\t\t\t// Create all the needed Stores\n\t\t\t\t\t\tconst store = event.target.result.createObjectStore (this.store, this.props);\n\t\t\t\t\t\tfor (const index of Object.keys (this.index)) {\n\t\t\t\t\t\t\tstore.createIndex (this.index[index].name, this.index[index].field, this.index[index].props);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Check what upgrade functions have been declared in their respective order\n\t\t\t\t\t\tconst availableUpgrades = Object.keys (this.upgrades).sort ();\n\n\t\t\t\t\t\t// Find the first update that needs to be applied to the database given\n\t\t\t\t\t\t// the old version it currently has.\n\t\t\t\t\t\tconst startFrom = availableUpgrades.findIndex (u => {\n\t\t\t\t\t\t\tconst [old, ] = u.split ('::');\n\t\t\t\t\t\t\treturn parseInt (old) === event.oldVersion;\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (startFrom > -1) {\n\t\t\t\t\t\t\tupgradesToApply = availableUpgrades.slice (startFrom).filter ((u) => {\n\t\t\t\t\t\t\t\tconst [old, next] = u.split ('::');\n\t\t\t\t\t\t\t\treturn parseInt (old) < this.numericVersion && parseInt (next) <= this.numericVersion;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Once the transaction is done, resolve the storage object\n\t\t\t\t\tconst transaction = event.target.transaction;\n\t\t\t\t\ttransaction.addEventListener ('success', () => {\n\t\t\t\t\t\tresolve ({ storage: event.target.result, upgrades: upgradesToApply });\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t}).then (({ storage, upgrades }) => {\n\t\t\t\tthis.storage = storage;\n\t\t\t\treturn new Promise ((resolve) => {\n\t\t\t\t\tconst res = () => resolve (storage);\n\t\t\t\t\tthis._upgrade (upgrades, res, event);\n\t\t\t\t});\n\t\t\t});\n\t\t\treturn this.storage;\n\t\t}\n\t}\n\n\t/**\n\t * Store a key-value pair. Because of the nature of a IndexedDB Database, the\n\t * stored values must be JSON objects.\n\t *\n\t * @param  {string} key - Key with which this value will be saved\n\t * @param  {Object} - Value to save\n\t * @return {Promise<Object>} - When resolved, a {key, value} object is handed\n\t * down, when it's rejected, the event is handed down.\n\t */\n\tset (key = null, value) {\n\t\treturn this.open ().then (() => {\n\t\t\treturn new Promise ((resolve, reject) => {\n\t\t\t\tconst transaction = this.storage.transaction (this.store, 'readwrite').objectStore (this.store);\n\t\t\t\tlet op;\n\t\t\t\tif (key !== null) {\n\t\t\t\t\tconst temp = {};\n\t\t\t\t\ttemp[this.keyPath] = key;\n\t\t\t\t\top = transaction.put (Object.assign ({}, temp, value));\n\t\t\t\t} else {\n\t\t\t\t\top = transaction.add (value);\n\t\t\t\t}\n\t\t\t\top.addEventListener ('success', (event) => { resolve ({key: event.target.result, value: value});});\n\t\t\t\top.addEventListener ('error', (event) => {reject (event);});\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Update a key-value pair. In difference with the set () method, the update\n\t * method will use an Object.assign () in the case of objects so no value is\n\t * lost.\n\t *\n\t * @param  {string} key - Key with which this value will be saved\n\t * @param  {Object} - Value to save\n\t * @return {Promise<Object>} - When resolved, a {key, value} object is handed\n\t * down, when it's rejected, the event is handed down.\n\t */\n\tupdate (key, value) {\n\t\treturn this.get (key).then ((currentValue) => {\n\t\t\t// If this key did not exist on the storage, then create it using the\n\t\t\t// set method\n\t\t\tif (typeof currentValue === 'undefined') {\n\t\t\t\treturn this.set (key, value);\n\t\t\t}\n\t\t\treturn new Promise ((resolve, reject) => {\n\t\t\t\tconst transaction = this.storage.transaction (this.store, 'readwrite').objectStore (this.store);\n\t\t\t\tconst op = transaction.put (Object.assign ({}, currentValue, value));\n\t\t\t\top.addEventListener ('success', (event) => {resolve ({key: event.target.result, value: value});});\n\t\t\t\top.addEventListener ('error', (event) => {reject (event);});\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Retrieves a value from storage given it's key\n\t *\n\t * @param  {string} - Key with which the value was saved\n\t * @return {Promise<Object>} - Resolves to the retreived value or its rejected\n\t * if it doesn't exist\n\t */\n\tget (key) {\n\t\treturn this.open ().then (() => {\n\t\t\treturn new Promise ((resolve, reject) => {\n\t\t\t\tconst transaction = this.storage.transaction (this.store).objectStore (this.store);\n\t\t\t\tconst op = transaction.get (key);\n\n\t\t\t\top.addEventListener ('success', (event) => {\n\t\t\t\t\tconst value = event.target.result;\n\t\t\t\t\tif (typeof value !== 'undefined' && value !== null) {\n\t\t\t\t\t\tresolve (value);\n\t\t\t\t\t} else {\n\t\t\t\t\t\treject ();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\top.addEventListener ('error', (event) => {reject (event);});\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Retrieves all the values in the space in a key-value JSON object\n\t *\n\t * @return {Promise<Object>} - Resolves to the retreived values\n\t */\n\tgetAll () {\n\t\treturn this.open ().then (() => {\n\t\t\treturn new Promise ((resolve, reject) => {\n\t\t\t\tconst transaction = this.storage.transaction (this.store).objectStore (this.store);\n\t\t\t\tconst op = transaction.getAll ();\n\n\t\t\t\top.addEventListener ('success', (event) => {\n\t\t\t\t\tconst results = {};\n\t\t\t\t\tevent.target.result.forEach((item) => {\n\t\t\t\t\t\tconst id = item[this.keyPath];\n\t\t\t\t\t\tdelete item[this.keyPath];\n\n\t\t\t\t\t\tresults[id] = item;\n\t\t\t\t\t});\n\t\t\t\t\tresolve (results);\n\t\t\t\t});\n\t\t\t\top.addEventListener ('error', (event) => {reject (event);});\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Check if the space contains a given key.\n\t *\n\t * @param  {string} key - Key to look for.\n\t * @return {Promise} - Promise gets resolved if it exists and rejected if it\n\t * doesn't\n\t */\n\tcontains (key) {\n\t\treturn this.get (key).then ((keys) => {\n\t\t\tif (keys.includes (key)) {\n\t\t\t\tPromise.resolve ();\n\t\t\t} else {\n\t\t\t\treturn Promise.reject ();\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Upgrade a Space Version. Upgrades must be declared before the open ()\n\t * method is executed.\n\t *\n\t * @param {string} oldVersion - The version to be upgraded\n\t * @param {string} newVersion - The version to be upgraded to\n\t * @param {function} callback - Function to transform the old stored values to the new version's format\n\t * @returns {Promise}\n\t */\n\tupgrade (oldVersion, newVersion, callback) {\n\t\tthis.upgrades[`${parseInt (oldVersion.replace (/\\./g, ''))}::${parseInt (newVersion.replace (/\\./g, ''))}`] = callback;\n\t\treturn Promise.resolve ();\n\t}\n\n\t// This function acts as a helper for the upgrade progress by executing the\n\t// needed upgrade callbacks in the correct order and sychronously.\n\t_upgrade (upgradesToApply, resolve, event) {\n\t\t// Check if there are still upgrades to apply\n\t\tif (upgradesToApply.length > 0) {\n\t\t\tthis.upgrades[upgradesToApply[0]].call (this, this, event).then (() => {\n\t\t\t\tthis._upgrade (upgradesToApply.slice (1), resolve, event);\n\t\t\t}).catch ((e) => console.error (e));\n\t\t} else {\n\t\t\tresolve ();\n\t\t}\n\t}\n\n\t/**\n\t * Renaming the space is not possible with the IndexedDB adapter therefore\n\t * this function always gets a rejection.\n\t *\n\t * @returns {Promise} - Result of the rename operation\n\t */\n\trename () {\n\t\treturn Promise.reject ();\n\t}\n\n\t/**\n\t * Getting a key by its index is not possible in this adapter, therefore this\n\t * function always gets rejected.\n\t *\n\t * @return {Promise} - Promise Rejection\n\t */\n\tkey () {\n\t\treturn Promise.reject ();\n\t}\n\n\t/**\n\t * Return all keys stored in the space.\n\t *\n\t * @return {Promise<string[]>}  - Array of keys\n\t */\n\tkeys () {\n\t\treturn this.open ().then (() => {\n\t\t\treturn new Promise ((resolve, reject) => {\n\t\t\t\tconst transaction = this.storage.transaction (this.store, 'readwrite').objectStore (this.store);\n\t\t\t\tconst op = transaction.getAllKeys ();\n\t\t\t\top.addEventListener ('success', (event) => {resolve (event.target.result);}, false);\n\t\t\t\top.addEventListener ('error', (event) => {reject (event);}, false);\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Delete a value from the space given its key\n\t *\n\t * @param  {string} key - Key of the item to delete\n\t * @return {Promise<key, value>} - Resolves to the key and value of the deleted object\n\t */\n\tremove (key) {\n\t\treturn this.get (key).then ((value) => {\n\t\t\treturn new Promise ((resolve, reject) => {\n\t\t\t\tconst transaction = this.storage.transaction (this.store, 'readwrite').objectStore (this.store);\n\t\t\t\tconst op = transaction.delete (key);\n\t\t\t\top.addEventListener ('success', () => {resolve (value);}, false);\n\t\t\t\top.addEventListener ('error', (event) => {reject (event);}, false);\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Clear the entire space\n\t *\n\t * @return {Promise} - Result of the clear operation\n\t */\n\tclear () {\n\t\treturn this.open ().then (() => {\n\t\t\treturn new Promise ((resolve, reject) => {\n\t\t\t\tconst transaction = this.storage.transaction (this.store, 'readwrite').objectStore (this.store);\n\t\t\t\tconst op = transaction.clear ();\n\t\t\t\top.addEventListener ('success', () => {resolve ();}, false);\n\t\t\t\top.addEventListener ('error', (event) => {reject (event);}, false);\n\t\t\t});\n\t\t});\n\t}\n}","/**\n* ==============================\n* Remote Storage Adapter\n* ==============================\n*/\n\nimport { Request } from './../Request';\n\n/**\n * The Remote Storage Adapter provides the Space Class the ability to interact\n * with a server in order to handle data persistance. The server's implementation\n * is up to the developer but it will need to respond to this adapter's request\n * formatting. This adapter uses the Request class to perfom its tasks.\n *\n * @class\n */\nexport class RemoteStorage {\n\n\t/**\n\t * Create a new Remote Storage. This adapter requires an endpoint url where\n\t * it will make the requests. If a store is defined, the request will be made\n\t * using the store as an URL, for example, let's assume the following endpoint:\n\t *\n\t * https://example.com/api/v1/\n\t *\n\t * If no store is defined, then the requests will be made to that simple route,\n\t * with a store definition, requests will be made to:\n\t *\n\t *  https://example.com/api/v1/{myStore}/\n\t *\n\t * The key of each item in this store represents another part of the request\n\t *\n\t * https://example.com/api/v1/{key}/\n\t *\n\t * Or:\n\t *\n\t * https://example.com/api/v1/{myStore}/{key}/\n\t *\n\t * This adapter just as the IndexedDB, works with JSON objects instead of string or\n\t * numeric values.\n\t *\n\t * @constructor\n\t * @param {object} [configuration={name = '', version = '', store = '', endpoint = '', props = {}] - Configuration Object for the Adapter\n\t * @param {string} configuration.name - Name of the Space\n\t * @param {string} configuration.version - Version of the Space in Semantic versioning syntax\n\t * @param {string} configuration.store - Name of the Object Store to use\n\t * @param {string} configuration.endpoint - Endpoint URL where the requests will be made\n\t * @param {string} configuration.props - Properties object to use for the fetch requests\n\t */\n\tconstructor ({name = '', version = '', store = '', endpoint = '', props = {}}) {\n\t\tthis.name = name;\n\t\tthis.version = version;\n\t\tthis.store = store;\n\t\tthis.endpoint = `${endpoint}${store}/`;\n\t\tthis.props = props;\n\t}\n\n\t/**\n\t * Open the Storage Object\n\t *\n\t * @return {Promise<RemoteStorage>}\n\t */\n\topen () {\n\t\tif (typeof this.storage === 'undefined') {\n\t\t\tthis.storage = Request;\n\t\t}\n\t\treturn Promise.resolve (this);\n\t}\n\n\t/**\n\t * Store a key-value pair. This function sends a POST request to the server\n\t *\n\t * @param  {string} key - Key with which this value will be saved\n\t * @param  {Object} value - Value to save\n\t * @return {Promise<Response>}\n\t */\n\tset (key, value) {\n\t\treturn this.open ().then (() => {\n\t\t\treturn this.storage.post (this.endpoint + key, value, this.props).then ((response) => {\n\t\t\t\treturn Promise.resolve ({ key, response: response.json () });\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Update a key-value pair. In difference with the set () method, the update\n\t * method will use an Object.assign () in the case of objects so no value is\n\t * lost. This function sends a PUT request to the server.\n\t *\n\t * @param  {string} key - Key with which this value will be saved\n\t * @param  {Object} value - Value to save\n\t * @return {Promise<Object>}\n\t */\n\tupdate (key, value) {\n\t\treturn this.get (key).then ((currentValue) => {\n\t\t\treturn this.storage.put (this.endpoint + key, Object.assign ({}, currentValue, value), this.props).then ((response) => {\n\t\t\t\treturn Promise.resolve ({ key, response: response.json () });\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Retrieves a value from storage given it's key\n\t *\n\t * @param  {string} - Key with which the value was saved\n\t * @return {Promise<Object>} - Resolves to the retreived value or its rejected\n\t * if it doesn't exist\n\t */\n\tget (key) {\n\t\treturn this.open ().then (() => {\n\t\t\treturn this.storage.json (this.endpoint + key, {}, this.props);\n\t\t});\n\t}\n\n\t/**\n\t * Retrieves all the values in the space in a key-value JSON object\n\t *\n\t * @return {Promise<Object>} - Resolves to the retreived values\n\t */\n\tgetAll () {\n\t\treturn this.open ().then (() => {\n\t\t\treturn this.storage.json (this.endpoint, {}, this.props);\n\t\t});\n\t}\n\n\t/**\n\t * Check if a space contains a given key.\n\t *\n\t * @param  {string} key - Key to look for.\n\t * @return {Promise} Promise gets resolved if it exists and rejected if it\n\t * doesn't\n\t */\n\tcontains (key) {\n\t\treturn this.keys ().then ((keys) => {\n\t\t\tif (keys.includes (key)) {\n\t\t\t\tPromise.resolve ();\n\t\t\t} else {\n\t\t\t\treturn Promise.reject ();\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Upgrading the Storage must be done on the server side, therefore this function\n\t * always gets rejected.\n\t *\n\t * @returns {Promise}\n\t */\n\tupgrade () {\n\t\treturn Promise.reject ();\n\t}\n\n\t/**\n\t * Renaming the Storage must be done on the server side, therefore this function\n\t * always gets rejected.\n\t *\n\t * @returns {Promise}\n\t */\n\trename () {\n\t\treturn Promise.reject ();\n\t}\n\n\t/**\n\t * Getting a key by its index is not possible in this adapter, therefore this\n\t * function always gets rejected.\n\t *\n\t * @return {Promise} - Promise Rejection\n\t */\n\tkey () {\n\t\treturn Promise.reject ();\n\t}\n\n\t/**\n\t * Return all keys stored in the space. This makes a GET request to the full\n\t * endpoint (the URL of the endpoint and store name) with a keys query\n\t * parameter:\n\t *\n\t * https://example.com/api/v1/?keys=true\n \t *\n\t * Or:\n \t *\n \t * https://example.com/api/v1/{myStore}/?keys=true\n\t *\n\t * @return {Promise<string[]>} - Array of keys\n\t */\n\tkeys () {\n\t\treturn this.open ().then (() => {\n\t\t\treturn this.storage.json (this.endpoint, {keys: true}, this.props);\n\t\t});\n\t}\n\n\t/**\n\t * Delete a value from the space given it's key. This function sends a DELETE\n\t * request to the server.\n\t *\n\t * @param  {string} key - Key of the item to delete\n\t * @return {Promise<key, value>} - Resolves to the key and value of the deleted object\n\t */\n\tremove (key) {\n\t\treturn this.open ().then (() => {\n\t\t\treturn this.storage.delete (this.endpoint + key, {}, this.props).then ((response) => {\n\t\t\t\treturn Promise.resolve (key, response.json ());\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Clear the entire space. This function sends a DELETE request to the server.\n\t * The difference between a clear () and remove () operation is that the clear\n\t * operation does not uses a key in the URL where the request is made.\n\t *\n\t * @return {Promise} - Result of the clear operation\n\t */\n\tclear () {\n\t\treturn this.open ().then (() => {\n\t\t\treturn this.storage.delete (this.endpoint, {}, this.props);\n\t\t});\n\t}\n}","/**\n* ==============================\n* Text\n* ==============================\n*/\n\n/**\n * Provides utility functions for texts\n * @class\n */\nexport class Text {\n\n\t/**\n\t * @static capitalize - Capatalizes every word in a string\n\t *\n\t * @param  {string} text - Text string to capitalize\n\t * @return {string} - Capitalized string\n\t */\n\tstatic capitalize (text) {\n\t\treturn text.replace (/\\w\\S*/g, (txt) => {\n\t\t\treturn txt.charAt (0).toUpperCase () + txt.substr (1).toLowerCase ();\n\t\t});\n\t}\n\n\t/**\n\t * @static suffix - Gets the suffix of a string given a key\n\t *\n\t * @param  {string} key - Key part of the string\n\t * @param  {string} text - Full string to extract the suffix from\n\t * @return {string} - Suffix\n\t */\n\tstatic suffix (key, text) {\n\t\tlet suffix = '';\n\t\tlet position = text.indexOf (key);\n\t\tif (position !== -1) {\n\t\t\tposition += key.length;\n\t\t\tsuffix = text.substr (position, text.length - position);\n\t\t}\n\t\treturn suffix;\n\t}\n\n\n\t/**\n\t * @static selection - Get the currently selected text\n\t *\n\t * @return {string} - Text selection\n\t */\n\tstatic selection () {\n\t\tif (window.getSelection) {\n\t\t\treturn window.getSelection ().toString ();\n\t\t} else if (document.selection && document.selection.type != 'Control') {\n\t\t\treturn document.selection.createRange ().text;\n\t\t}\n\t}\n\n\t/**\n\t * @static prefix - Gets the prefix of a string given a key\n\t *\n\t * @param  {string} key - Key part of the string\n\t * @param  {string} text - Full string to extract the prefix from\n\t * @return {string} - Prefix\n\t */\n\tstatic prefix (key, text) {\n\t\tlet prefix = '';\n\t\tconst position = text.indexOf (key);\n\t\tif (position != -1) {\n\t\t\tprefix = text.substr (0, position);\n\t\t}\n\t\treturn prefix;\n\t}\n\n\t/**\n\t * @static friendly - Transforms a given text into a friendly URL string replacing all special characters\n\t *\n\t * @param  {string} text - The text to build the url from\n\t * @return {string} - Friendly URL\n\t */\n\tstatic friendly (text) {\n\t\tconst regex = [\n\t\t\t/[]/,\n\t\t\t/[]/,\n\t\t\t/[]/,\n\t\t\t/[]/,\n\t\t\t/[]/,\n\t\t\t/[]/,\n\t\t\t/[]/,\n\t\t\t/[]/,\n\t\t\t/[]/,\n\t\t\t/[]/,\n\t\t\t//,\n\t\t\t//,\n\t\t\t//,\n\t\t\t//,\n\t\t\t/_/,\n\t\t\t/[<>']/,\n\t\t\t/[\"]/,\n\t\t\t/[(){}[\\]]/,\n\t\t\t/[?!#$%&^*`~/|]/,\n\t\t\t/[,.:;]/,\n\t\t\t/ /\n\t\t];\n\n\t\tconst replacements = [\n\t\t\t'a',\n\t\t\t'A',\n\t\t\t'I',\n\t\t\t'i',\n\t\t\t'e',\n\t\t\t'E',\n\t\t\t'o',\n\t\t\t'O',\n\t\t\t'u',\n\t\t\t'U',\n\t\t\t'c',\n\t\t\t'C',\n\t\t\t'n',\n\t\t\t'N',\n\t\t\t'-',\n\t\t\t'',\n\t\t\t'',\n\t\t\t'',\n\t\t\t'',\n\t\t\t'',\n\t\t\t'-'\n\t\t];\n\n\t\tfor (const index in regex) {\n\t\t\ttext = text.replace(new RegExp(regex[index], 'g'), replacements[index]);\n\t\t}\n\n\t\treturn text;\n\t}\n}","/**\n* ==============================\n* Util\n* ==============================\n*/\n\n/**\n * Provides diverse utility functions\n * @class\n */\nexport class Util {\n\n\n\t/**\n\t * @static callAsync - Calls any function using promises to keep a standard\n\t * behavior between async and sync functions.\n\t *\n\t * @param  {funcion} callable - The function to run\n\t * @param  {Object} context - The object `this` will be mapped to\n\t * @param  {any} ...args - List of parameters to pass to the function when called\n\t * @return {Promise} - A promise that resolves to the result of the function\n\t */\n\tstatic callAsync (callable, context, ...args) {\n\t\ttry {\n\t\t\t// Call the provided function using the context and arguments given\n\t\t\tconst result = callable.apply (context, args);\n\n\t\t\t// Check if the function returned a simple value or a Promise\n\t\t\tif (result instanceof Promise) {\n\t\t\t\treturn result;\n\t\t\t} else {\n\t\t\t\treturn Promise.resolve (result);\n\t\t\t}\n\t\t} catch (e) {\n\t\t\treturn Promise.reject (e);\n\t\t}\n\t}\n\n\t/**\n\t * @static uuid - Creates a UUID. This UUIDs should not be trusted for uniqueness\n\t *\n\t * @return {string} - Generated UUID\n\t */\n\tstatic uuid () {\n\t\tif (window.crypto) {\n\t\t\treturn ([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g, (c) =>\n\t\t\t\t(c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString (16)\n\t\t\t);\n\t\t} else {\n\t\t\tconst generate = () => Math.floor ((1 + Math.random()) * 0x10000).toString (16).substring (1);\n\t\t\treturn generate () + generate () + '-' + generate () + '-' + generate () + '-' +\n\t\t\tgenerate () + '-' + generate () + generate () + generate ();\n\t\t}\n\t}\n}","import * as Artemis from './index';\n\nif (typeof window === 'object') {\n\twindow.Artemis = Artemis;\n}"],"names":["instance","Constructor","TypeError","$e5f9bd0c37e9914c$var$_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","$7dc24fd3d8e84af6$var$getPrototypeOf","o1","setPrototypeOf","getPrototypeOf","o","__proto__","$ac93fd2313270fd8$var$setPrototypeOf","p1","p","subClass","superClass","create","constructor","value","self","call","obj","Symbol","ReferenceError","$08b63c45f54847ee$export$2e2bcd8739ae039","iter","iterator","toString","Array","from","arr","isArray","$6e00726c30bb8aa8$export$2e2bcd8739ae039","$8664303016091545$export$2e2bcd8739ae039","$9e1e3aff84b72d71$export$2e2bcd8739ae039","arr2","$c0e5c3a46846db0d$export$2e2bcd8739ae039","$9a10eb5a4ae3d243$export$2e2bcd8739ae039","$d2a278e67fb08434$export$81abf30fb640fb72","NONE","ERROR","WARNING","INFO","DEBUG","ALL","$d2a278e67fb08434$export$153e5dc2c098b35c","level","this","_level","_len","arguments","args","_key","_console","console","log","apply","$44ff19cc49d55455$export$2e2bcd8739ae039","debug","info","error","warn","table","group","groupCollapsed","groupEnd","time","timeLog","timeEnd","trace","$3fab6865b6178520$export$cb0933279c36a66b","selector","collection","document","querySelectorAll","_selector","NodeList","HTMLElement","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","next","done","style","display","err","return","param","newClass","classList","add","oldClass","remove","_iteratorNormalCompletion1","_didIteratorError1","_iteratorError1","_step1","_iterator1","element1","item","classes","split","element","j","toggle","classToCheck","contains","focus","callback","addEventListener","event","e","targetElement","$3fab6865b6178520$export$9f78c0aed981ffc4","closestParent","_this1","exists","get","_loop","querySelector","name","dataset","textContent","innerHTML","div","createElement","trim","appendChild","firstChild","childNodes","insertBefore","index","offsetWidth","offsetHeight","parentElement","rect","getBoundingClientRect","top","body","scrollTop","left","scrollLeft","found","matches","search","find","parent","limit","attribute","setAttribute","getAttribute","hasAttribute","content","insertAdjacentHTML","properties","property","start","Date","getTime","_this","timer","initialValue","setInterval","step","Math","min","clearInterval","opacity","last","tick","window","requestAnimationFrame","setTimeout","check","Element","polyfill","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","indexOf","parentNode","removeChild","newElement","replaceElement","replaceChild","reset","$3fab6865b6178520$export$d38ce6288df3a87","$1a6e0c9874f8b913$export$7fa6c5b6f8193917","data","keys","map","encodeURIComponent","join","url","param1","options","query","serialize","concat","fetch","formData","headers","contentType","FormData","append","JSON","stringify","assign","method","post","param2","then","response","json","param3","blob","$746ebe5d2ad50d2d$export$2171dcd146fbfd71","type","file","read","Promise","resolve","reject","reader","FileReader","onload","result","onerror","readAsDataURL","readAsArrayBuffer","readAsText","File","pop","extension","toLowerCase","$bb99f1e63cf03ec6$export$a7fed597f4b8afd8","field","each","files","$4acf49f6c3e67aec$var$cachedSetTimeout","$4acf49f6c3e67aec$var$cachedClearTimeout","$4acf49f6c3e67aec$var$process","$4acf49f6c3e67aec$exports","$4acf49f6c3e67aec$var$defaultSetTimout","Error","$4acf49f6c3e67aec$var$defaultClearTimeout","$4acf49f6c3e67aec$var$runTimeout","fun","clearTimeout","e1","$4acf49f6c3e67aec$var$currentQueue","$4acf49f6c3e67aec$var$queue","$4acf49f6c3e67aec$var$draining","$4acf49f6c3e67aec$var$queueIndex","$4acf49f6c3e67aec$var$cleanUpNextTick","$4acf49f6c3e67aec$var$drainQueue","timeout","len","run","marker","$4acf49f6c3e67aec$var$runClearTimeout","$4acf49f6c3e67aec$var$Item","array","$4acf49f6c3e67aec$var$noop","nextTick","push","title","browser","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","$d694e30d95983d6c$export$2dffd0b5373a4389","devicePixelRatio","orientation","portrait","process","electron","navigator","userAgent","cordova","match","platform","includes","test","location","protocol","$dab38ae325a5ea02$export$62ec7f5fcda483d7","route","image","Image","src","$8ce56367038e8033$export$19fffca37ef3e106","_name","_version","_store","store","upgrades","numericVersion","parseInt","replace","id","storage","upgradesToApply","_this3","versionless","storedVersions","localStorage","filter","sort","oldVersion","oldVersionNumeric","availableUpgrades","startFrom","findIndex","u","old","$d8de0eb6e0dd5f0d$export$2e2bcd8739ae039","slice","ref","_this2","previousId","key1","previous","getItem","setItem","removeItem","_upgrade","_this4","open","currentValue","catch","_this5","set","_this6","parse","exception","values","promises","all","newVersion","oldId","full","_this9","_this8","$739cee499892a734$export$b6d43d6c0d353d8f","LocalStorage","SessionStorage","$66517420798f816f$export$2c4b17e1c2e0931","sessionStorage","IndexedDB","$25027adeb319e92b$export$c4e63223f1bd3b44","_props","_index","keyPath","IDBDatabase","indexedDB","onsuccess","onupgradeneeded","createObjectStore","createIndex","transaction","op","objectStore","temp","put","_this7","getAll","results","forEach","_this10","getAllKeys","_this11","delete","_this12","clear","RemoteStorage","$23aa46478b35741b$export$d10aa05a737e1e30","_endpoint","endpoint","$739cee499892a734$export$eef1e68107c58ef2","adapter","configuration","_configuration","callbacks","update","transformations","object","value1","key2","value2","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","upgrade","rename","$e79cefa41217e584$export$5f1af8db9871e1d6","text","txt","charAt","toUpperCase","substr","suffix1","position","getSelection","selection","createRange","prefix1","regex","replacements","RegExp","$6dd34ff2c499496e$export$f8f26dd395d7e1bd","callable","context","crypto","c","getRandomValues","Uint8Array","generate","floor","random","substring","Artemis","$2f70730b9acc4592$exports"],"version":3,"file":"artemis.min.js.map"}