var M;((Z)=>{Z[Z.NONE=0]="NONE";Z[Z.ERROR=1]="ERROR";Z[Z.WARNING=2]="WARNING";Z[Z.INFO=3]="INFO";Z[Z.DEBUG=4]="DEBUG";Z[Z.ALL=5]="ALL"})(M||={});class T{static _level=0;static level(z){if(typeof z==="number")this._level=z;return this._level}static log(...z){if(this.level()>=4)console.log(...z)}static debug(...z){if(this.level()>=4)console.debug(...z)}static info(...z){if(this.level()>=3)console.info(...z)}static error(...z){if(this.level()>=1)console.error(...z)}static warning(...z){if(this.level()>=2)console.warn(...z)}static table(...z){if(this.level()>=4)console.table(...z)}static group(...z){if(this.level()>=4)console.group(...z)}static groupCollapsed(...z){if(this.level()>=4)console.groupCollapsed(...z)}static groupEnd(){if(this.level()>=4)console.groupEnd()}static time(z){if(this.level()>=4)console.time(z)}static timeLog(z,...H){if(this.level()>=4)console.timeLog(z,...H)}static timeEnd(z){if(this.level()>=4)console.timeEnd(z)}static trace(...z){if(this.level()>=4)console.trace(...z)}}class ${collection;length;_selector;constructor(z){if(z===null){this.collection=[],this.length=0,this._selector=null;return}if(typeof z==="string")this.collection=document.querySelectorAll(z),this.length=this.collection.length,this._selector=z;else if(z instanceof NodeList)this.collection=z,this.length=z.length,this._selector=z;else if(z instanceof $)this.collection=z.collection,this.length=this.collection.length,this._selector=z._selector;else if(z instanceof HTMLElement)this.collection=[z],this.length=this.collection.length,this._selector=z;else if(Array.isArray(z))this.collection=z,this.length=z.length,this._selector=z;else this.collection=[],this.length=0,this._selector=null}hide(){for(let z of this.collection)z.style.display="none";return this}show(z="block"){for(let H of this.collection)H.style.display=z;return this}addClass(z){for(let H of this.collection)H.classList.add(z);return this}removeClass(z=null){if(z!==null)for(let H of this.collection)H.classList.remove(z);else for(let H of this.collection)while(H.classList.length>0){let Q=H.classList.item(0);if(Q)H.classList.remove(Q)}return this}toggleClass(z){let H=z.split(" ");for(let Q of this.collection)for(let X of H)Q.classList.toggle(X);return this}hasClass(z){for(let H of this.collection)if(!H.classList.contains(z))return!1;return!0}value(z){if(typeof z<"u"){for(let H of this.collection)H.value=z;return this}else{if(this.length===0)return;if(this.length===1)return this.collection[0].value;let H=[];for(let Q of this.collection)H.push(Q.value);return H}}focus(){if(this.length>0)this.collection[0].focus();return this}click(z){for(let H of this.collection)H.addEventListener("click",z,!1);return this}keyup(z){for(let H of this.collection)H.addEventListener("keyup",z,!1);return this}keydown(z){for(let H of this.collection)H.addEventListener("keydown",z,!1);return this}submit(z){for(let H of this.collection)H.addEventListener("submit",z,!1);return this}change(z){for(let H of this.collection)H.addEventListener("change",z,!1);return this}scroll(z){for(let H of this.collection)H.addEventListener("scroll",z,!1);return this}on(z,H,Q){let X=z.split(" ");for(let Y of this.collection)for(let J of X)if(typeof H==="function")Y.addEventListener(J,H,!1);else if(typeof H==="string"&&typeof Q==="function")Y.addEventListener(J,(Z)=>{if(!Z.target)return;let _=new $(Z.target).closestParent(H,this._selector);if(_.exists())Q.call(_.get(0),Z)},!1);return this}filter(z){let H=[];for(let Q of this.collection)if(Q.matches(z))H.push(Q);return new $(H.length>0?H:null)}exists(){return this.length>0}data(z,H){if(typeof H<"u"){for(let Q of this.collection)Q.dataset[z]=H;return this}else{if(this.length===0)return;if(this.length===1)return this.collection[0].dataset[z];let Q=[];for(let X of this.collection)Q.push(X.dataset[z]);return Q}}removeData(z){for(let H of this.collection)delete H.dataset[z];return this}text(z){if(typeof z<"u"){for(let H of this.collection)H.textContent=z;return this}else{if(this.length===0)return;if(this.length===1)return this.collection[0].textContent;let H=[];for(let Q of this.collection)H.push(Q.textContent);return H}}html(z){if(typeof z<"u"){for(let H of this.collection)H.innerHTML=z;return this}else{if(this.length===0)return;if(this.length===1)return this.collection[0].innerHTML;let H=[];for(let Q of this.collection)H.push(Q.innerHTML);return H}}append(z){for(let H of this.collection)if(typeof z==="string"){let Q=document.createElement("div");if(Q.innerHTML=z.trim(),Q.firstChild)H.appendChild(Q.firstChild.cloneNode(!0))}else H.appendChild(z.cloneNode(!0));return this}prepend(z){for(let H of this.collection)if(typeof z==="string"){let Q=document.createElement("div");if(Q.innerHTML=z.trim(),Q.firstChild)if(H.childNodes.length>0)H.insertBefore(Q.firstChild.cloneNode(!0),H.childNodes[0]);else H.appendChild(Q.firstChild.cloneNode(!0))}else if(H.childNodes.length>0)H.insertBefore(z.cloneNode(!0),H.childNodes[0]);else H.appendChild(z.cloneNode(!0));return this}each(z){for(let H of this.collection)z(H);return this}get(z){return this.collection[z]}first(){if(this.length>0)return new $(this.collection[0]);return new $(null)}last(){if(this.length>0)return new $(this.collection[this.collection.length-1]);return new $(null)}isVisible(){for(let z of this.collection){let H=z;if(H.style.display!=="none"&&H.offsetWidth>0&&H.offsetHeight>0)return!0}return!1}parent(){let z=[];for(let H of this.collection)if(H.parentElement&&!z.includes(H.parentElement))z.push(H.parentElement);return new $(z.length>0?z:null)}find(z){let H=[];for(let Q of this.collection){let X=Q.querySelectorAll(z);for(let Y of X)if(!H.includes(Y))H.push(Y)}return new $(H.length>0?H:null)}offset(){if(this.length===0)return;if(this.length===1){let H=this.collection[0].getBoundingClientRect();return{top:H.top+document.body.scrollTop,left:H.left+document.body.scrollLeft}}let z=[];for(let H of this.collection){let Q=H.getBoundingClientRect();z.push({top:Q.top+document.body.scrollTop,left:Q.left+document.body.scrollLeft})}return z}closest(z){let H=[];for(let Q of this.collection){let X=Q.closest(z);if(X&&!H.includes(X))H.push(X)}return new $(H.length>0?H:null)}closestParent(z,H){if(this.length===0)return new $(null);let Q=this.collection[0];while(Q){if(Q.matches(z))return new $(Q);if(typeof H==="string"&&Q.matches(H))break;Q=Q.parentElement}return new $(null)}attribute(z,H){if(typeof H<"u"){for(let Q of this.collection)Q.setAttribute(z,String(H));return this}else{if(this.length===0)return;if(this.length===1)return this.collection[0].getAttribute(z);let Q=[];for(let X of this.collection)Q.push(X.getAttribute(z));return Q}}hasAttribute(z){for(let H of this.collection)if(!H.hasAttribute(z))return!1;return!0}after(z){for(let H of this.collection)H.insertAdjacentHTML("afterend",z);return this}before(z){for(let H of this.collection)H.insertAdjacentHTML("beforebegin",z);return this}style(z,H){if(typeof z==="string"&&typeof H>"u"){if(this.length===0)return;if(this.length===1)return this.collection[0].style.getPropertyValue(z);let Q=[];for(let X of this.collection)Q.push(X.style.getPropertyValue(z));return Q}for(let Q of this.collection){let X=Q;if(typeof z==="string"&&typeof H<"u")X.style.setProperty(z,H);else if(typeof z==="object")for(let Y in z)X.style.setProperty(Y,String(z[Y]))}return this}animate(z,H){for(let Q=0;Q<this.collection.length;Q++){let X=this.collection[Q];for(let Y in z){let J=Date.now(),Z;if(typeof X.style.getPropertyValue(Y)<"u"&&X.style.getPropertyValue(Y)!==""){Z=parseFloat(X.style.getPropertyValue(Y));let K=setInterval(()=>{let _=Math.min(1,(Date.now()-J)/H);if(X.style.setProperty(Y,String(Z+_*(z[Y]-Z))),_===1)clearInterval(K)},25);X.style.setProperty(Y,String(Z))}else if(typeof X[Y]<"u"){Z=X[Y];let K=setInterval(()=>{let _=Math.min(1,(Date.now()-J)/H);if(X[Y]=Z+_*(z[Y]-Z),_===1)clearInterval(K)},25);X[Y]=Z}}}return this}fadeIn(z=400,H){let Q=0,X=this.collection.length;for(let Y of this.collection){let J=Y;J.style.opacity="0";let Z=Date.now(),K=()=>{if(J.style.opacity=String(parseFloat(J.style.opacity)+(Date.now()-Z)/z),Z=Date.now(),parseFloat(J.style.opacity)<1)requestAnimationFrame(K);else if(Q++,Q===X&&typeof H==="function")H()};K()}return this}fadeOut(z=400,H){let Q=0,X=this.collection.length;for(let Y of this.collection){let J=Y,Z=Date.now(),K=()=>{if(J.style.opacity=String(parseFloat(J.style.opacity)-(Date.now()-Z)/z),Z=Date.now(),parseFloat(J.style.opacity)>0)requestAnimationFrame(K);else if(Q++,Q===X&&typeof H==="function")H()};K()}return this}matches(z){if(this.length===0)return!1;for(let H of this.collection)if(!H.matches(z))return!1;return!0}remove(){for(let z of this.collection)z.parentNode?.removeChild(z);return this}replaceWith(z){for(let H of this.collection){let Q;if(typeof z==="string"){let X=document.createElement("div");X.innerHTML=z,Q=X.firstChild}else Q=z.cloneNode(!0);H.parentElement?.replaceChild(Q,H)}return this}reset(){for(let z of this.collection)if(z.reset)z.reset();return this}property(z,H){if(typeof H<"u"){for(let Q of this.collection)Q[z]=H;return this}else{if(this.length===0)return;if(this.length===1)return this.collection[0][z];let Q=[];for(let X of this.collection)Q.push(X[z]);return Q}}}function A(z){return new $(z)}function D(z){window.addEventListener("load",z)}class G{static serialize(z){return Object.keys(z).map((H)=>{return encodeURIComponent(H)+"="+encodeURIComponent(String(z[H]))}).join("&")}static get(z,H={},Q={}){let X=G.serialize(H);if(X!=="")z=`${z}?${X}`;return fetch(z,Q)}static post(z,H,Q={}){let X,Y=Q.headers?.["Content-Type"];if(Y!==void 0)if(Y==="multipart/form-data"){X=new FormData;for(let K in H)X.append(K,String(H[K]))}else if(Y==="application/json")X=JSON.stringify(H);else X=G.serialize(H);else X=G.serialize(H);let J={"Content-Type":"application/x-www-form-urlencoded",...Q.headers};if(J["Content-Type"]==="multipart/form-data")delete J["Content-Type"];let Z={...Q,method:"POST",headers:J,body:X};return fetch(z,Z)}static put(z,H,Q={}){return G.post(z,H,Object.assign({},{method:"PUT"},Q))}static delete(z,H,Q={}){return G.get(z,H,Object.assign({},{method:"DELETE"},Q))}static json(z,H={},Q={}){return G.get(z,H,Q).then((X)=>{return X.json()})}static blob(z,H={},Q={}){return G.get(z,H,Q).then((X)=>{return X.blob()})}}class w{static readRemote(z,H="base64",Q={}){return G.blob(z,{},Q).then((X)=>{return w.read(X,H)})}static read(z,H="text"){return new Promise((Q,X)=>{let Y=new FileReader;if(Y.onload=(J)=>{Q({event:J,content:J.target?.result??null})},Y.onerror=(J)=>{X(J)},H==="base64")Y.readAsDataURL(z);else if(H==="buffer")Y.readAsArrayBuffer(z);else Y.readAsText(z,"UTF-8")})}static create(z,H,Q="text/plain"){return Promise.resolve(new File([H],z,{type:Q}))}static extension(z){return z.split(".").pop()??""}static isImage(z){return["jpg","jpeg","png","gif","svg","webp","bmp"].indexOf(w.extension(z).toLowerCase())>-1}}class q{static fill(z,H){for(let Q in H){let X=A(`form[data-form='${z}'] [name='${Q}']`).get(0);if(typeof X<"u")switch(X.type){case"file":case"file[]":break;default:X.value=H[Q];break}}}static values(z){let H={};return A(`form[data-form='${z}'] [name]`).each((Q)=>{let X=Q,Y;switch(X.type){case"file[]":Y=X.files??void 0;break;case"file":Y=X.files?.[0];break;default:Y=X.value;break}if(typeof Y<"u"&&Y!==null)H[X.name]=Y}),H}}class C{static retina(){return window.devicePixelRatio>=2}static portrait(){return window.screen.orientation.type==="portrait-primary"||window.screen.orientation.type==="portrait-secondary"}static landscape(){return window.screen.orientation.type==="landscape-primary"||window.screen.orientation.type==="landscape-secondary"}static orientation(){return C.portrait()?"portrait":"landscape"}static electron(){let z=window;if(typeof z<"u"&&typeof z.process==="object"&&z.process?.type==="renderer")return!0;let H=typeof globalThis<"u"?globalThis.process:void 0;if(H&&typeof H.versions==="object"&&!!H.versions?.electron)return!0;if(typeof navigator==="object"&&typeof navigator.userAgent==="string"&&navigator.userAgent.indexOf("Electron")>=0)return!0;return!1}static cordova(){return!!window.cordova}static getPlatformString(){if(navigator.userAgentData?.platform)return navigator.userAgentData.platform;let z=navigator.userAgent;if(z.includes("Win"))return"Windows";if(z.includes("Mac"))return"macOS";if(z.includes("Linux"))return"Linux";if(z.includes("FreeBSD"))return"FreeBSD";if(z.includes("WebTV"))return"webOS";return""}static desktop(z="Any"){let H=C.getPlatformString();switch(z){case"Windows":return H==="Windows"||H.includes("Win");case"macOS":return H==="macOS"||H.includes("Mac");case"Linux":return H==="Linux"||H.includes("Linux");case"FreeBSD":return H==="FreeBSD"||H.includes("FreeBSD");case"webOS":return H==="webOS"||H.includes("WebTV");case"Any":default:return["Windows","macOS","Linux","FreeBSD","webOS"].some((Q)=>H===Q||H.includes(Q.replace("macOS","Mac").replace("webOS","WebTV")))}}static mobile(z="Any"){if(navigator.userAgentData?.mobile!==void 0&&z==="Any")return navigator.userAgentData.mobile;let H=navigator.userAgent;switch(z){case"Android":return/Android/i.test(H);case"iOS":return/iPhone|iPad|iPod/i.test(H);case"Opera":return/Opera Mini/i.test(H);case"Windows":return/Windows Phone|IEMobile|WPDesktop/i.test(H);case"BlackBerry":return/BlackBerry|BB10/i.test(H);case"Any":default:return/Android|iPhone|iPad|iPod|Windows Phone|IEMobile|WPDesktop|BlackBerry|BB10/i.test(H)}}static serviceWorkers(){if(typeof navigator<"u"){if("serviceWorker"in navigator&&location.protocol.indexOf("http")>-1)return!0}return!1}}class R{static image(z){return new Promise((H,Q)=>{let X=new Image;X.onload=()=>{H(X)},X.onerror=(Y)=>{Q(Y)},X.src=z})}static file(z){return G.blob(z)}}class I{name;version;store;id;numericVersion;upgrades;storage;constructor({name:z="",version:H="",store:Q=""}){if(this.name=z,this.version=H,this.store=Q,this.upgrades={},this.version==="")this.numericVersion=0;else this.numericVersion=parseInt(H.replace(/\./g,""));if(z!==""&&H!==""&&Q!=="")this.id=`${this.name}::${this.store}::${this.version}_`;else if(z!==""&&H!=="")this.id=`${this.name}::${this.version}_`;else if(z!=="")this.id=`${this.name}::_`;else this.id=""}configuration(z){if(z.name)this.name=z.name;if(z.version)this.version=z.version;if(z.store)this.store=z.store}open(){if(this.storage instanceof Storage)return Promise.resolve(this);else if(this.storage instanceof Promise)return this.storage;else{let z=new Promise((H)=>{let Q=[];if(this.version!==""){let X="";if(this.name!==""&&this.version!==""&&this.store!=="")X=`${this.name}::${this.store}::`;else if(this.name!==""&&this.version!=="")X=`${this.name}::`;let Y=Object.keys(window.localStorage).filter((J)=>{return J.indexOf(X)===0}).map((J)=>{return J.replace(X,"").split("_")[0]}).filter((J)=>{return J.indexOf("::")===-1}).sort();if(Y.length>0){let J=Y[0],Z=parseInt(J.replace(/\./g,""));if(Z<this.numericVersion){let K=Object.keys(this.upgrades).sort(),_=K.findIndex((W)=>{let[N]=W.split("::");return parseInt(N)===Z});if(_>-1)Q=K.slice(_).filter((W)=>{let[N,L]=W.split("::");return parseInt(N)<this.numericVersion&&parseInt(L)<=this.numericVersion});let B=`${this.name}::${J}_`;if(this.name!==""&&this.version!==""&&this.store!=="")B=`${this.name}::${this.store}::${J}_`;else if(this.name!==""&&this.version!=="")B=`${this.name}::${J}_`;let F=Object.keys(window.localStorage).filter((W)=>{return W.indexOf(B)===0}).map((W)=>{return W.replace(B,"")});for(let W of F){let N=window.localStorage.getItem(`${B}${W}`);if(N!==null)window.localStorage.setItem(this.id+W,N);window.localStorage.removeItem(`${B}${W}`)}}}}H({upgrades:Q})}).then(({upgrades:H})=>{return this.storage=window.localStorage,new Promise((Q)=>{let X=()=>Q(this);this._upgrade(H,X)})});return this.storage=z,z}}set(z,H){return this.open().then(()=>{if(typeof H==="object")this.storage.setItem(this.id+z,JSON.stringify(H));else this.storage.setItem(this.id+z,String(H));return Promise.resolve({key:z,value:H})})}update(z,H){return this.get(z).then((Q)=>{if(typeof Q==="object"&&Q!==null){if(typeof H==="object"&&H!==null)H=Object.assign({},Q,H);this.storage.setItem(this.id+z,JSON.stringify(H))}else this.storage.setItem(this.id+z,String(H));return Promise.resolve({key:z,value:H})}).catch(()=>{return this.set(z,H)})}get(z){return this.open().then(()=>{return new Promise((H,Q)=>{let X=this.storage.getItem(this.id+z);try{let Y=JSON.parse(X);if(Y&&typeof Y==="object")X=Y}catch{}if(typeof X<"u"&&X!==null)H(X);else Q()})})}getAll(){return this.keys().then((z)=>{let H={},Q=[];for(let X of z)Q.push(this.get(X).then((Y)=>{H[X]=Y}));return Promise.all(Q).then(()=>H)})}contains(z){return this.keys().then((H)=>{if(H.includes(z))return Promise.resolve();else return Promise.reject()})}upgrade(z,H,Q){let X=`${parseInt(z.replace(/\./g,""))}::${parseInt(H.replace(/\./g,""))}`;return this.upgrades[X]=Q,Promise.resolve()}_upgrade(z,H){if(z.length>0)this.upgrades[z[0]].call(this,this).then(()=>{this._upgrade(z.slice(1),H)}).catch((Q)=>console.error(Q));else H()}rename(z){if(this.name!==z)return this.keys().then((H)=>{let Q=this.id;if(this.name=z,this.name!==""&&this.version!==""&&this.store!=="")this.id=`${this.name}::${this.store}::${this.version}_`;else if(this.name!==""&&this.version!=="")this.id=`${this.name}::${this.version}_`;else if(this.name!=="")this.id=`${this.name}::_`;else this.id="";let X=[];for(let Y of H){let J=this.storage.getItem(`${Q}${Y}`);if(J!==null)X.push(this.set(Y,J).then(()=>{this.storage.removeItem(`${Q}${Y}`)}))}return Promise.all(X).then(()=>{})});else return Promise.reject()}key(z,H=!1){return this.open().then(()=>{let Q=this.storage.key(z);if(H===!0)return Promise.resolve(Q??"");else return Promise.resolve((Q??"").replace(this.id,""))})}keys(z=!1){return this.open().then(()=>{return Promise.resolve(Object.keys(this.storage).filter((H)=>{return H.indexOf(this.id)===0}).map((H)=>{if(z===!0)return H;else return H.replace(this.id,"")}))})}remove(z){return this.get(z).then((H)=>{return this.storage.removeItem(this.id+z),Promise.resolve(H)})}clear(){return this.keys().then((z)=>{for(let H of z)this.remove(H);return Promise.resolve()})}}class P extends I{constructor({name:z="",version:H="",store:Q=""}){super({name:z,version:H,store:Q})}open(){if(typeof this.storage>"u")this.storage=window.sessionStorage;return Promise.resolve(this)}}class U{name;version;store;props;index;keyPath;numericVersion;upgrades;storage;constructor({name:z="",version:H="",store:Q="",props:X={},index:Y={}}){if(this.name=z,this.version=H,this.store=Q,this.props=X||{},this.index=Y,this.keyPath=X?.keyPath||"id",this.upgrades={},this.version==="")this.numericVersion=0;else this.numericVersion=parseInt(H.replace(/\./g,""))}configuration(z){if(z.name)this.name=z.name;if(z.version)this.version=z.version;if(z.store)this.store=z.store}open(){if(this.name==="")return console.error("No name has been defined for IndexedDB space."),Promise.reject();if(this.store==="")return console.error("No store has been defined for IndexedDB space."),Promise.reject();if(this.storage instanceof IDBDatabase)return Promise.resolve(this);else if(this.storage instanceof Promise)return this.storage;else{let z,H=new Promise((Q,X)=>{let Y=[],J=window.indexedDB.open(this.name,this.numericVersion);J.onerror=(Z)=>{X(Z)},J.onsuccess=(Z)=>{Q({storage:Z.target.result,upgrades:Y})},J.onupgradeneeded=(Z)=>{z=Z;let K=Z.target.result;if(Z.oldVersion<1){let B=K.createObjectStore(this.store,this.props);for(let F of Object.keys(this.index)){let W=this.index[F];B.createIndex(W.name,W.field,W.props)}}else{let B=Object.keys(this.upgrades).sort(),F=B.findIndex((W)=>{let[N]=W.split("::");return parseInt(N)===Z.oldVersion});if(F>-1)Y=B.slice(F).filter((W)=>{let[N,L]=W.split("::");return parseInt(N)<this.numericVersion&&parseInt(L)<=this.numericVersion})}let _=Z.target.transaction;if(_)_.addEventListener("complete",()=>{Q({storage:K,upgrades:Y})})}}).then(({storage:Q,upgrades:X})=>{return this.storage=Q,new Promise((Y)=>{let J=()=>Y(this);this._upgrade(X,J,z)})});return this.storage=H,H}}set(z=null,H){return this.open().then(()=>{return new Promise((Q,X)=>{let Y=this.storage.transaction(this.store,"readwrite").objectStore(this.store),J;if(z!==null){let Z={};Z[this.keyPath]=z,J=Y.put(Object.assign({},Z,H))}else J=Y.add(H);J.addEventListener("success",(Z)=>{Q({key:String(Z.target.result),value:H})}),J.addEventListener("error",(Z)=>{X(Z)})})})}update(z,H){return this.get(z).then((Q)=>{if(typeof Q>"u")return this.set(z,H);return new Promise((X,Y)=>{let Z=this.storage.transaction(this.store,"readwrite").objectStore(this.store).put(Object.assign({},Q,H));Z.addEventListener("success",(K)=>{X({key:String(K.target.result),value:H})}),Z.addEventListener("error",(K)=>{Y(K)})})})}get(z){return this.open().then(()=>{return new Promise((H,Q)=>{let Y=this.storage.transaction(this.store).objectStore(this.store).get(z);Y.addEventListener("success",(J)=>{let Z=J.target.result;if(typeof Z<"u"&&Z!==null)H(Z);else Q()}),Y.addEventListener("error",(J)=>{Q(J)})})})}getAll(){return this.open().then(()=>{return new Promise((z,H)=>{let X=this.storage.transaction(this.store).objectStore(this.store).getAll();X.addEventListener("success",(Y)=>{let J={};Y.target.result.forEach((K)=>{let _=K[this.keyPath];delete K[this.keyPath],J[_]=K}),z(J)}),X.addEventListener("error",(Y)=>{H(Y)})})})}contains(z){return this.get(z).then(()=>{return Promise.resolve()})}upgrade(z,H,Q){let X=`${parseInt(z.replace(/\./g,""))}::${parseInt(H.replace(/\./g,""))}`;return this.upgrades[X]=Q,Promise.resolve()}_upgrade(z,H,Q){if(z.length>0)this.upgrades[z[0]].call(this,this,Q).then(()=>{this._upgrade(z.slice(1),H,Q)}).catch((X)=>console.error(X));else H()}rename(){return Promise.reject()}key(){return Promise.reject()}keys(){return this.open().then(()=>{return new Promise((z,H)=>{let X=this.storage.transaction(this.store,"readwrite").objectStore(this.store).getAllKeys();X.addEventListener("success",(Y)=>{z(Y.target.result.map(String))},!1),X.addEventListener("error",(Y)=>{H(Y)},!1)})})}remove(z){return this.get(z).then((H)=>{return new Promise((Q,X)=>{let J=this.storage.transaction(this.store,"readwrite").objectStore(this.store).delete(z);J.addEventListener("success",()=>{Q(H)},!1),J.addEventListener("error",(Z)=>{X(Z)},!1)})})}clear(){return this.open().then(()=>{return new Promise((z,H)=>{let X=this.storage.transaction(this.store,"readwrite").objectStore(this.store).clear();X.addEventListener("success",()=>{z()},!1),X.addEventListener("error",(Y)=>{H(Y)},!1)})})}}class E{name;version;store;endpoint;props;storage;constructor({name:z="",version:H="",store:Q="",endpoint:X="",props:Y={}}){this.name=z,this.version=H,this.store=Q,this.endpoint=`${X}${Q}/`,this.props=Y}configuration(z){if(z.name)this.name=z.name;if(z.version)this.version=z.version;if(z.store)this.store=z.store}open(){if(typeof this.storage>"u")this.storage=G;return Promise.resolve(this)}set(z,H){return this.open().then(()=>{return this.storage.post(this.endpoint+z,H,this.props).then((Q)=>{return Promise.resolve({key:z,value:Q.json()})})})}update(z,H){return this.get(z).then((Q)=>{let X=Object.assign({},Q,H);return this.storage.put(this.endpoint+z,X,this.props).then((Y)=>{return Promise.resolve({key:z,value:Y.json()})})})}get(z){return this.open().then(()=>{return this.storage.json(this.endpoint+z,{},this.props)})}getAll(){return this.open().then(()=>{return this.storage.json(this.endpoint,{},this.props)})}contains(z){return this.keys().then((H)=>{if(H.includes(z))return Promise.resolve();else return Promise.reject()})}upgrade(){return Promise.reject()}rename(){return Promise.reject()}key(){return Promise.reject()}keys(){return this.open().then(()=>{return this.storage.json(this.endpoint,{keys:!0},this.props)})}remove(z){return this.open().then(()=>{return this.storage.delete(this.endpoint+z,{},this.props).then((H)=>{return H.json()})})}clear(){return this.open().then(()=>{return this.storage.delete(this.endpoint,{},this.props).then(()=>{})})}}var O={LocalStorage:I,SessionStorage:P,IndexedDB:U,RemoteStorage:E};class j{_configuration;adapter;callbacks;transformations;constructor(z=O.LocalStorage,H={}){this._configuration=Object.assign({},{name:"",version:"",store:""},H),this.adapter=new z(this._configuration),this.callbacks={create:[],update:[],delete:[]},this.transformations={}}configuration(z=null){if(z!==null){if(this._configuration=Object.assign({},this._configuration,z),this.adapter.configuration)this.adapter.configuration(z)}else return this._configuration}open(){return this.adapter.open().then(()=>{return Promise.resolve(this)})}set(z,H){for(let Q of Object.keys(this.transformations))if(typeof this.transformations[Q].set==="function")H=this.transformations[Q].set(z,H);return this.adapter.set(z,H).then(({key:Q,value:X})=>{for(let Y of this.callbacks.create)Y.call(null,Q,X);return Promise.resolve({key:Q,value:X})})}update(z,H){for(let Q of Object.keys(this.transformations))if(typeof this.transformations[Q].set==="function")H=this.transformations[Q].set(z,H);return this.adapter.update(z,H).then(({key:Q,value:X})=>{for(let Y of this.callbacks.update)Y.call(null,Q,X);return Promise.resolve({key:Q,value:X})})}get(z){return this.adapter.get(z).then((H)=>{for(let Q of Object.keys(this.transformations))if(typeof this.transformations[Q].get==="function")H=this.transformations[Q].get(z,H);return H})}getAll(){return this.adapter.getAll().then((z)=>{for(let H of Object.keys(z))for(let Q of Object.keys(this.transformations))if(typeof this.transformations[Q].get==="function")z[H]=this.transformations[Q].get(H,z[H]);return z})}each(z){return this.getAll().then((H)=>{let Q=[];for(let X of Object.keys(H))Q.push(z.call(this,X,H[X]));return Promise.all(Q)})}contains(z){return this.adapter.contains(z)}upgrade(z,H,Q){return this.adapter.upgrade(z,H,Q).then(()=>{return Promise.resolve(this)})}rename(z){return this.adapter.rename(z)}onCreate(z){this.callbacks.create.push(z)}onUpdate(z){this.callbacks.update.push(z)}onDelete(z){this.callbacks.delete.push(z)}addTransformation({id:z,get:H,set:Q}){this.transformations[z]={id:z,get:H,set:Q}}removeTransformation(z){delete this.transformations[z]}key(z,H=!1){return this.adapter.key(z,H)}keys(z=!1){return this.adapter.keys(z)}remove(z){return this.adapter.remove(z).then((H)=>{for(let Q of this.callbacks.delete)Q.call(null,z,H)})}clear(){return this.adapter.clear()}}class x{static capitalize(z){return z.replace(/\w\S*/g,(H)=>{return H.charAt(0).toUpperCase()+H.substring(1).toLowerCase()})}static suffix(z,H){let Q="",X=H.indexOf(z);if(X!==-1)X+=z.length,Q=H.substring(X);return Q}static selection(){let z=window.getSelection();if(z)return z.toString();return""}static prefix(z,H){let Q="",X=H.indexOf(z);if(X!==-1)Q=H.substring(0,X);return Q}static friendly(z){let H=[/[áàâãªä]/g,/[ÁÀÂÃÄ]/g,/[ÍÌÎÏ]/g,/[íìîï]/g,/[éèêë]/g,/[ÉÈÊË]/g,/[óòôõºö]/g,/[ÓÒÔÕÖ]/g,/[úùûü]/g,/[ÚÙÛÜ]/g,/ç/g,/Ç/g,/ñ/g,/Ñ/g,/_/g,/[''‹›<>']/g,/[""«»„"]/g,/[(){}[\]]/g,/[?¿!¡#$%&^*´`~/°|]/g,/[,.:;]/g,/ /g],Q=["a","A","I","i","e","E","o","O","u","U","c","C","n","N","-","","","","","","-"],X=z;for(let Y=0;Y<H.length;Y++)X=X.replace(H[Y],Q[Y]);return X}}class V{static callAsync(z,H,...Q){try{let X=z.apply(H,Q);if(X instanceof Promise)return X;else return Promise.resolve(X)}catch(X){return Promise.reject(X)}}static uuid(){if(typeof crypto<"u"&&crypto.getRandomValues)return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,(z)=>{let H=parseInt(z,10);return(H^crypto.getRandomValues(new Uint8Array(1))[0]&15>>H/4).toString(16)});else{let z=()=>Math.floor((1+Math.random())*65536).toString(16).substring(1);return z()+z()+"-"+z()+"-"+z()+"-"+z()+"-"+z()+z()+z()}}}export{V as Util,x as Text,O as SpaceAdapter,j as Space,P as SessionStorage,G as Request,E as RemoteStorage,R as Preload,C as Platform,I as LocalStorage,U as IndexedDB,q as Form,w as FileSystem,M as DebugLevel,T as Debug,$ as DOM,D as $_ready,A as $_};

//# debugId=107A87F78AE89FB864756E2164756E21
//# sourceMappingURL=artemis.js.map
