{"version":3,"sources":["src/DOM.js","src/Request.js","src/FileSystem.js","src/Form.js","src/Platform.js","src/Preload.js","src/SpaceAdapter/LocalStorage.js","src/SpaceAdapter/SessionStorage.js","src/SpaceAdapter/IndexedDB.js","src/SpaceAdapter/RemoteStorage.js","src/Space.js","src/Text.js","src/Util.js","index.js"],"names":["DOM","selector","collection","document","querySelectorAll","length","NodeList","style","display","newClass","classList","add","oldClass","remove","element","item","classes","split","j","toggle","classToCheck","value","focus","callback","addEventListener","event","target","e","$_","matches","call","querySelector","name","dataset","textContent","innerHTML","div","createElement","trim","appendChild","firstChild","childNodes","insertBefore","index","offsetWidth","offsetHeight","parentElement","rect","getBoundingClientRect","top","body","scrollTop","left","scrollLeft","found","get","search","find","parent","attribute","setAttribute","getAttribute","hasAttribute","content","insertAdjacentHTML","properties","i","property","time","start","Date","getTime","timer","initialValue","setInterval","step","Math","min","clearInterval","opacity","last","tick","window","requestAnimationFrame","setTimeout","check","Element","prototype","polyfill","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","indexOf","parentNode","removeChild","replaceChild","reset","$_ready","Request","data","Object","keys","map","key","encodeURIComponent","join","url","options","query","serialize","fetch","formData","headers","contentType","FormData","append","JSON","stringify","assign","method","post","then","response","json","blob","FileSystem","type","props","file","read","Promise","resolve","reject","reader","FileReader","onload","result","onerror","error","readAsDataURL","readAsArrayBuffer","readAsText","File","pop","extensions","extension","toLowerCase","Form","field","each","files","Platform","devicePixelRatio","orientation","portrait","process","cordova","platform","match","navigator","includes","test","userAgent","location","protocol","Preload","route","image","Image","src","LocalStorage","version","store","upgrades","numericVersion","parseInt","replace","id","storage","upgradesToApply","versionless","storedVersions","localStorage","filter","sort","oldVersion","oldVersionNumeric","availableUpgrades","startFrom","findIndex","u","old","slice","next","previousId","previous","getItem","setItem","removeItem","_upgrade","open","currentValue","o","parse","exception","values","promises","push","all","newVersion","catch","console","oldId","set","full","SessionStorage","sessionStorage","IndexedDB","IDBDatabase","indexedDB","onsuccess","onupgradeneeded","createObjectStore","createIndex","transaction","op","objectStore","put","getAll","getAllKeys","delete","clear","RemoteStorage","endpoint","SpaceAdapter","Space","adapter","configuration","_configuration","callbacks","transformations","object","create","update","contains","upgrade","rename","Text","text","txt","charAt","toUpperCase","substr","suffix","position","getSelection","toString","selection","createRange","prefix","regex","replacements","RegExp","Util","callable","context","args","apply","crypto","c","getRandomValues","Uint8Array","generate","floor","random","substring"],"mappings":";AAguBC,aAAA,SAAA,EAAA,GAAA,OAAA,EAAA,mBAAA,QAAA,iBAAA,OAAA,SAAA,SAAA,GAAA,cAAA,GAAA,SAAA,GAAA,OAAA,GAAA,mBAAA,QAAA,EAAA,cAAA,QAAA,IAAA,OAAA,UAAA,gBAAA,IAAA,GAAA,SAAA,EAAA,EAAA,GAAA,KAAA,aAAA,GAAA,MAAA,IAAA,UAAA,qCAAA,SAAA,EAAA,EAAA,GAAA,IAAA,IAAA,EAAA,EAAA,EAAA,EAAA,OAAA,IAAA,CAAA,IAAA,EAAA,EAAA,GAAA,EAAA,WAAA,EAAA,aAAA,EAAA,EAAA,cAAA,EAAA,UAAA,IAAA,EAAA,UAAA,GAAA,OAAA,eAAA,EAAA,EAAA,IAAA,IAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,GAAA,EAAA,EAAA,UAAA,GAAA,GAAA,EAAA,EAAA,GAAA,EAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,GAAA,EAAA,QAAA,QAAA,EAAA,QAAA,SAAA,EArtBYA,IAAAA,EAqtBZ,WA5sBaC,SAAAA,EAAAA,GACR,GADkB,EAAA,KAAA,GACC,iBAAZA,EACLC,KAAAA,WAAaC,SAASC,iBAAkBH,GACxCI,KAAAA,OAAS,KAAKH,WAAWG,YACxB,GAAIJ,aAAoBK,SACzBJ,KAAAA,WAAaD,EACbI,KAAAA,OAASJ,EAASI,WACjB,CAAA,GAAuB,UAAnB,EAAOJ,GAQV,OAAA,KAPHA,EAASI,QAAU,EACjBH,KAAAA,WAAaD,EAEbC,KAAAA,WAAa,CAACD,GAEfI,KAAAA,OAAS,KAAKH,WAAWG,QA+rBhC,OAAA,EAAA,EAAA,CAAA,CAAA,IAAA,OAtrBQ,MAAA,WAAA,IAAA,GAAA,EAAA,GAAA,EAAA,OAAA,EAAA,IACe,IAAA,IAAiB,EAAjB,EAAA,KAAKH,WAAY,OAAA,cAAA,GAAA,EAAA,EAAA,QAAA,MAAA,GAAA,EAAA,CAAA,EAAA,MAC9BK,MAAMC,QAAU,QAFlB,MAAA,GAAA,GAAA,EAAA,EAAA,EAAA,QAAA,IAAA,GAAA,MAAA,EAAA,QAAA,EAAA,SAAA,QAAA,GAAA,EAAA,MAAA,MAsrBR,CAAA,IAAA,OA3qByB,MAAA,WAAnBA,IAAAA,EAAU,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,QAAS,GAAA,EAAA,GAAA,EAAA,OAAA,EAAA,IACF,IAAA,IAAiB,EAAjB,EAAA,KAAKN,WAAY,OAAA,cAAA,GAAA,EAAA,EAAA,QAAA,MAAA,GAAA,EAAA,CAAA,EAAA,MAC9BK,MAAMC,QAAUA,GAFD,MAAA,GAAA,GAAA,EAAA,EAAA,EAAA,QAAA,IAAA,GAAA,MAAA,EAAA,QAAA,EAAA,SAAA,QAAA,GAAA,EAAA,MAAA,MA2qBzB,CAAA,IAAA,WAhqBUC,MAAAA,SAAAA,GAAU,IAAA,GAAA,EAAA,GAAA,EAAA,OAAA,EAAA,IACG,IAAA,IAAiB,EAAjB,EAAA,KAAKP,WAAY,OAAA,cAAA,GAAA,EAAA,EAAA,QAAA,MAAA,GAAA,EAAA,CAAA,EAAA,MAC9BQ,UAAUC,IAAKF,IAFL,MAAA,GAAA,GAAA,EAAA,EAAA,EAAA,QAAA,IAAA,GAAA,MAAA,EAAA,QAAA,EAAA,SAAA,QAAA,GAAA,EAAA,MAAA,MAgqBpB,CAAA,IAAA,cAppB8B,MAAA,WAAjBG,IAAAA,EAAW,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,KACnBA,GAAa,OAAbA,EAAmB,CAAA,IAAA,GAAA,EAAA,GAAA,EAAA,OAAA,EAAA,IACA,IAAA,IAAiB,EAAjB,EAAA,KAAKV,WAAY,OAAA,cAAA,GAAA,EAAA,EAAA,QAAA,MAAA,GAAA,EAAA,CAAA,EAAA,MAC9BQ,UAAUG,OAAQD,IAFL,MAAA,GAAA,GAAA,EAAA,EAAA,EAAA,QAAA,IAAA,GAAA,MAAA,EAAA,QAAA,EAAA,SAAA,QAAA,GAAA,EAAA,MAAA,QAIhB,CAAA,IAAA,GAAA,EAAA,GAAA,EAAA,OAAA,EAAA,IACgB,IAAA,IAAiB,EAAjB,EAAA,KAAKV,WAAY,OAAA,cAAA,GAAA,EAAA,EAAA,QAAA,MAAA,GAAA,EAC/BY,IADGA,IAAAA,EAA4B,EAAA,MAC/BA,EAAQJ,UAAUL,OAAS,GACjCS,EAAQJ,UAAUG,OAAQC,EAAQJ,UAAUK,KAAM,IAH9C,MAAA,GAAA,GAAA,EAAA,EAAA,EAAA,QAAA,IAAA,GAAA,MAAA,EAAA,QAAA,EAAA,SAAA,QAAA,GAAA,EAAA,MAAA,OA+oBR,CAAA,IAAA,cAjoBaC,MAAAA,SAAAA,GACZA,EAAUA,EAAQC,MAAO,KADJ,IAAA,GAAA,EAAA,GAAA,EAAA,OAAA,EAAA,IAEC,IAAA,IAAiB,EAAjB,EAAA,KAAKf,WAAY,OAAA,cAAA,GAAA,EAAA,EAAA,QAAA,MAAA,GAAA,EACjC,IADKY,IAAAA,EAA4B,EAAA,MAC7BI,EAAI,EAAGA,EAAIF,EAAQX,OAAQa,IACnCJ,EAAQJ,UAAUS,OAAQH,EAAQE,IAJf,MAAA,GAAA,GAAA,EAAA,EAAA,EAAA,QAAA,IAAA,GAAA,MAAA,EAAA,QAAA,EAAA,SAAA,QAAA,GAAA,EAAA,MAAA,MAioBtB,CAAA,IAAA,WAlnBUE,MAAAA,SAAAA,GACL,GAAA,KAAKlB,WAAW,GACd,IAAA,IAAIgB,EAAI,EAAGA,EAAI,KAAKhB,WAAW,GAAGQ,UAAUL,OAAQa,IACpD,GAAA,KAAKhB,WAAW,GAAGQ,UAAUQ,IAAME,EAC/B,OAAA,EAIH,OAAA,IA0mBR,CAAA,IAAA,QAhmBOC,MAAAA,SAAAA,GACF,GAAA,KAAKhB,OAAS,EAAG,CAChB,QAAiB,IAAVgB,EACH,OAAA,KAAKnB,WAAW,GAAGmB,MAErBnB,KAAAA,WAAW,GAAGmB,MAAQA,KA2lB9B,CAAA,IAAA,QAnlBS,MAAA,WACJ,KAAKhB,OAAS,GACZH,KAAAA,WAAW,GAAGoB,UAilBrB,CAAA,IAAA,QAxkBOC,MAAAA,SAAAA,GAAU,IAAA,GAAA,EAAA,GAAA,EAAA,OAAA,EAAA,IACM,IAAA,IAAiB,EAAjB,EAAA,KAAKrB,WAAY,OAAA,cAAA,GAAA,EAAA,EAAA,QAAA,MAAA,GAAA,EAAA,CAAA,EAAA,MAC9BsB,iBAAkB,QAASD,GAAU,IAF9B,MAAA,GAAA,GAAA,EAAA,EAAA,EAAA,QAAA,IAAA,GAAA,MAAA,EAAA,QAAA,EAAA,SAAA,QAAA,GAAA,EAAA,MAAA,MAwkBjB,CAAA,IAAA,QA7jBOA,MAAAA,SAAAA,GAAU,IAAA,GAAA,EAAA,GAAA,EAAA,OAAA,EAAA,IACM,IAAA,IAAiB,EAAjB,EAAA,KAAKrB,WAAY,OAAA,cAAA,GAAA,EAAA,EAAA,QAAA,MAAA,GAAA,EAAA,CAAA,EAAA,MAC9BsB,iBAAkB,QAASD,GAAU,IAF9B,MAAA,GAAA,GAAA,EAAA,EAAA,EAAA,QAAA,IAAA,GAAA,MAAA,EAAA,QAAA,EAAA,SAAA,QAAA,GAAA,EAAA,MAAA,MA6jBjB,CAAA,IAAA,UAljBSA,MAAAA,SAAAA,GAAU,IAAA,GAAA,EAAA,GAAA,EAAA,OAAA,EAAA,IACI,IAAA,IAAiB,EAAjB,EAAA,KAAKrB,WAAY,OAAA,cAAA,GAAA,EAAA,EAAA,QAAA,MAAA,GAAA,EAAA,CAAA,EAAA,MAC9BsB,iBAAkB,UAAWD,GAAU,IAF9B,MAAA,GAAA,GAAA,EAAA,EAAA,EAAA,QAAA,IAAA,GAAA,MAAA,EAAA,QAAA,EAAA,SAAA,QAAA,GAAA,EAAA,MAAA,MAkjBnB,CAAA,IAAA,SAviBQA,MAAAA,SAAAA,GAAU,IAAA,GAAA,EAAA,GAAA,EAAA,OAAA,EAAA,IACK,IAAA,IAAiB,EAAjB,EAAA,KAAKrB,WAAY,OAAA,cAAA,GAAA,EAAA,EAAA,QAAA,MAAA,GAAA,EAAA,CAAA,EAAA,MAC9BsB,iBAAkB,SAAUD,GAAU,IAF9B,MAAA,GAAA,GAAA,EAAA,EAAA,EAAA,QAAA,IAAA,GAAA,MAAA,EAAA,QAAA,EAAA,SAAA,QAAA,GAAA,EAAA,MAAA,MAuiBlB,CAAA,IAAA,SA5hBQA,MAAAA,SAAAA,GAAU,IAAA,GAAA,EAAA,GAAA,EAAA,OAAA,EAAA,IACK,IAAA,IAAiB,EAAjB,EAAA,KAAKrB,WAAY,OAAA,cAAA,GAAA,EAAA,EAAA,QAAA,MAAA,GAAA,EAAA,CAAA,EAAA,MAC9BsB,iBAAkB,SAAUD,GAAU,IAF9B,MAAA,GAAA,GAAA,EAAA,EAAA,EAAA,QAAA,IAAA,GAAA,MAAA,EAAA,QAAA,EAAA,SAAA,QAAA,GAAA,EAAA,MAAA,MA4hBlB,CAAA,IAAA,SAjhBQA,MAAAA,SAAAA,GAAU,IAAA,GAAA,EAAA,GAAA,EAAA,OAAA,EAAA,IACK,IAAA,IAAiB,EAAjB,EAAA,KAAKrB,WAAY,OAAA,cAAA,GAAA,EAAA,EAAA,QAAA,MAAA,GAAA,EAAA,CAAA,EAAA,MAC9BsB,iBAAkB,SAAUD,GAAU,IAF9B,MAAA,GAAA,GAAA,EAAA,EAAA,EAAA,QAAA,IAAA,GAAA,MAAA,EAAA,QAAA,EAAA,SAAA,QAAA,GAAA,EAAA,MAAA,MAihBlB,CAAA,IAAA,KApgBIE,MAAAA,SAAAA,EAAOC,EAAQH,GAClBE,EAAQA,EAAMR,MAAM,KADQ,IAAA,GAAA,EAAA,GAAA,EAAA,OAAA,EAAA,IAEN,IAAA,IAAiB,EAAjB,EAAA,KAAKf,WAAY,OAAA,cAAA,GAAA,EAAA,EAAA,QAAA,MAAA,GAAA,EACjC,IADKY,IAAAA,EAA4B,EAAA,MAC7BI,EAAI,EAAGA,EAAIO,EAAMpB,OAAQa,IAGX,mBAAXQ,EACVZ,EAAQU,iBAAiBC,EAAMP,GAAIQ,GAAQ,GACf,iBAAXA,GAA2C,mBAAbH,GAC/CT,EAAQU,iBAAiBC,EAAMP,GAAI,SAACS,GAC/BA,EAAED,QAAUE,EAAGD,EAAED,QAAQG,QAASH,IACrCH,EAASO,KAAMH,EAAED,OAAQC,KAExB,GAbsB,MAAA,GAAA,GAAA,EAAA,EAAA,EAAA,QAAA,IAAA,GAAA,MAAA,EAAA,QAAA,EAAA,SAAA,QAAA,GAAA,EAAA,MAAA,MAogB7B,CAAA,IAAA,SA3eQ1B,MAAAA,SAAAA,GACH,GAAA,KAAKI,OAAS,EACV,OAAA,IAAIL,EAAK,KAAKE,WAAW,GAAG6B,cAAe9B,MAyepD,CAAA,IAAA,OA9dM+B,MAAAA,SAAAA,EAAMX,GACP,GAAA,KAAKhB,OAAS,EAAG,CAChB,QAAiB,IAAVgB,EACH,OAAA,KAAKnB,WAAW,GAAG+B,QAAQD,GAE7B9B,KAAAA,WAAW,GAAG+B,QAAQD,GAAQX,KAydtC,CAAA,IAAA,OA7cMA,MAAAA,SAAAA,GACD,GAAA,KAAKhB,OAAS,EAAG,CAChB,QAAiB,IAAVgB,EACH,OAAA,KAAKnB,WAAW,GAAGgC,YAErBhC,KAAAA,WAAW,GAAGgC,YAAcb,KAwcpC,CAAA,IAAA,OA5bMA,MAAAA,SAAAA,GACD,GAAA,KAAKhB,OAAS,EAAG,CAChB,QAAiB,IAAVgB,EACH,OAAA,KAAKnB,WAAW,GAAGiC,UAErBjC,KAAAA,WAAW,GAAGiC,UAAYd,KAublC,CAAA,IAAA,SA7aQP,MAAAA,SAAAA,GACH,GAAA,KAAKT,OAAS,EACb,GAAmB,iBAAZS,EAAsB,CAC1BsB,IAAAA,EAAMjC,SAASkC,cAAe,OAEnCD,EAAID,UADkB,iBAAZrB,EACMA,EAAQwB,OAERxB,EAEZZ,KAAAA,WAAW,GAAGqC,YAAaH,EAAII,iBAE/BtC,KAAAA,WAAW,GAAGqC,YAAazB,KAkanC,CAAA,IAAA,UAxZSA,MAAAA,SAAAA,GACJ,GAAA,KAAKT,OAAS,EACb,GAAmB,iBAAZS,EAAsB,CAC1BsB,IAAAA,EAAMjC,SAASkC,cAAe,OAEnCD,EAAID,UADkB,iBAAZrB,EACMA,EAAQwB,OAERxB,EAEb,KAAKZ,WAAW,GAAGuC,WAAWpC,OAAS,EACrCH,KAAAA,WAAW,GAAGwC,aAAcN,EAAII,WAAY,KAAKtC,WAAW,GAAGuC,WAAW,IAE1EvC,KAAAA,WAAW,GAAGqC,YAAaH,EAAII,iBAGjC,KAAKtC,WAAW,GAAGuC,WAAWpC,OAAS,EACrCH,KAAAA,WAAW,GAAGwC,aAAc5B,EAAS,KAAKZ,WAAW,GAAGuC,WAAW,IAEnEvC,KAAAA,WAAW,GAAGqC,YAAazB,KAsYpC,CAAA,IAAA,OA3XMS,MAAAA,SAAAA,GAAU,IAAA,GAAA,EAAA,GAAA,EAAA,OAAA,EAAA,IACO,IAAA,IAAiB,EAAjB,EAAA,KAAKrB,WAAY,OAAA,cAAA,GAAA,EAAA,EAAA,QAAA,MAAA,GAAA,EAAA,CACtCqB,EADsC,EAAA,QADxB,MAAA,GAAA,GAAA,EAAA,EAAA,EAAA,QAAA,IAAA,GAAA,MAAA,EAAA,QAAA,EAAA,SAAA,QAAA,GAAA,EAAA,MAAA,MA2XhB,CAAA,IAAA,MA/WKoB,MAAAA,SAAAA,GACG,OAAA,KAAKzC,WAAWyC,KA8WxB,CAAA,IAAA,QAtWS,MAAA,WACJ,GAAA,KAAKtC,OAAS,EACV,OAAA,IAAIL,EAAK,KAAKE,WAAW,MAoWlC,CAAA,IAAA,OA3VQ,MAAA,WACH,GAAA,KAAKG,OAAS,EACV,OAAA,IAAIL,EAAK,KAAKE,WAAW,KAAKA,WAAWG,OAAS,MAyV3D,CAAA,IAAA,YA/Ua,MAAA,WAAA,IAAA,GAAA,EAAA,GAAA,EAAA,OAAA,EAAA,IACU,IAAA,IAAiB,EAAjB,EAAA,KAAKH,WAAY,OAAA,cAAA,GAAA,EAAA,EAAA,QAAA,MAAA,GAAA,EAAA,CAA5BY,IAAAA,EAA4B,EAAA,MAClCA,GAAmB,QAAnBA,EAAQN,SAAqBM,EAAQ8B,YAAc,GAAK9B,EAAQ+B,aAAe,EAC3E,OAAA,GAHG,MAAA,GAAA,GAAA,EAAA,EAAA,EAAA,QAAA,IAAA,GAAA,MAAA,EAAA,QAAA,EAAA,SAAA,QAAA,GAAA,EAAA,MAAA,GAML,OAAA,IAyUR,CAAA,IAAA,SAjUU,MAAA,WACL,GAAA,KAAK3C,WAAW,GACZ,OAAA,IAAIF,EAAK,KAAKE,WAAW,GAAG4C,iBA+TrC,CAAA,IAAA,OArTM7C,MAAAA,SAAAA,GACD,GAAA,KAAKC,WAAW,GACZ,OAAA,IAAIF,EAAK,KAAKE,WAAW,GAAGE,iBAAkBH,MAmTvD,CAAA,IAAA,SA1SU,MAAA,WACL,GAAA,KAAKC,WAAW,GAAI,CACjB6C,IAAAA,EAAO,KAAK7C,WAAW,GAAG8C,wBACzB,MAAA,CACNC,IAAKF,EAAKE,IAAM9C,SAAS+C,KAAKC,UAC9BC,KAAML,EAAKK,KAAOjD,SAAS+C,KAAKG,eAqSnC,CAAA,IAAA,UAzRSpD,MAAAA,SAAAA,GAGD,IAFHqD,IAAAA,EAAQ,KACRxC,EAAU,UACoB,IAApBA,EAAQyC,IAAK,IAAgC,OAAVD,GAAgB,CAC1DE,IAAAA,EAAS1C,EAAQ2C,KAAMxD,GACzBuD,EAAOnD,OAAS,IACnBiD,EAAQE,GAET1C,EAAUA,EAAQ4C,SAGfJ,OAAU,OAAVA,EACIA,EAGDxC,IA0QR,CAAA,IAAA,YA/PW6C,MAAAA,SAAAA,EAAWtC,GACjB,GAAA,KAAKnB,WAAW,GAAI,CACnB,QAAiB,IAAVmB,EAGH,OAAA,KAAKnB,WAAW,GAAG0D,aAAcD,EAAWtC,GAF9CnB,KAAAA,WAAW,GAAG2D,aAAcF,MA4PpC,CAAA,IAAA,eA/OcA,MAAAA,SAAAA,GACT,GAAA,KAAKzD,WAAW,GACZ,OAAA,KAAKA,WAAW,GAAG4D,aAAcH,KA6O1C,CAAA,IAAA,QApOOI,MAAAA,SAAAA,GAAS,IAAA,GAAA,EAAA,GAAA,EAAA,OAAA,EAAA,IACO,IAAA,IAAiB,EAAjB,EAAA,KAAK7D,WAAY,OAAA,cAAA,GAAA,EAAA,EAAA,QAAA,MAAA,GAAA,EAAA,CAAA,EAAA,MAC9B8D,mBAAoB,WAAYD,IAF1B,MAAA,GAAA,GAAA,EAAA,EAAA,EAAA,QAAA,IAAA,GAAA,MAAA,EAAA,QAAA,EAAA,SAAA,QAAA,GAAA,EAAA,MAAA,MAoOhB,CAAA,IAAA,SAzNQA,MAAAA,SAAAA,GAAS,IAAA,GAAA,EAAA,GAAA,EAAA,OAAA,EAAA,IACM,IAAA,IAAiB,EAAjB,EAAA,KAAK7D,WAAY,OAAA,cAAA,GAAA,EAAA,EAAA,QAAA,MAAA,GAAA,EAAA,CAAA,EAAA,MAC9B8D,mBAAoB,cAAeD,IAF5B,MAAA,GAAA,GAAA,EAAA,EAAA,EAAA,QAAA,IAAA,GAAA,MAAA,EAAA,QAAA,EAAA,SAAA,QAAA,GAAA,EAAA,MAAA,MAyNjB,CAAA,IAAA,QAzMOE,MAAAA,SAAAA,EAAY5C,GACb,IAAA,IAAI6C,EAAI,EAAGA,EAAI,KAAKhE,WAAWG,OAAQ6D,IACvC,GAAsB,iBAAfD,GAAqC,cAAV5C,EAChCnB,KAAAA,WAAWgE,GAAG3D,MAAM0D,GAAc5C,MACjC,CAAA,GAA0B,iBAAf4C,GAAqC,cAAV5C,EACrC,OAAA,KAAKnB,WAAWgE,GAAG3D,MAAM0D,GAC1B,GAA0B,WAAtB,EAAOA,GACZ,IAAA,IAAME,KAAYF,EACjB/D,KAAAA,WAAWgE,GAAG3D,MAAM4D,GAAYF,EAAWE,MAiMpD,CAAA,IAAA,UAlLS5D,MAAAA,SAAAA,EAAO6D,GACV,IADgB,IAAA,EAAA,KACZF,EAAAA,SAAAA,GACGC,IAAAA,EAAAA,SAAAA,GAEJE,IAAAA,GAAQ,IAAIC,MAAOC,UACnBrE,EAAa,EAAKA,WACpBsE,OAAJ,EACIC,OAAJ,OACkD,IAAvC,EAAKvE,WAAWgE,GAAG3D,MAAM4D,IACnCM,EAAe,EAAKvE,WAAWgE,GAAG3D,MAAM4D,GAExCK,EAAQE,YAAa,WACdC,IAAAA,EAAOC,KAAKC,IAAK,IAAI,IAAIP,MAAQC,UAAaF,GAASD,GAE7DlE,EAAWgE,GAAG3D,MAAM4D,GAAaM,EAAeE,GAAQpE,EAAM4D,GAAYM,GAE9D,GAARE,GACHG,cAAeN,IAEd,IACH,EAAKtE,WAAWgE,GAAG3D,MAAM4D,GAAYM,QAEe,IAAlC,EAAKvE,WAAWgE,GAAIC,KACtCM,EAAgB,EAAKvE,WAAWgE,GAAIC,GAEpCK,EAAQE,YAAY,WACbC,IAAAA,EAAOC,KAAKC,IAAK,IAAI,IAAIP,MAAQC,UAAaF,GAASD,GAE5DlE,EAAWgE,GAAIC,GAAaM,EAAeE,GAAQpE,EAAM4D,GAAYM,GAE1D,GAARE,GACHG,cAAeN,IAEd,IACF,EAAKtE,WAAWgE,GAAIC,GAAYM,IAhC9B,IAAA,IAAMN,KAAY5D,EAAZ4D,EAAAA,IADHD,EAAI,EAAGA,EAAI,KAAKhE,WAAWG,OAAQ6D,IAAnCA,EAAAA,KAiLV,CAAA,IAAA,SApI8B,MAAA,WAAtBE,IAAAA,EAAO,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,IAAK7C,EAAU,UAAA,OAAA,EAAA,UAAA,QAAA,EACzB,GAAA,KAAKrB,WAAW,GAAI,CACjBY,IAAAA,EAAU,KAAKZ,WAAW,GAChCY,EAAQP,MAAMwE,QAAU,EAEpBC,IAAAA,GAAQ,IAAIV,MAEH,SAAPW,IACLnE,EAAQP,MAAMwE,SAAWjE,EAAQP,MAAMwE,SAAW,IAAIT,KAASU,GAAQZ,EACvEY,GAAQ,IAAIV,MAEPxD,EAAQP,MAAMwE,QAAU,EAC3BG,OAAOC,uBAAyBA,sBAAsBF,IAAUG,WAAWH,EAAM,IAE1D,mBAAb1D,GACVA,IAKH0D,MAgHF,CAAA,IAAA,UAtG+B,MAAA,WAAtBb,IAAAA,EAAO,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,IAAK7C,EAAU,UAAA,OAAA,EAAA,UAAA,QAAA,EAC1B,GAAA,KAAKrB,WAAW,GAAI,CACnB8E,IAAAA,GAAQ,IAAIV,KACVxD,EAAU,KAAKZ,WAAW,IACnB,SAAP+E,IACLnE,EAAQP,MAAMwE,SAAWjE,EAAQP,MAAMwE,SAAW,IAAIT,KAASU,GAAQZ,EACvEY,GAAQ,IAAIV,MAEPxD,EAAQP,MAAMwE,QAAU,EAC3BG,OAAOC,uBAAyBA,sBAAuBF,IAAUG,WAAWH,EAAM,IAE3D,mBAAb1D,GACVA,IAIH0D,MAsFF,CAAA,IAAA,UA7EShF,MAAAA,SAAAA,GACFoF,IAAAA,EAAQC,QAAQC,UAIfC,OAHUH,EAAMxD,SAAWwD,EAAMI,uBAAyBJ,EAAMK,oBAAsBL,EAAMM,mBAAqB,WAChH,OAAkE,IAAlE,GAAGC,QAAQ9D,KAAM3B,SAASC,iBAAkBH,GAAW,QAE/C6B,KAAM,KAAK5B,WAAW,GAAID,KAwE3C,CAAA,IAAA,SAlEU,MAAA,WAAA,IAAA,GAAA,EAAA,GAAA,EAAA,OAAA,EAAA,IACa,IAAA,IAAiB,EAAjB,EAAA,KAAKC,WAAY,OAAA,cAAA,GAAA,EAAA,EAAA,QAAA,MAAA,GAAA,EAAA,CAA5BY,IAAAA,EAA4B,EAAA,MACtCA,EAAQ+E,WAAWC,YAAahF,IAFxB,MAAA,GAAA,GAAA,EAAA,EAAA,EAAA,QAAA,IAAA,GAAA,MAAA,EAAA,QAAA,EAAA,SAAA,QAAA,GAAA,EAAA,MAAA,MAkEV,CAAA,IAAA,cAzDaA,MAAAA,SAAAA,GACR,GAAA,KAAKZ,WAAW,GAAI,CACjBkC,IAAAA,EAAMjC,SAASkC,cAAe,OACpCD,EAAID,UAAYrB,EACXZ,KAAAA,WAAW,GAAG4C,cAAciD,aAAc3D,EAAII,WAAY,KAAKtC,WAAW,OAqDjF,CAAA,IAAA,QA9CS,MAAA,WACJ,KAAKG,OAAS,GACZH,KAAAA,WAAW,GAAG8F,UA4CrB,CAAA,IAAA,WAhCU7B,MAAAA,SAAAA,EAAU9C,GACf,GAAA,KAAKnB,WAAW,GAAI,CACnB,QAAiB,IAAVmB,EAGH,OAAA,KAAKnB,WAAW,GAAGiE,GAFrBjE,KAAAA,WAAW,GAAGiE,GAAY9C,OA6BlC,EAAA,GAfM,SAASO,EAAI3B,GACf,YAAoB,IAAbA,EACH,IAAID,EAAKC,GAETD,EASF,SAASiG,EAAS1E,GACxB2D,OAAO1D,iBAAkB,OAAQD,GACjC,QAAA,IAAA;;ACzkBC,aAAA,SAAA,EAAA,EAAA,GAAA,KAAA,aAAA,GAAA,MAAA,IAAA,UAAA,qCAAA,SAAA,EAAA,EAAA,GAAA,IAAA,IAAA,EAAA,EAAA,EAAA,EAAA,OAAA,IAAA,CAAA,IAAA,EAAA,EAAA,GAAA,EAAA,WAAA,EAAA,aAAA,EAAA,EAAA,cAAA,EAAA,UAAA,IAAA,EAAA,UAAA,GAAA,OAAA,eAAA,EAAA,EAAA,IAAA,IAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,GAAA,EAAA,EAAA,UAAA,GAAA,GAAA,EAAA,EAAA,GAAA,EAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EA5IW2E,IAAAA,EA4IX,WAAA,SAAA,IAAA,EAAA,KAAA,GAAA,OAAA,EAAA,EAAA,KAAA,CAAA,CAAA,IAAA,YApIiBC,MAAAA,SAAAA,GACVC,OAAAA,OAAOC,KAAMF,GAAMG,IAAK,SAACC,GACxBC,OAAAA,mBAAoBD,GAAO,IAAMC,mBAAoBL,EAAKI,MAC/DE,KAAM,OAiIT,CAAA,IAAA,MAnHWC,MAAAA,SAAAA,GAAKP,IAAAA,EAAO,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,GAAIQ,EAAU,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,GAC/BC,EAAQV,EAAQW,UAAWV,GAQ1BW,MAJO,KAAVF,IACHF,EAASA,GAAAA,OAAAA,EAAOE,KAAAA,OAAAA,IAGVE,MAAOJ,EAAKC,KA0GnB,CAAA,IAAA,OA3FYD,MAAAA,SAAAA,EAAKP,GAAMQ,IACnBI,EADmBJ,EAAU,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,GAE7B,QAA2B,IAApBA,EAAQK,QAAyB,CACrCC,IAAAA,EAAcN,EAAQK,QAAQ,gBAChC,QAAuB,IAAhBC,EACNA,GAAe,uBAAfA,EAEE,IAAA,IAAM5F,KADX0F,EAAW,IAAIG,SACKf,EACnBY,EAASI,OAAQ9F,EAAO8E,EAAK9E,SAG9B0F,EADyB,oBAAfE,EACCG,KAAKC,UAAWlB,GAEhBD,EAAQW,UAAWV,QAIhCY,EAAWb,EAAQW,UAAWV,GAGxBW,OAAAA,MAAOJ,EAAKN,OAAOkB,OAAQ,GAAI,CACrCC,OAAQ,OACRP,QAAS,CACQ,eAAA,qCAEjB9D,KAAM6D,GACJJ,MAiEH,CAAA,IAAA,MAlDWD,MAAAA,SAAAA,EAAKP,GAAMQ,IAAAA,EAAU,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,GACzBT,OAAAA,EAAQsB,KAAMd,EAAKP,EAAMC,OAAOkB,OAAQ,GAAI,CAACC,OAAQ,OAAQZ,MAiDpE,CAAA,IAAA,SAlCcD,MAAAA,SAAAA,EAAKP,GAAMQ,IAAAA,EAAU,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,GAC5BT,OAAAA,EAAQ3C,IAAKmD,EAAKP,EAAMC,OAAOkB,OAAQ,GAAI,CAACC,OAAQ,UAAWZ,MAiCtE,CAAA,IAAA,OApBYD,MAAAA,SAAAA,GAAKP,IAAAA,EAAO,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,GAAIQ,EAAU,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,GAC/BT,OAAAA,EAAQ3C,IAAKmD,EAAKP,EAAMQ,GAASc,KAAM,SAACC,GACvCA,OAAAA,EAASC,WAkBjB,CAAA,IAAA,OAJYjB,MAAAA,SAAAA,GAAKP,IAAAA,EAAO,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,GAAIQ,EAAU,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,GAC/BT,OAAAA,EAAQ3C,IAAKmD,EAAKP,EAAMQ,GAASc,KAAM,SAACC,GACvCA,OAAAA,EAASE,aAEjB,EAAA,GAAA,QAAA,QAAA;;ACjDA,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,gBAAA,EAhGF,IAAA,EAAA,QAAA,aAgGE,SAAA,EAAA,EAAA,GAAA,KAAA,aAAA,GAAA,MAAA,IAAA,UAAA,qCAAA,SAAA,EAAA,EAAA,GAAA,IAAA,IAAA,EAAA,EAAA,EAAA,EAAA,OAAA,IAAA,CAAA,IAAA,EAAA,EAAA,GAAA,EAAA,WAAA,EAAA,aAAA,EAAA,EAAA,cAAA,EAAA,UAAA,IAAA,EAAA,UAAA,GAAA,OAAA,eAAA,EAAA,EAAA,IAAA,IAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,GAAA,EAAA,EAAA,UAAA,GAAA,GAAA,EAAA,EAAA,GAAA,EAvFWC,IAAAA,EAuFX,WAAA,SAAA,IAAA,EAAA,KAAA,GAAA,OAAA,EAAA,EAAA,KAAA,CAAA,CAAA,IAAA,aAxEkBnB,MAAAA,SAAAA,GAAKoB,IAAAA,EAAO,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,SAAUC,EAAQ,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,GACzC7B,OAAAA,EAAQ0B,QAAAA,KAAMlB,EAAK,GAAIqB,GAAON,KAAM,SAACO,GACpCH,OAAAA,EAAWI,KAAMD,EAAMF,OAsE/B,CAAA,IAAA,OAxDYE,MAAAA,SAAAA,GAAMF,IAAAA,EAAO,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,OAClB,OAAA,IAAII,QAAS,SAACC,EAASC,GACvBC,IAAAA,EAAS,IAAIC,WAEnBD,EAAOE,OAAS,SAAC9G,GAEhB0G,EAAS1G,EAAOA,EAAMC,OAAO8G,SAG9BH,EAAOI,QAAU,SAACC,GACjBN,EAAQM,IAGI,WAATZ,EACHO,EAAOM,cAAeX,GACH,WAATF,EACVO,EAAOO,kBAAmBZ,GAE1BK,EAAOQ,WAAYb,EAAM,aAsC3B,CAAA,IAAA,SAvBchG,MAAAA,SAAAA,EAAM+B,GAAS+D,IAAAA,EAAO,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,aAC7BI,OAAAA,QAAQC,QAAS,IAAIW,KAAM,CAAC/E,GAAU/B,EAAM,CAAC8F,KAAAA,OAsBpD,CAAA,IAAA,YAbiB9F,MAAAA,SAAAA,GACVA,OAAAA,EAAKf,MAAO,KAAK8H,QAYxB,CAAA,IAAA,UAHe/G,MAAAA,SAAAA,GAERgH,MADY,CAAC,MAAO,OAAQ,MAAO,MAAO,MAAO,OAAQ,OAC9CpD,QAASiC,EAAWoB,UAAWjH,GAAMkH,gBAAmB,MAC1E,EAAA,GAAA,QAAA,WAAA;;AC/BA,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,UAAA,EAjEF,IAAA,EAAA,QAAA,SAiEE,SAAA,EAAA,EAAA,GAAA,KAAA,aAAA,GAAA,MAAA,IAAA,UAAA,qCAAA,SAAA,EAAA,EAAA,GAAA,IAAA,IAAA,EAAA,EAAA,EAAA,EAAA,OAAA,IAAA,CAAA,IAAA,EAAA,EAAA,GAAA,EAAA,WAAA,EAAA,aAAA,EAAA,EAAA,cAAA,EAAA,UAAA,IAAA,EAAA,UAAA,GAAA,OAAA,eAAA,EAAA,EAAA,IAAA,IAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,GAAA,EAAA,EAAA,UAAA,GAAA,GAAA,EAAA,EAAA,GAAA,EAzDWC,IAAAA,EAyDX,WAAA,SAAA,IAAA,EAAA,KAAA,GAAA,OAAA,EAAA,EAAA,KAAA,CAAA,CAAA,IAAA,OAhDYnH,MAAAA,SAAAA,EAAMmE,GACb,IAAA,IAAMiD,KAASjD,EAAM,CACnBrF,IAAAA,GAAU,EAAsBkB,EAAAA,IAAAA,mBAAAA,OAAAA,EAAiBoH,cAAAA,OAAAA,EAAW7F,OAAAA,IAAK,GACnE,QAAkB,IAAXzC,EACFA,OAAAA,EAAQgH,MAEV,IAAA,OACA,IAAA,SACJ,MAED,QACChH,EAAQO,MAAQ8E,EAAKiD,OAqCzB,CAAA,IAAA,SAtBcpH,MAAAA,SAAAA,GACRmE,IAAAA,EAAO,GAoBNA,OAnBenE,EAAAA,EAAAA,IAAAA,mBAAAA,OAAAA,EAAiBqH,cAAAA,KAAM,SAACvI,GACzCO,IAAAA,EACIP,OAAAA,EAAQgH,MACV,IAAA,SACJzG,EAAQP,EAAQwI,MAChB,MACI,IAAA,OACJjI,EAAQP,EAAQwI,MAAM,GACtB,MACD,QACCjI,EAAQP,EAAQO,MAId,MAAOA,IACV8E,EAAKrF,EAAQkB,MAAQX,KAIhB8E,MACP,EAAA,GAAA,QAAA,KAAA;;AC6EA,aAAA,SAAA,EAAA,EAAA,GAAA,KAAA,aAAA,GAAA,MAAA,IAAA,UAAA,qCAAA,SAAA,EAAA,EAAA,GAAA,IAAA,IAAA,EAAA,EAAA,EAAA,EAAA,OAAA,IAAA,CAAA,IAAA,EAAA,EAAA,GAAA,EAAA,WAAA,EAAA,aAAA,EAAA,EAAA,cAAA,EAAA,UAAA,IAAA,EAAA,UAAA,GAAA,OAAA,eAAA,EAAA,EAAA,IAAA,IAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,GAAA,EAAA,EAAA,UAAA,GAAA,GAAA,EAAA,EAAA,GAAA,EAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,cAAA,EA1IWoD,IAAAA,EA0IX,WAAA,SAAA,IAAA,EAAA,KAAA,GAAA,OAAA,EAAA,EAAA,KAAA,CAAA,CAAA,IAAA,SApIgB,MAAA,WACTrE,OAAAA,OAAOsE,kBAAoB,IAmIlC,CAAA,IAAA,WA5HkB,MAAA,WACXtE,OAAuB,IAAvBA,OAAOuE,aAA4C,MAAvBvE,OAAOuE,cA2H1C,CAAA,IAAA,YApHmB,MAAA,WACXvE,OAAuB,KAAvBA,OAAOuE,cAA8C,KAAxBvE,OAAOuE,cAmH5C,CAAA,IAAA,cA5GqB,MAAA,WACdF,OAAAA,EAASG,WAAc,WAAa,cA2G3C,CAAA,IAAA,WApGkB,MAAA,WACXxE,OAAAA,QAAUA,OAAOyE,SAAWzE,OAAOyE,QAAQ7B,OAmGlD,CAAA,IAAA,UA5FiB,MAAA,WACV,QAAE5C,OAAO0E,UA2FhB,CAAA,IAAA,UApFiC,MAAA,WAAlBC,IACXC,GAAQ,EACJD,OAFkB,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,OAGpB,IAAA,UACJC,EAAQC,UAAUF,SAASG,SAAU,OACrC,MAEI,IAAA,QACJF,EAAQC,UAAUF,SAASG,SAAU,OACrC,MAEI,IAAA,QACJF,EAAQC,UAAUF,SAASG,SAAU,SACrC,MAEI,IAAA,UACJF,EAAQC,UAAUF,SAASG,SAAU,WACrC,MAEI,IAAA,QACJF,EAAQC,UAAUF,SAASG,SAAU,SACrC,MAEI,IAAA,MACL,QACCF,EAAQC,UAAUF,SAASG,SAAU,QAChCD,UAAUF,SAASG,SAAU,QAC7BD,UAAUF,SAASG,SAAU,UAC7BD,UAAUF,SAASG,SAAU,YAC7BD,UAAUF,SAASG,SAAU,SAG7BF,OAAAA,IAoDP,CAAA,IAAA,SA5CgC,MAAA,WAAlBD,IACVC,GAAQ,EACJD,OAFiB,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,OAGnB,IAAA,UACJC,EAAQ,WAAWG,KAAMF,UAAUG,WACnC,MAEI,IAAA,MACJJ,EAAQ,oBAAoBG,KAAMF,UAAUG,WAC5C,MAEI,IAAA,QACJJ,EAAQ,cAAcG,KAAMF,UAAUG,WACtC,MAEI,IAAA,UACJJ,EAAQ,oCAAoCG,KAAMF,UAAUG,WAC5D,MAEI,IAAA,aACJJ,EAAQ,mBAAmBG,KAAMF,UAAUG,WAC3C,MAEI,IAAA,MACL,QACCJ,EAAQ,6EAA6EG,KAAMF,UAAUG,WAGhGJ,OAAAA,IAgBP,CAAA,IAAA,iBAPwB,MAAA,WACpB,MAAqB,oBAAdC,WACN,kBAAmBA,WAAaI,SAASC,SAASxE,QAAS,SAAW,MAK3E,EAAA,GAAA,QAAA,SAAA;;ACtGA,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAxCF,IAAA,EAAA,QAAA,aAwCE,SAAA,EAAA,EAAA,GAAA,KAAA,aAAA,GAAA,MAAA,IAAA,UAAA,qCAAA,SAAA,EAAA,EAAA,GAAA,IAAA,IAAA,EAAA,EAAA,EAAA,EAAA,OAAA,IAAA,CAAA,IAAA,EAAA,EAAA,GAAA,EAAA,WAAA,EAAA,aAAA,EAAA,EAAA,cAAA,EAAA,UAAA,IAAA,EAAA,UAAA,GAAA,OAAA,eAAA,EAAA,EAAA,IAAA,IAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,GAAA,EAAA,EAAA,UAAA,GAAA,GAAA,EAAA,EAAA,GAAA,EAjCWyE,IAAAA,EAiCX,WAAA,SAAA,IAAA,EAAA,KAAA,GAAA,OAAA,EAAA,EAAA,KAAA,CAAA,CAAA,IAAA,QAxBaC,MAAAA,SAAAA,GACN,OAAA,IAAIpC,QAAQ,SAACC,EAASC,GACtBmC,IAAAA,EAAQ,IAAIC,MAElBD,EAAMhC,OAAS,WACdJ,EAASoC,IAGVA,EAAM9B,QAAU,SAAC9G,GAChByG,EAAQzG,IAGT4I,EAAME,IAAMH,MAYb,CAAA,IAAA,OAFYA,MAAAA,SAAAA,GACLpE,OAAAA,EAAQ0B,QAAAA,KAAM0C,OACrB,EAAA,GAAA,QAAA,QAAA;;ACyVA,aAAA,SAAA,EAAA,EAAA,GAAA,OAAA,EAAA,IAAA,EAAA,EAAA,IAAA,IAAA,SAAA,IAAA,MAAA,IAAA,UAAA,wDAAA,SAAA,EAAA,EAAA,GAAA,IAAA,EAAA,GAAA,GAAA,EAAA,GAAA,EAAA,OAAA,EAAA,IAAA,IAAA,IAAA,EAAA,EAAA,EAAA,OAAA,cAAA,GAAA,EAAA,EAAA,QAAA,QAAA,EAAA,KAAA,EAAA,QAAA,GAAA,EAAA,SAAA,GAAA,GAAA,IAAA,MAAA,GAAA,GAAA,EAAA,EAAA,EAAA,QAAA,IAAA,GAAA,MAAA,EAAA,QAAA,EAAA,SAAA,QAAA,GAAA,EAAA,MAAA,GAAA,OAAA,EAAA,SAAA,EAAA,GAAA,GAAA,MAAA,QAAA,GAAA,OAAA,EAAA,SAAA,EAAA,GAAA,OAAA,EAAA,mBAAA,QAAA,iBAAA,OAAA,SAAA,SAAA,GAAA,cAAA,GAAA,SAAA,GAAA,OAAA,GAAA,mBAAA,QAAA,EAAA,cAAA,QAAA,IAAA,OAAA,UAAA,gBAAA,IAAA,GAAA,SAAA,EAAA,EAAA,GAAA,KAAA,aAAA,GAAA,MAAA,IAAA,UAAA,qCAAA,SAAA,EAAA,EAAA,GAAA,IAAA,IAAA,EAAA,EAAA,EAAA,EAAA,OAAA,IAAA,CAAA,IAAA,EAAA,EAAA,GAAA,EAAA,WAAA,EAAA,aAAA,EAAA,EAAA,cAAA,EAAA,UAAA,IAAA,EAAA,UAAA,GAAA,OAAA,eAAA,EAAA,EAAA,IAAA,IAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,GAAA,EAAA,EAAA,UAAA,GAAA,GAAA,EAAA,EAAA,GAAA,EAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,kBAAA,EA3XWI,IAAAA,EA2XX,WA7WmD,SAAA,EAAA,GAAtC1I,IAAAA,EAAAA,EAAAA,KAAAA,OAAO,IAAA,EAAA,GAA+B,EAA3B2I,EAAAA,EAAAA,QAAAA,OAAU,IAAA,EAAA,GAAiB,EAAbC,EAAAA,EAAAA,MAAAA,OAAQ,IAAA,EAAA,GAAK,EAAA,EAAA,KAAA,GAC9C5I,KAAAA,KAAOA,EACP2I,KAAAA,QAAUA,EACVC,KAAAA,MAAQA,EAERC,KAAAA,SAAW,GAEK,KAAjB,KAAKF,QACHG,KAAAA,eAAiB,EAEjBA,KAAAA,eAAiBC,SAAUJ,EAAQK,QAAS,MAAO,KAInDC,KAAAA,GADO,KAATjJ,GAA2B,KAAZ2I,GAA4B,KAAVC,EACvB,GAAA,OAAA,KAAK5I,KAAS,MAAA,OAAA,KAAK4I,MAAU,MAAA,OAAA,KAAKD,QAA/C,KACmB,KAAT3I,GAA2B,KAAZ2I,EACZ,GAAA,OAAA,KAAK3I,KAAS,MAAA,OAAA,KAAK2I,QAAhC,KACmB,KAAT3I,EACG,GAAA,OAAA,KAAKA,KAAlB,OAEU,GAyVX,OAAA,EAAA,EAAA,CAAA,CAAA,IAAA,OAhVO,MAAA,WAAA,IAAA,EAAA,KACH,MAAwB,WAAxB,EAAO,KAAKkJ,UAA0B,KAAKA,mBAAmBhD,QAEvD,KAAKgD,mBAAmBhD,QAC3B,KAAKgD,SAEPA,KAAAA,QAAU,IAAIhD,QAAS,SAACC,GACxBgD,IAAAA,EAAkB,GAGlB,GAAiB,KAAjB,EAAKR,QAAgB,CAIpBS,IAAAA,EAAc,GACA,KAAd,EAAKpJ,MAAgC,KAAjB,EAAK2I,SAAiC,KAAf,EAAKC,MACnDQ,EAAiB,GAAA,OAAA,EAAKpJ,KAAS,MAAA,OAAA,EAAK4I,MAApC,MACwB,KAAd,EAAK5I,MAAgC,KAAjB,EAAK2I,UACnCS,EAAiB,GAAA,OAAA,EAAKpJ,KAAtB,OAKKqJ,IAAAA,EAAiBjF,OAAOC,KAAMnB,OAAOoG,cAAcC,OAAQ,SAAChF,GAC1DA,OAA8B,IAA9BA,EAAIX,QAASwF,KAClB9E,IAAK,SAACC,GAGDA,OAAAA,EAAIyE,QAASI,EAAa,IAAInK,MAAO,KAAK,KAC9CsK,OAAQ,SAAChF,GAELA,OAAwB,IAAxBA,EAAIX,QAAS,QAClB4F,OAECH,GAAAA,EAAehL,OAAS,EAAG,CAExBoL,IAAAA,EAAaJ,EAAe,GAC5BK,EAAoBX,SAAUU,EAAWT,QAAS,MAAO,KAE3DU,GAAAA,EAAoB,EAAKZ,eAAgB,CAEtCa,IAAAA,EAAoBvF,OAAOC,KAAM,EAAKwE,UAAUW,OAIhDI,EAAYD,EAAkBE,UAAW,SAAAC,GAC9BA,IAATC,EAD4C,EACnCD,EAAE7K,MAAO,MAD0B,GAAA,GAE5C8J,OAAAA,SAAUgB,KAASL,IAGvBE,GAAa,IAChBT,EAAkBQ,EAAkBK,MAAOJ,GAAWL,OAAQ,SAACO,GAC1CA,IADgD,EAAA,EAChDA,EAAE7K,MAAO,MADuC,GAC7D8K,EAD6D,EAAA,GACxDE,EADwD,EAAA,GAE7DlB,OAAAA,SAAUgB,GAAO,EAAKjB,gBAAkBC,SAAUkB,IAAS,EAAKnB,kBAKrEoB,IAAAA,EAAgB,GAAA,OAAA,EAAKlK,KAASyJ,MAAAA,OAAAA,EAAlC,KAEkB,KAAd,EAAKzJ,MAAgC,KAAjB,EAAK2I,SAAiC,KAAf,EAAKC,MACnDsB,EAAgB,GAAA,OAAA,EAAKlK,KAAS,MAAA,OAAA,EAAK4I,MAAUa,MAAAA,OAAAA,EAA7C,KACwB,KAAd,EAAKzJ,MAAgC,KAAjB,EAAK2I,UACnCuB,EAAgB,GAAA,OAAA,EAAKlK,KAASyJ,MAAAA,OAAAA,EAA9B,MAIKpF,IAAAA,EAAOD,OAAOC,KAAMnB,OAAOoG,cAAcC,OAAQ,SAAChF,GAChDA,OAA6B,IAA7BA,EAAIX,QAASsG,KAClB5F,IAAK,SAACC,GACDA,OAAAA,EAAIyE,QAASkB,EAAY,MA/BW,GAAA,EAAA,GAAA,EAAA,OAAA,EAAA,IAkC1B7F,IAAAA,IAAM,EAANA,EAAAA,EAAM,OAAA,cAAA,GAAA,EAAA,EAAA,QAAA,MAAA,GAAA,EAAA,CAAbE,IAAAA,EAAa,EAAA,MAEjB4F,EAAWjH,OAAOoG,aAAac,QAAYF,GAAAA,OAAAA,GAAa3F,OAAAA,IAG9DrB,OAAOoG,aAAae,QAAS,EAAKpB,GAAK1E,EAAK4F,GAG5CjH,OAAOoG,aAAagB,WAAeJ,GAAAA,OAAAA,GAAa3F,OAAAA,KA1CL,MAAA,GAAA,GAAA,EAAA,EAAA,EAAA,QAAA,IAAA,GAAA,MAAA,EAAA,QAAA,EAAA,SAAA,QAAA,GAAA,EAAA,MAAA,MA+C/C4B,EAAS,CAAE0C,SAAUM,MACnB1D,KAAM,SAAkB,GAAfoD,IAAAA,EAAAA,EAAAA,SAEJ,OADP,EAAKK,QAAUhG,OAAOoG,aACf,IAAIpD,QAAS,SAACC,GAEpB,EAAKoE,SAAU1B,EADH,WAAM1C,OAAAA,EAAS,SAItB,KAAK+C,SA5FLhD,QAAQC,QAAS,QA8UzB,CAAA,IAAA,MAvOI5B,MAAAA,SAAAA,EAAKlF,GAAO,IAAA,EAAA,KACT,OAAA,KAAKmL,OAAQ/E,KAAM,WAQlBS,MANc,WAAjB,EAAO7G,GACV,EAAK6J,QAAQmB,QAAS,EAAKpB,GAAK1E,EAAKa,KAAKC,UAAWhG,IAErD,EAAK6J,QAAQmB,QAAS,EAAKpB,GAAK1E,EAAKlF,GAG/B6G,QAAQC,QAAS,CAAC5B,IAAAA,EAAKlF,MAAAA,QA8N/B,CAAA,IAAA,SAjNOkF,MAAAA,SAAAA,EAAKlF,GAAO,IAAA,EAAA,KACZ,OAAA,KAAKkC,IAAKgD,GAAKkB,KAAM,SAACgF,GASrBvE,MARqB,WAAxB,EAAOuE,IACW,WAAjB,EAAOpL,KACVA,EAAQ+E,OAAOkB,OAAQ,GAAImF,EAAcpL,IAE1C,EAAK6J,QAAQmB,QAAS,EAAKpB,GAAK1E,EAAKa,KAAKC,UAAWhG,KAErD,EAAK6J,QAAQmB,QAAS,EAAKpB,GAAK1E,EAAKlF,GAE/B6G,QAAQC,QAAS,CAAC5B,IAAAA,EAAKlF,MAAAA,QAuM/B,CAAA,IAAA,MA5LIkF,MAAAA,SAAAA,GAAK,IAAA,EAAA,KACF,OAAA,KAAKiG,OAAQ/E,KAAM,WAClB,OAAA,IAAIS,QAAS,SAACC,EAASC,GACzB/G,IAAAA,EAAQ,KACZA,EAAQ,EAAK6J,QAAQkB,QAAS,EAAKnB,GAAK1E,GACpC,IACGmG,IAAAA,EAAItF,KAAKuF,MAAOtL,GAClBqL,GAAkB,WAAb,EAAOA,KACfrL,EAAQqL,GAER,MAAOE,IAIL,MAAOvL,EACV8G,EAAS9G,GAET+G,UA2KH,CAAA,IAAA,SA/JS,MAAA,WAAA,IAAA,EAAA,KACF,OAAA,KAAK/B,OAAQoB,KAAM,SAACpB,GACpBwG,IAAAA,EAAS,GACTC,EAAW,GAFkB,GAAA,EAAA,GAAA,EAAA,OAAA,EAAA,IAGjBzG,IAHiB,IAGX,EAHW,EAAA,WAGxBE,IAAAA,EAHwB,EAAA,MAIlCuG,EAASC,KAAM,EAAKxJ,IAAKgD,GAAKkB,KAAM,SAACpG,GACpCwL,EAAOtG,GAAOlF,MAFEgF,EAAAA,EAAM,OAAA,cAAA,GAAA,EAAA,EAAA,QAAA,MAAA,GAAA,EAAA,IAHW,MAAA,GAAA,GAAA,EAAA,EAAA,EAAA,QAAA,IAAA,GAAA,MAAA,EAAA,QAAA,EAAA,SAAA,QAAA,GAAA,EAAA,MAAA,GAQ5B6B,OAAAA,QAAQ8E,IAAKF,GAAUrF,KAAM,WAC5BoF,OAAAA,QAqJT,CAAA,IAAA,WAzIStG,MAAAA,SAAAA,GACF,OAAA,KAAKF,OAAQoB,KAAM,SAACpB,GACtBA,IAAAA,EAAK2D,SAAUzD,GAGX2B,OAAAA,QAAQE,SAFfF,QAAQC,cAsIV,CAAA,IAAA,UAvHQsD,MAAAA,SAAAA,EAAYwB,EAAY1L,GAEzB2G,OADF2C,KAAAA,SAAYE,GAAAA,OAAAA,SAAUU,EAAWT,QAAS,MAAO,KAASD,MAAAA,OAAAA,SAAUkC,EAAWjC,QAAS,MAAO,OAAUzJ,EACvG2G,QAAQC,YAqHf,CAAA,IAAA,WAhHSgD,MAAAA,SAAAA,EAAiBhD,GAAS,IAAA,EAAA,KAE/BgD,EAAgB9K,OAAS,EACvBwK,KAAAA,SAASM,EAAgB,IAAIrJ,KAAM,KAAM,MAAM2F,KAAM,WACzD,EAAK8E,SAAUpB,EAAgBa,MAAO,GAAI7D,KACxC+E,MAAO,SAACvL,GAAMwL,OAAAA,QAAQzE,MAAO/G,KAEhCwG,MAyGD,CAAA,IAAA,SA/FOnG,MAAAA,SAAAA,GAAM,IAAA,EAAA,KAET,OAAA,KAAKA,OAASA,EACV,KAAKqE,OAAQoB,KAAM,SAACpB,GAEpB+G,IAAAA,EAAQ,EAAKnC,GAGnB,EAAKjJ,KAAOA,EAEM,KAAd,EAAKA,MAAgC,KAAjB,EAAK2I,SAAiC,KAAf,EAAKC,MACnD,EAAKK,GAAQ,GAAA,OAAA,EAAKjJ,KAAS,MAAA,OAAA,EAAK4I,MAAU,MAAA,OAAA,EAAKD,QAA/C,KACwB,KAAd,EAAK3I,MAAgC,KAAjB,EAAK2I,QACnC,EAAKM,GAAQ,GAAA,OAAA,EAAKjJ,KAAS,MAAA,OAAA,EAAK2I,QAAhC,KACwB,KAAd,EAAK3I,KACf,EAAKiJ,GAAQ,GAAA,OAAA,EAAKjJ,KAAlB,OAEA,EAAKiJ,GAAK,GAGL6B,IAAAA,EAAW,GAjBkB,GAAA,EAAA,GAAA,EAAA,OAAA,EAAA,IAkBjBzG,IAlBiB,IAkBX,EAlBW,EAAA,WAkBxBE,IAAAA,EAlBwB,EAAA,MAmBlCuG,EAASC,KAAM,EAAKM,IAAK9G,EAAK,EAAK2E,QAAQkB,QAAYgB,GAAAA,OAAAA,GAAQ7G,OAAAA,KAAQkB,KAAM,WAC5E,EAAKyD,QAAQoB,WAAec,GAAAA,OAAAA,GAAQ7G,OAAAA,QAFpBF,EAAAA,EAAM,OAAA,cAAA,GAAA,EAAA,EAAA,QAAA,MAAA,GAAA,EAAA,IAlBW,MAAA,GAAA,GAAA,EAAA,EAAA,EAAA,QAAA,IAAA,GAAA,MAAA,EAAA,QAAA,EAAA,SAAA,QAAA,GAAA,EAAA,MAAA,GAuB5B6B,OAAAA,QAAQ8E,IAAKF,KAGd5E,QAAQE,WAkEhB,CAAA,IAAA,MAvDIzF,MAAAA,SAAAA,GAAqB,IAAA,EAAA,KAAd2K,EAAO,UAAA,OAAA,QAAA,IAAA,UAAA,IAAA,UAAA,GACX,OAAA,KAAKd,OAAQ/E,KAAM,WACrB6F,OAAS,IAATA,EACIpF,QAAQC,QAAS,EAAK+C,QAAQ3E,IAAK5D,IAEnCuF,QAAQC,QAAS,EAAK+C,QAAQ3E,IAAK5D,GAAOqI,QAAS,EAAKC,GAAI,SAkDrE,CAAA,IAAA,OAvCmB,MAAA,WAAA,IAAA,EAAA,KAAdqC,EAAO,UAAA,OAAA,QAAA,IAAA,UAAA,IAAA,UAAA,GACL,OAAA,KAAKd,OAAQ/E,KAAM,WAClBS,OAAAA,QAAQC,QAAS/B,OAAOC,KAAM,EAAK6E,SAASK,OAAQ,SAAChF,GACpDA,OAA0B,IAA1BA,EAAIX,QAAS,EAAKqF,MACvB3E,IAAK,SAACC,GACJ+G,OAAS,IAATA,EACI/G,EAEAA,EAAIyE,QAAS,EAAKC,GAAI,WA+BhC,CAAA,IAAA,SAnBO1E,MAAAA,SAAAA,GAAK,IAAA,EAAA,KACL,OAAA,KAAKhD,IAAKgD,GAAKkB,KAAM,SAACpG,GAErB6G,OADP,EAAKgD,QAAQoB,WAAY,EAAKrB,GAAK1E,GAC5B2B,QAAQC,QAAS9G,OAgBzB,CAAA,IAAA,QAPQ,MAAA,WAAA,IAAA,EAAA,KACD,OAAA,KAAKgF,OAAQoB,KAAM,SAACpB,GAAS,IAAA,GAAA,EAAA,GAAA,EAAA,OAAA,EAAA,IACjBA,IAAAA,IAAM,EAANA,EAAAA,EAAM,OAAA,cAAA,GAAA,EAAA,EAAA,QAAA,MAAA,GAAA,EAAA,CAAbE,IAAAA,EAAa,EAAA,MACvB,EAAK1F,OAAQ0F,IAFqB,MAAA,GAAA,GAAA,EAAA,EAAA,EAAA,QAAA,IAAA,GAAA,MAAA,EAAA,QAAA,EAAA,SAAA,QAAA,GAAA,EAAA,MAAA,GAI5B2B,OAAAA,QAAQC,gBAEhB,EAAA,GAAA,QAAA,aAAA;;ACvXkCuC,aAAAA,OAAAA,eAAAA,QAAAA,aAAAA,CAAAA,OAAAA,IAAAA,QAAAA,oBAAAA,EAVpC,IAAA,EAAA,QAAA,kBAUoCA,SAAAA,EAAAA,GAAAA,OAAAA,EAAAA,mBAAAA,QAAAA,iBAAAA,OAAAA,SAAAA,SAAAA,GAAAA,cAAAA,GAAAA,SAAAA,GAAAA,OAAAA,GAAAA,mBAAAA,QAAAA,EAAAA,cAAAA,QAAAA,IAAAA,OAAAA,UAAAA,gBAAAA,IAAAA,GAAAA,SAAAA,EAAAA,EAAAA,GAAAA,KAAAA,aAAAA,GAAAA,MAAAA,IAAAA,UAAAA,qCAAAA,SAAAA,EAAAA,EAAAA,GAAAA,IAAAA,IAAAA,EAAAA,EAAAA,EAAAA,EAAAA,OAAAA,IAAAA,CAAAA,IAAAA,EAAAA,EAAAA,GAAAA,EAAAA,WAAAA,EAAAA,aAAAA,EAAAA,EAAAA,cAAAA,EAAAA,UAAAA,IAAAA,EAAAA,UAAAA,GAAAA,OAAAA,eAAAA,EAAAA,EAAAA,IAAAA,IAAAA,SAAAA,EAAAA,EAAAA,EAAAA,GAAAA,OAAAA,GAAAA,EAAAA,EAAAA,UAAAA,GAAAA,GAAAA,EAAAA,EAAAA,GAAAA,EAAAA,SAAAA,EAAAA,EAAAA,GAAAA,OAAAA,GAAAA,WAAAA,EAAAA,IAAAA,mBAAAA,EAAAA,EAAAA,GAAAA,EAAAA,SAAAA,EAAAA,GAAAA,QAAAA,IAAAA,EAAAA,MAAAA,IAAAA,eAAAA,6DAAAA,OAAAA,EAAAA,SAAAA,EAAAA,GAAAA,OAAAA,EAAAA,OAAAA,eAAAA,OAAAA,eAAAA,SAAAA,GAAAA,OAAAA,EAAAA,WAAAA,OAAAA,eAAAA,KAAAA,GAAAA,SAAAA,EAAAA,EAAAA,GAAAA,GAAAA,mBAAAA,GAAAA,OAAAA,EAAAA,MAAAA,IAAAA,UAAAA,sDAAAA,EAAAA,UAAAA,OAAAA,OAAAA,GAAAA,EAAAA,UAAAA,CAAAA,YAAAA,CAAAA,MAAAA,EAAAA,UAAAA,EAAAA,cAAAA,KAAAA,GAAAA,EAAAA,EAAAA,GAAAA,SAAAA,EAAAA,EAAAA,GAAAA,OAAAA,EAAAA,OAAAA,gBAAAA,SAAAA,EAAAA,GAAAA,OAAAA,EAAAA,UAAAA,EAAAA,IAAAA,EAAAA,GAAvB6C,IAAAA,EAAuB7C,SAAAA,GAciB,SAAA,EAAA,GAAtC1I,IAAAA,EAAAA,EAAAA,KAAAA,OAAO,IAAA,EAAA,GAA+B,EAA3B2I,EAAAA,EAAAA,QAAAA,OAAU,IAAA,EAAA,GAAiB,EAAbC,EAAAA,EAAAA,MAAAA,OAAQ,IAAA,EAAA,GAAK,EAC5C,OAD4C,EAAA,KAAA,GAC5C,EAAA,KAAA,EAAA,GAAA,KAAA,KAAA,CAAC5I,KAAAA,EAAM2I,QAAAA,EAASC,MAAAA,KAfWF,OAAAA,EAAAA,EAAAA,EAAAA,cAAAA,EAAAA,EAAAA,CAAAA,CAAAA,IAAAA,OAuB3B,MAAA,WAIAxC,YAHqB,IAAjB,KAAKgD,UACVA,KAAAA,QAAUhG,OAAOsI,gBAEhBtF,QAAQC,QAAS,UA3BUuC,EAAAA,GAAAA,QAAAA,eAAAA;;ACmTlC,aAAA,SAAA,EAAA,EAAA,GAAA,OAAA,EAAA,IAAA,EAAA,EAAA,IAAA,IAAA,SAAA,IAAA,MAAA,IAAA,UAAA,wDAAA,SAAA,EAAA,EAAA,GAAA,IAAA,EAAA,GAAA,GAAA,EAAA,GAAA,EAAA,OAAA,EAAA,IAAA,IAAA,IAAA,EAAA,EAAA,EAAA,OAAA,cAAA,GAAA,EAAA,EAAA,QAAA,QAAA,EAAA,KAAA,EAAA,QAAA,GAAA,EAAA,SAAA,GAAA,GAAA,IAAA,MAAA,GAAA,GAAA,EAAA,EAAA,EAAA,QAAA,IAAA,GAAA,MAAA,EAAA,QAAA,EAAA,SAAA,QAAA,GAAA,EAAA,MAAA,GAAA,OAAA,EAAA,SAAA,EAAA,GAAA,GAAA,MAAA,QAAA,GAAA,OAAA,EAAA,SAAA,EAAA,EAAA,GAAA,KAAA,aAAA,GAAA,MAAA,IAAA,UAAA,qCAAA,SAAA,EAAA,EAAA,GAAA,IAAA,IAAA,EAAA,EAAA,EAAA,EAAA,OAAA,IAAA,CAAA,IAAA,EAAA,EAAA,GAAA,EAAA,WAAA,EAAA,aAAA,EAAA,EAAA,cAAA,EAAA,UAAA,IAAA,EAAA,UAAA,GAAA,OAAA,eAAA,EAAA,EAAA,IAAA,IAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,GAAA,EAAA,EAAA,UAAA,GAAA,GAAA,EAAA,EAAA,GAAA,EAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,eAAA,EAvTW+C,IAAAA,EAuTX,WArS2E,SAAA,EAAA,GAA9DzL,IAAAA,EAAAA,EAAAA,KAAAA,OAAO,IAAA,EAAA,GAAuD,EAAnD2I,EAAAA,EAAAA,QAAAA,OAAU,IAAA,EAAA,GAAyC,EAArCC,EAAAA,EAAAA,MAAAA,OAAQ,IAAA,EAAA,GAA6B,EAAzB7C,EAAAA,EAAAA,MAAAA,OAAQ,IAAA,EAAA,GAAiB,EAAbpF,EAAAA,EAAAA,MAAAA,OAAQ,IAAA,EAAA,GAAK,EAAA,EAAA,KAAA,GACtEX,KAAAA,KAAOA,EACP2I,KAAAA,QAAUA,EACVC,KAAAA,MAAQA,EACR7C,KAAAA,MAAQA,EACRpF,KAAAA,MAAQA,EAERkI,KAAAA,SAAW,GAEK,KAAjB,KAAKF,QACHG,KAAAA,eAAiB,EAEjBA,KAAAA,eAAiBC,SAAUJ,EAAQK,QAAS,MAAO,KAyRzD,OAAA,EAAA,EAAA,CAAA,CAAA,IAAA,OAhRO,MAAA,WAAA,IAAA,EAAA,KAEH,MAAc,KAAd,KAAKhJ,MACRmL,QAAQzE,MAAO,iDACRR,QAAQE,UAGG,KAAf,KAAKwC,OACRuC,QAAQzE,MAAO,kDACRR,QAAQE,UAGZ,KAAK8C,mBAAmBwC,YACpBxF,QAAQC,QAAS,MACd,KAAK+C,mBAAmBhD,QAC3B,KAAKgD,SAEPA,KAAAA,QAAU,IAAIhD,QAAS,SAACC,EAASC,GACjC+C,IAAAA,EAAkB,GAChBD,EAAUhG,OAAOyI,UAAUnB,KAAM,EAAKxK,KAAM,EAAK8I,gBAEvDI,EAAQzC,QAAU,SAAChH,GAClB2G,EAAQ3G,IAGTyJ,EAAQ0C,UAAY,SAACnM,GACpB0G,EAAS,CAAE+C,QAASzJ,EAAMC,OAAO8G,OAAQqC,SAAUM,KAGpDD,EAAQ2C,gBAAkB,SAACpM,GAGtBA,GAAAA,EAAMgK,WAAa,EAGwB,IADxCb,IAAAA,EAAQnJ,EAAMC,OAAO8G,OAAOsF,kBAAmB,EAAKlD,MAAO,EAAK7C,OAClD3B,EAAAA,OAAOC,KAAM,EAAK1D,OAAQ,EAAA,EAAA,EAAA,EAAA,OAAA,IAAA,CAAnCA,IAAAA,EAAN,EAAA,GACJiI,EAAMmD,YAAa,EAAKpL,MAAMA,GAAOX,KAAM,EAAKW,MAAMA,GAAOyG,MAAO,EAAKzG,MAAMA,GAAOoF,WAEjF,CAEA4D,IAAAA,EAAoBvF,OAAOC,KAAM,EAAKwE,UAAUW,OAIhDI,EAAYD,EAAkBE,UAAW,SAAAC,GAC9BA,IAATC,EAD4C,EACnCD,EAAE7K,MAAO,MAD0B,GAAA,GAE5C8J,OAAAA,SAAUgB,KAAStK,EAAMgK,aAG7BG,GAAa,IAChBT,EAAkBQ,EAAkBK,MAAOJ,GAAWL,OAAQ,SAACO,GAC1CA,IADgD,EAAA,EAChDA,EAAE7K,MAAO,MADuC,GAC7D8K,EAD6D,EAAA,GACxDE,EADwD,EAAA,GAE7DlB,OAAAA,SAAUgB,GAAO,EAAKjB,gBAAkBC,SAAUkB,IAAS,EAAKnB,kBAMtDrJ,EAAMC,OAAOsM,YACrBxM,iBAAkB,UAAW,WACxC2G,EAAS,CAAE+C,QAASzJ,EAAMC,OAAO8G,OAAQqC,SAAUM,SAGnD1D,KAAM,SAA2B,GAAxByD,IAAAA,EAAAA,EAAAA,QAASL,EAAAA,EAAAA,SAEb,OADP,EAAKK,QAAUA,EACR,IAAIhD,QAAS,SAACC,GAEpB,EAAKoE,SAAU1B,EADH,WAAM1C,OAAAA,EAAS+C,IACGzJ,WAGzB,KAAKyJ,WA0Mb,CAAA,IAAA,MA7LuB,MAAA,WAAA,IAAA,EAAA,KAAnB3E,EAAM,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,KAAMlF,EAAO,UAAA,OAAA,EAAA,UAAA,QAAA,EAChB,OAAA,KAAKmL,OAAQ/E,KAAM,WAClB,OAAA,IAAIS,QAAS,SAACC,EAASC,GACvB4F,IACFC,EADED,EAAc,EAAK9C,QAAQ8C,YAAa,EAAKpD,MAAO,aAAasD,YAAa,EAAKtD,QAGxFqD,EADW,OAAR1H,EACEyH,EAAYG,IAAK/H,OAAOkB,OAAQ,GAAI,CAAC2D,GAAI1E,GAAMlF,IAE/C2M,EAAYrN,IAAKU,IAEpBG,iBAAkB,UAAW,SAACC,GAAY0G,EAAS,CAAC5B,IAAK9E,EAAMC,OAAO8G,OAAQnH,MAAOA,MACxF4M,EAAGzM,iBAAkB,QAAS,SAACC,GAAW2G,EAAQ3G,WAkLpD,CAAA,IAAA,SAnKO8E,MAAAA,SAAAA,EAAKlF,GAAO,IAAA,EAAA,KACZ,OAAA,KAAKkC,IAAKgD,GAAKkB,KAAM,SAACgF,GAGxB,YAAwB,IAAjBA,EACH,EAAKY,IAAK9G,EAAKlF,GAEhB,IAAI6G,QAAS,SAACC,EAASC,GACvB4F,IACAC,EADc,EAAK/C,QAAQ8C,YAAa,EAAKpD,MAAO,aAAasD,YAAa,EAAKtD,OAClEuD,IAAK/H,OAAOkB,OAAQ,GAAImF,EAAcpL,IAC7D4M,EAAGzM,iBAAkB,UAAW,SAACC,GAAW0G,EAAS,CAAC5B,IAAK9E,EAAMC,OAAO8G,OAAQnH,MAAOA,MACvF4M,EAAGzM,iBAAkB,QAAS,SAACC,GAAW2G,EAAQ3G,WAwJpD,CAAA,IAAA,MA5II8E,MAAAA,SAAAA,GAAK,IAAA,EAAA,KACF,OAAA,KAAKiG,OAAQ/E,KAAM,WAClB,OAAA,IAAIS,QAAS,SAACC,EAASC,GACvB4F,IACAC,EADc,EAAK/C,QAAQ8C,YAAa,EAAKpD,OAAOsD,YAAa,EAAKtD,OACrDrH,IAAKgD,GAE5B0H,EAAGzM,iBAAkB,UAAW,SAACC,GAAW0G,EAAS1G,EAAMC,OAAO8G,UAClEyF,EAAGzM,iBAAkB,QAAS,SAACC,GAAW2G,EAAQ3G,WAqIpD,CAAA,IAAA,SA3HS,MAAA,WAAA,IAAA,EAAA,KACF,OAAA,KAAK+K,OAAQ/E,KAAM,WAClB,OAAA,IAAIS,QAAS,SAACC,EAASC,GACvB4F,IACAC,EADc,EAAK/C,QAAQ8C,YAAa,EAAKpD,OAAOsD,YAAa,EAAKtD,OACrDwD,SAEvBH,EAAGzM,iBAAkB,UAAW,SAACC,GAAW0G,EAAS1G,EAAMC,OAAO8G,UAClEyF,EAAGzM,iBAAkB,QAAS,SAACC,GAAW2G,EAAQ3G,WAoHpD,CAAA,IAAA,WAxGS8E,MAAAA,SAAAA,GACF,OAAA,KAAKhD,IAAKgD,GAAKkB,KAAM,SAACpB,GACxBA,IAAAA,EAAK2D,SAAUzD,GAGX2B,OAAAA,QAAQE,SAFfF,QAAQC,cAqGV,CAAA,IAAA,UArFQsD,MAAAA,SAAAA,EAAYwB,EAAY1L,GAEzB2G,OADF2C,KAAAA,SAAYE,GAAAA,OAAAA,SAAUU,EAAWT,QAAS,MAAO,KAASD,MAAAA,OAAAA,SAAUkC,EAAWjC,QAAS,MAAO,OAAUzJ,EACvG2G,QAAQC,YAmFf,CAAA,IAAA,WA9ESgD,MAAAA,SAAAA,EAAiBhD,EAAS1G,GAAO,IAAA,EAAA,KAEtC0J,EAAgB9K,OAAS,EACvBwK,KAAAA,SAASM,EAAgB,IAAIrJ,KAAM,KAAM,KAAML,GAAOgG,KAAM,WAChE,EAAK8E,SAAUpB,EAAgBa,MAAO,GAAI7D,EAAS1G,KACjDyL,MAAO,SAACvL,GAAMwL,OAAAA,QAAQzE,MAAO/G,KAEhCwG,MAuED,CAAA,IAAA,SA7DS,MAAA,WACFD,OAAAA,QAAQE,WA4Df,CAAA,IAAA,MAnDM,MAAA,WACCF,OAAAA,QAAQE,WAkDf,CAAA,IAAA,OA1CO,MAAA,WAAA,IAAA,EAAA,KACA,OAAA,KAAKoE,OAAQ/E,KAAM,WAClB,OAAA,IAAIS,QAAS,SAACC,EAASC,GACvB4F,IACAC,EADc,EAAK/C,QAAQ8C,YAAa,EAAKpD,MAAO,aAAasD,YAAa,EAAKtD,OAClEyD,aACvBJ,EAAGzM,iBAAkB,UAAW,SAACC,GAAW0G,EAAS1G,EAAMC,OAAO8G,UAAW,GAC7EyF,EAAGzM,iBAAkB,QAAS,SAACC,GAAW2G,EAAQ3G,KAAU,SAoC9D,CAAA,IAAA,SAzBO8E,MAAAA,SAAAA,GAAK,IAAA,EAAA,KACL,OAAA,KAAKhD,IAAKgD,GAAKkB,KAAM,SAACpG,GACrB,OAAA,IAAI6G,QAAS,SAACC,EAASC,GACvB4F,IACAC,EADc,EAAK/C,QAAQ8C,YAAa,EAAKpD,MAAO,aAAasD,YAAa,EAAKtD,OAClE0D,OAAQ/H,GAC/B0H,EAAGzM,iBAAkB,UAAW,WAAO2G,EAAS9G,KAAU,GAC1D4M,EAAGzM,iBAAkB,QAAS,SAACC,GAAW2G,EAAQ3G,KAAU,SAmB9D,CAAA,IAAA,QATQ,MAAA,WAAA,IAAA,EAAA,KACD,OAAA,KAAK+K,OAAQ/E,KAAM,WAClB,OAAA,IAAIS,QAAS,SAACC,EAASC,GACvB4F,IACAC,EADc,EAAK/C,QAAQ8C,YAAa,EAAKpD,MAAO,aAAasD,YAAa,EAAKtD,OAClE2D,QACvBN,EAAGzM,iBAAkB,UAAW,WAAO2G,MAAc,GACrD8F,EAAGzM,iBAAkB,QAAS,SAACC,GAAW2G,EAAQ3G,KAAU,WAG9D,EAAA,GAAA,QAAA,UAAA;;AC5GA,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,mBAAA,EAjNF,IAAA,EAAA,QAAA,gBAiNE,SAAA,EAAA,EAAA,GAAA,KAAA,aAAA,GAAA,MAAA,IAAA,UAAA,qCAAA,SAAA,EAAA,EAAA,GAAA,IAAA,IAAA,EAAA,EAAA,EAAA,EAAA,OAAA,IAAA,CAAA,IAAA,EAAA,EAAA,GAAA,EAAA,WAAA,EAAA,aAAA,EAAA,EAAA,cAAA,EAAA,UAAA,IAAA,EAAA,UAAA,GAAA,OAAA,eAAA,EAAA,EAAA,IAAA,IAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,GAAA,EAAA,EAAA,UAAA,GAAA,GAAA,EAAA,EAAA,GAAA,EAvMW+M,IAAAA,EAuMX,WAtK8E,SAAA,EAAA,GAAjExM,IAAAA,EAAAA,EAAAA,KAAAA,OAAO,IAAA,EAAA,GAA0D,EAAtD2I,EAAAA,EAAAA,QAAAA,OAAU,IAAA,EAAA,GAA4C,EAAxCC,EAAAA,EAAAA,MAAAA,OAAQ,IAAA,EAAA,GAAgC,EAA5B6D,EAAAA,EAAAA,SAAAA,OAAW,IAAA,EAAA,GAAiB,EAAb1G,EAAAA,EAAAA,MAAAA,OAAQ,IAAA,EAAA,GAAK,EAAA,EAAA,KAAA,GACzE/F,KAAAA,KAAOA,EACP2I,KAAAA,QAAUA,EACVC,KAAAA,MAAQA,EACR6D,KAAAA,SAAcA,GAAAA,OAAAA,GAAW7D,OAAAA,EAA9B,KACK7C,KAAAA,MAAQA,EAiKb,OAAA,EAAA,EAAA,CAAA,CAAA,IAAA,OAzJO,MAAA,WAIAG,YAHqB,IAAjB,KAAKgD,UACVA,KAAAA,QAAUhF,EAAf,SAEMgC,QAAQC,QAAS,QAqJxB,CAAA,IAAA,MA3II5B,MAAAA,SAAAA,EAAKlF,GAAO,IAAA,EAAA,KACT,OAAA,KAAKmL,OAAQ/E,KAAM,WAClB,OAAA,EAAKyD,QAAQ1D,KAAM,EAAKiH,SAAWlI,EAAKlF,EAAO,EAAK0G,WAyI5D,CAAA,IAAA,SA5HOxB,MAAAA,SAAAA,EAAKlF,GAAO,IAAA,EAAA,KACZ,OAAA,KAAKkC,IAAKgD,GAAKkB,KAAM,SAACgF,GACrB,OAAA,EAAKvB,QAAQiD,IAAK,EAAKM,SAAWlI,EAAKH,OAAOkB,OAAQ,GAAImF,EAAcpL,GAAQ,EAAK0G,OAAON,KAAM,SAACC,GAClGA,OAAAA,EAASC,aAyHlB,CAAA,IAAA,MA7GIpB,MAAAA,SAAAA,GAAK,IAAA,EAAA,KACF,OAAA,KAAKiG,OAAQ/E,KAAM,WAClB,OAAA,EAAKyD,QAAQvD,KAAM,EAAK8G,SAAWlI,EAAK,GAAI,EAAKwB,WA2GzD,CAAA,IAAA,SAlGS,MAAA,WAAA,IAAA,EAAA,KACF,OAAA,KAAKyE,OAAQ/E,KAAM,WAClB,OAAA,EAAKyD,QAAQvD,KAAM,EAAK8G,SAAU,GAAI,EAAK1G,WAgGnD,CAAA,IAAA,WArFSxB,MAAAA,SAAAA,GACF,OAAA,KAAKF,OAAQoB,KAAM,SAACpB,GACtBA,IAAAA,EAAK2D,SAAUzD,GAGX2B,OAAAA,QAAQE,SAFfF,QAAQC,cAkFV,CAAA,IAAA,UArEU,MAAA,WACHD,OAAAA,QAAQE,WAoEf,CAAA,IAAA,SA3DS,MAAA,WACFF,OAAAA,QAAQE,WA0Df,CAAA,IAAA,MAjDM,MAAA,WACCF,OAAAA,QAAQE,WAgDf,CAAA,IAAA,OAhCO,MAAA,WAAA,IAAA,EAAA,KACA,OAAA,KAAKoE,OAAQ/E,KAAM,WAClB,OAAA,EAAKyD,QAAQvD,KAAM,EAAK8G,SAAU,CAACpI,MAAM,GAAO,EAAK0B,WA8B7D,CAAA,IAAA,SAnBOxB,MAAAA,SAAAA,GAAK,IAAA,EAAA,KACL,OAAA,KAAKiG,OAAQ/E,KAAM,WAClB,OAAA,EAAKyD,QAAQoD,OAAQ,EAAKG,SAAWlI,EAAK,GAAI,EAAKwB,OAAON,KAAM,SAACC,GAChEQ,OAAAA,QAAQC,QAAS5B,EAAKmB,EAASC,cAgBxC,CAAA,IAAA,QAJQ,MAAA,WAAA,IAAA,EAAA,KACD,OAAA,KAAK6E,OAAQ/E,KAAM,WAClB,OAAA,EAAKyD,QAAQoD,OAAQ,EAAKG,SAAU,GAAI,EAAK1G,aAErD,EAAA,GAAA,QAAA,cAAA;;ACqHA,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,MAAA,QAAA,kBAAA,EAtUF,IAAA,EAAA,QAAA,+BACA,EAAA,QAAA,iCACA,EAAA,QAAA,4BACA,EAAA,QAAA,gCAmUE,SAAA,EAAA,EAAA,GAAA,KAAA,aAAA,GAAA,MAAA,IAAA,UAAA,qCAAA,SAAA,EAAA,EAAA,GAAA,IAAA,IAAA,EAAA,EAAA,EAAA,EAAA,OAAA,IAAA,CAAA,IAAA,EAAA,EAAA,GAAA,EAAA,WAAA,EAAA,aAAA,EAAA,EAAA,cAAA,EAAA,UAAA,IAAA,EAAA,UAAA,GAAA,OAAA,eAAA,EAAA,EAAA,IAAA,IAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,GAAA,EAAA,EAAA,UAAA,GAAA,GAAA,EAAA,EAAA,GAAA,EA9TK,IAAM2G,EAAe,CAC3BhE,aAAAA,EAD2B,aAE3B6C,eAAAA,EAF2B,eAG3BE,UAAAA,EAH2B,UAI3Be,cAAAA,EAAAA,eA0TC,QAAA,aAAA,EA7SWG,IAAAA,EA6SX,WA7RqE,SAAA,IAAzDC,IAAAA,EAAUF,UAAAA,OAAAA,QAAAA,IAAAA,UAAAA,GAAAA,UAAAA,GAAAA,EAAahE,aAAcmE,EAAgB,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,GAAI,EAAA,KAAA,GAEhEC,KAAAA,eAAiB1I,OAAOkB,OAAQ,GAAI,CAACtF,KAAM,GAAI2I,QAAS,GAAIC,MAAO,IAAKiE,GAGxED,KAAAA,QAAU,IAAIA,EAAS,KAAKE,gBAI5BC,KAAAA,UAAY,CACN,OAAA,GACA,OAAA,GACA,OAAA,IAMNC,KAAAA,gBAAkB,GA2QvB,OAAA,EAAA,EAAA,CAAA,CAAA,IAAA,gBA/P6B,MAAA,WAAfC,IAAAA,EAAS,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,KACnBA,GAAW,OAAXA,EAII,OAAA,KAAKH,eAHPA,KAAAA,eAAiB1I,OAAOkB,OAAQ,GAAI,KAAKwH,eAAgBG,GACzDL,KAAAA,QAAQC,cAAeI,KA4P7B,CAAA,IAAA,OAjPO,MAAA,WAAA,IAAA,EAAA,KACA,OAAA,KAAKL,QAAQpC,OAAQ/E,KAAM,WAC1BS,OAAAA,QAAQC,QAAS,OA+OzB,CAAA,IAAA,MApOI5B,MAAAA,SAAAA,EAAKlF,GAE4C,IAFrC,IAAA,EAAA,KAEC+E,EAAAA,OAAOC,KAAM,KAAK2I,iBAAkB,EAAA,EAAA,EAAA,EAAA,OAAA,IAAA,CAA1C/D,IAAAA,EAAN,EAAA,GACwC,mBAAjC,KAAK+D,gBAAgB/D,GAAIoC,MACnChM,EAAQ,KAAK2N,gBAAgB/D,GAAIoC,IAAIvL,KAAM,KAAMyE,EAAKlF,IAIjD,OAAA,KAAKuN,QAAQvB,IAAK9G,EAAKlF,GAAOoG,KAAM,SAAkB,GAAhBlB,IAAAA,EAAAA,EAAAA,IAAKlF,EAAAA,EAAAA,MAAW,GAAA,EAAA,GAAA,EAAA,OAAA,EAAA,IACrC,IAAA,IAAuB,EAAvB,EAAA,EAAK0N,UAAUG,OAAQ,OAAA,cAAA,GAAA,EAAA,EAAA,QAAA,MAAA,GAAA,EAAA,CAAA,EAAA,MACpCpN,KAAM,KAAMyE,EAAKlF,IAFiC,MAAA,GAAA,GAAA,EAAA,EAAA,EAAA,QAAA,IAAA,GAAA,MAAA,EAAA,QAAA,EAAA,SAAA,QAAA,GAAA,EAAA,MAAA,GAIrD6G,OAAAA,QAAQC,QAAS,CAAC5B,IAAAA,EAAKlF,MAAAA,QAwN/B,CAAA,IAAA,SA3MOkF,MAAAA,SAAAA,EAAKlF,GAEyC,IAFlC,IAAA,EAAA,KAEF+E,EAAAA,OAAOC,KAAM,KAAK2I,iBAAkB,EAAA,EAAA,EAAA,EAAA,OAAA,IAAA,CAA1C/D,IAAAA,EAAN,EAAA,GACwC,mBAAjC,KAAK+D,gBAAgB/D,GAAIoC,MACnChM,EAAQ,KAAK2N,gBAAgB/D,GAAIoC,IAAIvL,KAAM,KAAMyE,EAAKlF,IAIjD,OAAA,KAAKuN,QAAQO,OAAQ5I,EAAKlF,GAAOoG,KAAM,SAAkB,GAAhBlB,IAAAA,EAAAA,EAAAA,IAAKlF,EAAAA,EAAAA,MAAW,GAAA,EAAA,GAAA,EAAA,OAAA,EAAA,IACxC,IAAA,IAAuB,EAAvB,EAAA,EAAK0N,UAAUI,OAAQ,OAAA,cAAA,GAAA,EAAA,EAAA,QAAA,MAAA,GAAA,EAAA,CAAA,EAAA,MACpCrN,KAAM,KAAMyE,EAAKlF,IAFoC,MAAA,GAAA,GAAA,EAAA,EAAA,EAAA,QAAA,IAAA,GAAA,MAAA,EAAA,QAAA,EAAA,SAAA,QAAA,GAAA,EAAA,MAAA,GAIxD6G,OAAAA,QAAQC,QAAS,CAAC5B,IAAAA,EAAKlF,MAAAA,QA+L/B,CAAA,IAAA,MApLIkF,MAAAA,SAAAA,GAAK,IAAA,EAAA,KACF,OAAA,KAAKqI,QAAQrL,IAAKgD,GAAKkB,KAAM,SAACpG,GAEiB,IAApC+E,IAAAA,EAAAA,OAAOC,KAAM,EAAK2I,iBAAkB,EAAA,EAAA,EAAA,EAAA,OAAA,IAAA,CAA1C/D,IAAAA,EAAN,EAAA,GACwC,mBAAjC,EAAK+D,gBAAgB/D,GAAI1H,MACnClC,EAAQ,EAAK2N,gBAAgB/D,GAAI1H,IAAIzB,KAAM,KAAMyE,EAAKlF,IAGjDA,OAAAA,MA4KR,CAAA,IAAA,SAnKS,MAAA,WAAA,IAAA,EAAA,KACF,OAAA,KAAKuN,QAAQR,SAAU3G,KAAM,SAACoF,GAEI,IAAtBzG,IAAAA,EAAAA,OAAOC,KAAMwG,GAAS,EAAA,EAAA,EAAA,EAAA,OAAA,IACc,IAD3CtG,IAAAA,EAAN,EAAA,GACaH,EAAAA,OAAOC,KAAM,EAAK2I,iBAAkB,EAAA,EAAA,EAAA,EAAA,OAAA,IAAA,CAA1C/D,IAAAA,EAAN,EAAA,GACwC,mBAAjC,EAAK+D,gBAAgB/D,GAAI1H,MACnCsJ,EAAOtG,GAAO,EAAKyI,gBAAgB/D,GAAI1H,IAAIzB,KAAM,KAAMyE,EAAKsG,EAAOtG,KAI/DsG,OAAAA,MAyJR,CAAA,IAAA,OA9IKtL,MAAAA,SAAAA,GAAU,IAAA,EAAA,KACR,OAAA,KAAK6M,SAAU3G,KAAM,SAACoF,GAEU,IADhCC,IAAAA,EAAW,GACD1G,EAAAA,OAAOC,KAAMwG,GAAS,EAAA,EAAA,EAAA,EAAA,OAAA,IAAA,CAA3B3I,IAAAA,EAAN,EAAA,GACJ4I,EAASC,KAAMxL,EAASO,KAAM,EAAMoC,EAAG2I,EAAO3I,KAExCgE,OAAAA,QAAQ8E,IAAKF,OAwIrB,CAAA,IAAA,WA7HSvG,MAAAA,SAAAA,GACF,OAAA,KAAKqI,QAAQQ,SAAU7I,KA4H9B,CAAA,IAAA,UAhHQkF,MAAAA,SAAAA,EAAYwB,EAAY1L,GAAU,IAAA,EAAA,KACnC,OAAA,KAAKqN,QAAQS,QAAS5D,EAAYwB,EAAY1L,GAAUkG,KAAM,WAC7DS,OAAAA,QAAQC,QAAS,OA8GzB,CAAA,IAAA,SApGOnG,MAAAA,SAAAA,GACA,OAAA,KAAK4M,QAAQU,OAAQtN,KAmG5B,CAAA,IAAA,WA3FST,MAAAA,SAAAA,GACJwN,KAAAA,UAAUG,OAAOnC,KAAMxL,KA0F5B,CAAA,IAAA,WAlFSA,MAAAA,SAAAA,GACJwN,KAAAA,UAAUI,OAAOpC,KAAMxL,KAiF5B,CAAA,IAAA,WAzESA,MAAAA,SAAAA,GACJwN,KAAAA,UAAUT,OAAOvB,KAAMxL,KAwE5B,CAAA,IAAA,oBA5DkC,MAAA,SAAA,GAAf0J,IAAAA,EAAAA,EAAAA,GAAI1H,EAAAA,EAAAA,IAAK8J,EAAAA,EAAAA,IACvB2B,KAAAA,gBAAgB/D,GAAM,CAC1BA,GAAAA,EACA1H,IAAAA,EACA8J,IAAAA,KAwDD,CAAA,IAAA,uBA/CqBpC,MAAAA,SAAAA,UACd,KAAK+D,gBAAgB/D,KA8C5B,CAAA,IAAA,MApCItI,MAAAA,SAAAA,GAAO2K,IAAAA,EAAO,UAAA,OAAA,QAAA,IAAA,UAAA,IAAA,UAAA,GACX,OAAA,KAAKsB,QAAQrI,IAAK5D,EAAO2K,KAmChC,CAAA,IAAA,OA1BmB,MAAA,WAAdA,IAAAA,EAAO,UAAA,OAAA,QAAA,IAAA,UAAA,IAAA,UAAA,GACL,OAAA,KAAKsB,QAAQvI,KAAMiH,KAyB1B,CAAA,IAAA,SAhBO/G,MAAAA,SAAAA,GAAK,IAAA,EAAA,KACL,OAAA,KAAKqI,QAAQ/N,OAAQ0F,GAAKkB,KAAM,SAACpG,GAAU,IAAA,GAAA,EAAA,GAAA,EAAA,OAAA,EAAA,IAE1B,IAAA,IAAuB,EAAvB,EAAA,EAAK0N,UAAUT,OAAQ,OAAA,cAAA,GAAA,EAAA,EAAA,QAAA,MAAA,GAAA,EAAA,CAAA,EAAA,MACpCxM,KAAM,KAAMyE,EAAKlF,IAHsB,MAAA,GAAA,GAAA,EAAA,EAAA,EAAA,QAAA,IAAA,GAAA,MAAA,EAAA,QAAA,EAAA,SAAA,QAAA,GAAA,EAAA,MAAA,QAelD,CAAA,IAAA,QAFQ,MAAA,WACD,OAAA,KAAKuN,QAAQL,YACpB,EAAA,GAAA,QAAA,MAAA;;ACzMA,aAAA,SAAA,EAAA,EAAA,GAAA,KAAA,aAAA,GAAA,MAAA,IAAA,UAAA,qCAAA,SAAA,EAAA,EAAA,GAAA,IAAA,IAAA,EAAA,EAAA,EAAA,EAAA,OAAA,IAAA,CAAA,IAAA,EAAA,EAAA,GAAA,EAAA,WAAA,EAAA,aAAA,EAAA,EAAA,cAAA,EAAA,UAAA,IAAA,EAAA,UAAA,GAAA,OAAA,eAAA,EAAA,EAAA,IAAA,IAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,GAAA,EAAA,EAAA,UAAA,GAAA,GAAA,EAAA,EAAA,GAAA,EAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,UAAA,EAzHWgB,IAAAA,EAyHX,WAAA,SAAA,IAAA,EAAA,KAAA,GAAA,OAAA,EAAA,EAAA,KAAA,CAAA,CAAA,IAAA,aAjHkBC,MAAAA,SAAAA,GACXA,OAAAA,EAAKxE,QAAS,SAAU,SAACyE,GACxBA,OAAAA,EAAIC,OAAQ,GAAGC,cAAiBF,EAAIG,OAAQ,GAAG1G,kBA+GvD,CAAA,IAAA,SApGc3C,MAAAA,SAAAA,EAAKiJ,GACfK,IAAAA,EAAS,GACTC,EAAWN,EAAK5J,QAASW,GAKtBsJ,OAJW,IAAdC,IACHA,GAAYvJ,EAAIlG,OAChBwP,EAASL,EAAKI,OAAQE,EAAUN,EAAKnP,OAASyP,IAExCD,IA6FP,CAAA,IAAA,YApFmB,MAAA,WACf3K,OAAAA,OAAO6K,aACH7K,OAAO6K,eAAgBC,WACpB7P,SAAS8P,WAAwC,WAA3B9P,SAAS8P,UAAUnI,KAC5C3H,SAAS8P,UAAUC,cAAeV,UADnC,IAiFP,CAAA,IAAA,SArEcjJ,MAAAA,SAAAA,EAAKiJ,GACfW,IAAAA,EAAS,GACPL,EAAWN,EAAK5J,QAASW,GAIxB4J,OAHU,GAAbL,IACHK,EAASX,EAAKI,OAAQ,EAAGE,IAEnBK,IA+DP,CAAA,IAAA,WAtDgBX,MAAAA,SAAAA,GACVY,IAAAA,EAAQ,CACb,WACA,UACA,SACA,SACA,SACA,SACA,WACA,UACA,SACA,SACA,IACA,IACA,IACA,IACA,IACA,YACA,WACA,YACA,sBACA,SACA,KAGKC,EAAe,CACpB,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,GACA,GACA,GACA,GACA,GACA,KAGI,IAAA,IAAM1N,KAASyN,EACnBZ,EAAOA,EAAKxE,QAAQ,IAAIsF,OAAOF,EAAMzN,GAAQ,KAAM0N,EAAa1N,IAG1D6M,OAAAA,MACP,EAAA,GAAA,QAAA,KAAA;;AC9EA,aAAA,SAAA,EAAA,EAAA,GAAA,KAAA,aAAA,GAAA,MAAA,IAAA,UAAA,qCAAA,SAAA,EAAA,EAAA,GAAA,IAAA,IAAA,EAAA,EAAA,EAAA,EAAA,OAAA,IAAA,CAAA,IAAA,EAAA,EAAA,GAAA,EAAA,WAAA,EAAA,aAAA,EAAA,EAAA,cAAA,EAAA,UAAA,IAAA,EAAA,UAAA,GAAA,OAAA,eAAA,EAAA,EAAA,IAAA,IAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,GAAA,EAAA,EAAA,UAAA,GAAA,GAAA,EAAA,EAAA,GAAA,EAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,UAAA,EA3CWe,IAAAA,EA2CX,WAAA,SAAA,IAAA,EAAA,KAAA,GAAA,OAAA,EAAA,EAAA,KAAA,CAAA,CAAA,IAAA,YA/BiBC,MAAAA,SAAAA,EAAUC,GACvB,IADmCC,IAAAA,IAAAA,EAAAA,UAAAA,OAAAA,EACnC,IAAA,MAAA,EAAA,EAAA,EAAA,EAAA,GAAA,EAAA,EAAA,EAAA,EAAA,IADmCA,EACnC,EAAA,GAAA,UAAA,GAEGlI,IAAAA,EAASgI,EAASG,MAAOF,EAASC,GAGpClI,OAAAA,aAAkBN,QACdM,EAEAN,QAAQC,QAASK,GAExB,MAAO7G,GACDuG,OAAAA,QAAQE,OAAQzG,MAmBxB,CAAA,IAAA,OAVc,MAAA,WACVuD,GAAAA,OAAO0L,OACH,OAAC,CAAC,MAAM,KAAK,KAAK,KAAK,MAAM5F,QAAQ,SAAU,SAAC6F,GACtD,OAACA,EAAID,OAAOE,gBAAgB,IAAIC,WAAW,IAAI,GAAK,IAAMF,EAAI,GAAGb,SAAU,MAGtEgB,IAAAA,EAAW,WAAMpM,OAAAA,KAAKqM,MAA6B,OAArB,EAAIrM,KAAKsM,WAAqBlB,SAAU,IAAImB,UAAW,IACpFH,OAAAA,IAAcA,IAAc,IAAMA,IAAc,IAAMA,IAAc,IAC3EA,IAAc,IAAMA,IAAcA,IAAcA,QAEjD,EAAA,GAAA,QAAA,KAAA;;AC7CF,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IARA,IAAA,EAAA,QAAA,aAAA,OAAA,KAAA,GAAA,QAAA,SAAA,GAAA,YAAA,GAAA,eAAA,GAAA,OAAA,eAAA,QAAA,EAAA,CAAA,YAAA,EAAA,IAAA,WAAA,OAAA,EAAA,QACA,IAAA,EAAA,QAAA,oBAAA,OAAA,KAAA,GAAA,QAAA,SAAA,GAAA,YAAA,GAAA,eAAA,GAAA,OAAA,eAAA,QAAA,EAAA,CAAA,YAAA,EAAA,IAAA,WAAA,OAAA,EAAA,QACA,IAAA,EAAA,QAAA,cAAA,OAAA,KAAA,GAAA,QAAA,SAAA,GAAA,YAAA,GAAA,eAAA,GAAA,OAAA,eAAA,QAAA,EAAA,CAAA,YAAA,EAAA,IAAA,WAAA,OAAA,EAAA,QACA,IAAA,EAAA,QAAA,kBAAA,OAAA,KAAA,GAAA,QAAA,SAAA,GAAA,YAAA,GAAA,eAAA,GAAA,OAAA,eAAA,QAAA,EAAA,CAAA,YAAA,EAAA,IAAA,WAAA,OAAA,EAAA,QACA,IAAA,EAAA,QAAA,iBAAA,OAAA,KAAA,GAAA,QAAA,SAAA,GAAA,YAAA,GAAA,eAAA,GAAA,OAAA,eAAA,QAAA,EAAA,CAAA,YAAA,EAAA,IAAA,WAAA,OAAA,EAAA,QACA,IAAA,EAAA,QAAA,iBAAA,OAAA,KAAA,GAAA,QAAA,SAAA,GAAA,YAAA,GAAA,eAAA,GAAA,OAAA,eAAA,QAAA,EAAA,CAAA,YAAA,EAAA,IAAA,WAAA,OAAA,EAAA,QACA,IAAA,EAAA,QAAA,eAAA,OAAA,KAAA,GAAA,QAAA,SAAA,GAAA,YAAA,GAAA,eAAA,GAAA,OAAA,eAAA,QAAA,EAAA,CAAA,YAAA,EAAA,IAAA,WAAA,OAAA,EAAA,QACA,IAAA,EAAA,QAAA,cAAA,OAAA,KAAA,GAAA,QAAA,SAAA,GAAA,YAAA,GAAA,eAAA,GAAA,OAAA,eAAA,QAAA,EAAA,CAAA,YAAA,EAAA,IAAA,WAAA,OAAA,EAAA,QACA,IAAA,EAAA,QAAA,cAAA,OAAA,KAAA,GAAA,QAAA,SAAA,GAAA,YAAA,GAAA,eAAA,GAAA,OAAA,eAAA,QAAA,EAAA,CAAA,YAAA,EAAA,IAAA,WAAA,OAAA,EAAA","file":"artemis.min.map","sourceRoot":"..","sourcesContent":["/**\n * ==============================\n * DOM\n * ==============================\n */\n\n/**\n * Simple DOM manipulation functions\n *\n * @class\n */\nexport class DOM {\n\n\t/**\n\t * Create a new DOM object\n\t *\n\t * @constructor\n\t * @param  {string|Object|array} selector - Selector or DOM element to use\n\t * @return {DOM} - New instance of DOM\n\t */\n\tconstructor (selector) {\n\t\tif (typeof selector == 'string') {\n\t\t\tthis.collection = document.querySelectorAll (selector);\n\t\t\tthis.length = this.collection.length;\n\t\t} else if (selector instanceof NodeList) {\n\t\t\tthis.collection = selector;\n\t\t\tthis.length = selector.length;\n\t\t} else if (typeof selector == 'object') {\n\t\t\tif (selector.length >= 1) {\n\t\t\t\tthis.collection = selector;\n\t\t\t} else {\n\t\t\t\tthis.collection = [selector];\n\t\t\t}\n\t\t\tthis.length = this.collection.length;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\t/**\n\t * Hide elements by setting their `display` property to 'none'.\n\t */\n\thide () {\n\t\tfor (const element of this.collection) {\n\t\t\telement.style.display = 'none';\n\t\t}\n\t}\n\n\t/**\n\t * Show elements by setting their `display` property to the given value.\n\t *\n\t * @param {string} [display='block'] - Display property to set\n\t */\n\tshow (display = 'block') {\n\t\tfor (const element of this.collection) {\n\t\t\telement.style.display = display;\n\t\t}\n\t}\n\n\t/**\n\t * Add a class to the classList object\n\t *\n\t * @param  {string} newClass - Class name to add\n\t */\n\taddClass (newClass) {\n\t\tfor (const element of this.collection) {\n\t\t\telement.classList.add (newClass);\n\t\t}\n\t}\n\n\t/**\n\t * Remove a given class from the classList object\n\t *\n\t * @param  {string} [oldClass=null] - Class to remove. If it's empty or null,\n\t * all classes will be removed\n\t */\n\tremoveClass (oldClass = null) {\n\t\tif (oldClass !== null) {\n\t\t\tfor (const element of this.collection) {\n\t\t\t\telement.classList.remove (oldClass);\n\t\t\t}\n\t\t} else {\n\t\t\tfor (const element of this.collection) {\n\t\t\t\twhile (element.classList.length > 0) {\n\t\t\t\t\telement.classList.remove (element.classList.item (0));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Toggle between two classes\n\t *\n\t * @param  {string} classes - Space separated class names\n\t */\n\ttoggleClass (classes) {\n\t\tclasses = classes.split (' ');\n\t\tfor (const element of this.collection) {\n\t\t\tfor (let j = 0; j < classes.length; j++) {\n\t\t\t\telement.classList.toggle (classes[j]);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Check if the first element matching the selector has the given class\n\t *\n\t * @param  {string} classToCheck - Class name to check for\n\t * @return {boolean} - Whether the class is present or not\n\t */\n\thasClass (classToCheck) {\n\t\tif (this.collection[0]) {\n\t\t\tfor (let j = 0; j < this.collection[0].classList.length; j++) {\n\t\t\t\tif (this.collection[0].classList[j] == classToCheck) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\t/**\n\t * Get or set the value from the first element matching the selector\n\t *\n\t * @param  {string} value - Value to set to the element.\n\t * @return {string} - If no value was provided, this returns the value of the\n\t * element instead of setting it\n\t */\n\tvalue (value) {\n\t\tif (this.length > 0) {\n\t\t\tif (typeof value === 'undefined') {\n\t\t\t\treturn this.collection[0].value;\n\t\t\t} else {\n\t\t\t\tthis.collection[0].value = value;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Focus on the first element matching the selector\n\t */\n\tfocus () {\n\t\tif (this.length > 0) {\n\t\t\tthis.collection[0].focus ();\n\t\t}\n\t}\n\n\t/**\n\t * Add a callback for the 'click' event on every element matching the selector\n\t *\n\t * @param  {function} callback - Callback function to run when the event is triggered\n\t */\n\tclick (callback) {\n\t\tfor (const element of this.collection) {\n\t\t\telement.addEventListener ('click', callback, false);\n\t\t}\n\t}\n\n\t/**\n\t * Add a callback for the 'keyup' event on every element matching the selector\n\t *\n\t * @param  {function} callback - Callback function to run when the event is triggered\n\t */\n\tkeyup (callback) {\n\t\tfor (const element of this.collection) {\n\t\t\telement.addEventListener ('keyup', callback, false);\n\t\t}\n\t}\n\n\t/**\n\t * Add a callback for the 'keydown' event on every element matching the selector\n\t *\n\t * @param  {function} callback - Callback function to run when the event is triggered\n\t */\n\tkeydown (callback) {\n\t\tfor (const element of this.collection) {\n\t\t\telement.addEventListener ('keydown', callback, false);\n\t\t}\n\t}\n\n\t/**\n\t * Add a callback for the 'submit' event on every element matching the selector\n\t *\n\t * @param  {function} callback - Callback function to run when the event is triggered\n\t */\n\tsubmit (callback) {\n\t\tfor (const element of this.collection) {\n\t\t\telement.addEventListener ('submit', callback, false);\n\t\t}\n\t}\n\n\t/**\n\t * Add a callback for the 'change' event on every element matching the selector\n\t *\n\t * @param  {function} callback - Callback function to run when the event is triggered\n\t */\n\tchange (callback) {\n\t\tfor (const element of this.collection) {\n\t\t\telement.addEventListener ('change', callback, false);\n\t\t}\n\t}\n\n\t/**\n\t * Add a callback for the 'scroll' event on every element matching the selector\n\t *\n\t * @param  {function} callback - Callback function to run when the event is triggered\n\t */\n\tscroll (callback) {\n\t\tfor (const element of this.collection) {\n\t\t\telement.addEventListener ('scroll', callback, false);\n\t\t}\n\t}\n\n\t/**\n\t * Add a callback function to a given event\n\t *\n\t * @param  {string} event - Event to add the listener to\n\t * @param  {string} target - Target element on which to detect the event\n\t * @param  {function} callback - Callback function to run when the event is triggered\n\t */\n\ton (event, target, callback) {\n\t\tevent = event.split(' ');\n\t\tfor (const element of this.collection) {\n\t\t\tfor (let j = 0; j < event.length; j++) {\n\n\t\t\t\t// Check if no target was defined and just a function was provided\n\t\t\t\tif (typeof target === 'function') {\n\t\t\t\t\telement.addEventListener(event[j], target, false);\n\t\t\t\t} else if (typeof target === 'string' && typeof callback === 'function') {\n\t\t\t\t\telement.addEventListener(event[j], (e) => {\n\t\t\t\t\t\tif (e.target && $_(e.target).matches (target)) {\n\t\t\t\t\t\t\tcallback.call (e.target, e);\n\t\t\t\t\t\t}\n\t\t\t\t\t}, false);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Filter from the current collection to only those matching the new selector\n\t *\n\t * @param  {string} element - Selector to filter the collection with\n\t * @return {DOM} - New DOM instance with the filtered collection\n\t */\n\tfilter (selector) {\n\t\tif (this.length > 0) {\n\t\t\treturn new DOM (this.collection[0].querySelector (selector));\n\t\t}\n\t}\n\n\t/**\n\t * Get or set a `data` property\n\t *\n\t * @param  {string} name - Name of the data property\n\t * @param  {string} [value] - Value of the property\n\t * @return {string} - If no value is set, this function returns it's current value\n\t */\n\tdata (name, value) {\n\t\tif (this.length > 0) {\n\t\t\tif (typeof value === 'undefined') {\n\t\t\t\treturn this.collection[0].dataset[name];\n\t\t\t} else {\n\t\t\t\tthis.collection[0].dataset[name] = value;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Get or set the text of the first element matching the selector\n\t *\n\t * @param  {string} [value] - Value to set the text to\n\t * @return {type} - If no value is present, this function returns its the\n\t * element's current text.\n\t */\n\ttext (value) {\n\t\tif (this.length > 0) {\n\t\t\tif (typeof value === 'undefined') {\n\t\t\t\treturn this.collection[0].textContent;\n\t\t\t} else {\n\t\t\t\tthis.collection[0].textContent = value;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Get or set the inner HTML of the first element matching the selector\n\t *\n\t * @param  {string} [value] - Value to set the HTML to\n\t * @return {type} - If no value is present, this function returns its the\n\t * element's current HTML.\n\t */\n\thtml (value) {\n\t\tif (this.length > 0) {\n\t\t\tif (typeof value === 'undefined') {\n\t\t\t\treturn this.collection[0].innerHTML;\n\t\t\t} else {\n\t\t\t\tthis.collection[0].innerHTML = value;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Append an element to the first element matching the selector\n\t *\n\t * @param  {string} element - String representation of the element to add\n\t */\n\tappend (element) {\n\t\tif (this.length > 0) {\n\t\t\tif (typeof element === 'string') {\n\t\t\t\tconst div = document.createElement ('div');\n\t\t\t\tif (typeof element === 'string') {\n\t\t\t\t\tdiv.innerHTML = element.trim ();\n\t\t\t\t} else {\n\t\t\t\t\tdiv.innerHTML = element;\n\t\t\t\t}\n\t\t\t\tthis.collection[0].appendChild (div.firstChild);\n\t\t\t} else {\n\t\t\t\tthis.collection[0].appendChild (element);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Prepend an element to the first element matching the selector\n\t *\n\t * @param  {string} element - String representation of the element to add\n\t */\n\tprepend (element) {\n\t\tif (this.length > 0) {\n\t\t\tif (typeof element === 'string') {\n\t\t\t\tconst div = document.createElement ('div');\n\t\t\t\tif (typeof element === 'string') {\n\t\t\t\t\tdiv.innerHTML = element.trim ();\n\t\t\t\t} else {\n\t\t\t\t\tdiv.innerHTML = element;\n\t\t\t\t}\n\t\t\t\tif (this.collection[0].childNodes.length > 0) {\n\t\t\t\t\tthis.collection[0].insertBefore (div.firstChild, this.collection[0].childNodes[0]);\n\t\t\t\t} else {\n\t\t\t\t\tthis.collection[0].appendChild (div.firstChild);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (this.collection[0].childNodes.length > 0) {\n\t\t\t\t\tthis.collection[0].insertBefore (element, this.collection[0].childNodes[0]);\n\t\t\t\t} else {\n\t\t\t\t\tthis.collection[0].appendChild (element);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Iterate over the collection of elements matching the selector\n\t *\n\t * @param  {function} callback - Callback to run for every element\n\t */\n\teach (callback) {\n\t\tfor (const element of this.collection) {\n\t\t\tcallback (element);\n\t\t}\n\t}\n\n\t/**\n\t * Get an element from the collection given it's index\n\t *\n\t * @param  {int} index - Index of the element to retrieve\n\t * @return {HTMLElement} - HTML Element in the position indicated by the index\n\t */\n\tget (index) {\n\t\treturn this.collection[index];\n\t}\n\n\t/**\n\t * Get the first element in the collection\n\t *\n\t * @return {DOM} - DOM instance with the first element\n\t */\n\tfirst () {\n\t\tif (this.length > 0) {\n\t\t\treturn new DOM (this.collection[0]);\n\t\t}\n\t}\n\n\t/**\n\t * Get the last element in the collection\n\t *\n\t * @return {DOM} - DOM instance with the last element\n\t */\n\tlast () {\n\t\tif (this.length > 0) {\n\t\t\treturn new DOM (this.collection[this.collection.length - 1]);\n\t\t}\n\t}\n\n\t/**\n\t * Check if the elements in the collection are visible by chacking their\n\t * display, offsetWidth and offsetHeight properties\n\t *\n\t * @return {boolean} - Whether the elements are visible or not\n\t */\n\tisVisible () {\n\t\tfor (const element of this.collection) {\n\t\t\tif (element.display != 'none' && element.offsetWidth > 0 && element.offsetHeight > 0) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\t/**\n\t * Get the parent of the first element matching the selector\n\t *\n\t * @return {DOM} - DOM instance of the parent element\n\t */\n\tparent () {\n\t\tif (this.collection[0]) {\n\t\t\treturn new DOM (this.collection[0].parentElement);\n\t\t}\n\t}\n\n\t/**\n\t * Find an element that matches the given selector in the first element of the collection\n\t *\n\t * @param  {string} selector - Selector to find the element with\n\t * @return {DOM} - Aegis instance with the element if found\n\t */\n\tfind (selector) {\n\t\tif (this.collection[0]) {\n\t\t\treturn new DOM (this.collection[0].querySelectorAll (selector));\n\t\t}\n\t}\n\n\t/**\n\t * Get the top and left offsets of the first element matching the selector\n\t *\n\t * @return {Object} - Object with `top` and `left` offsets\n\t */\n\toffset () {\n\t\tif (this.collection[0]) {\n\t\t\tconst rect = this.collection[0].getBoundingClientRect ();\n\t\t\treturn {\n\t\t\t\ttop: rect.top + document.body.scrollTop,\n\t\t\t\tleft: rect.left + document.body.scrollLeft\n\t\t\t};\n\t\t}\n\t}\n\n\t/**\n\t * Find the closest element matching the given selector. This bubbles up\n\t * from the initial object and then follows to its parents.\n\t *\n\t * @param  {string} selector - Selector to match the closest element with\n\t * @return {DOM} - DOM instance with the closest HTML element matching the selector\n\t */\n\tclosest (selector) {\n\t\tlet found = null;\n\t\tlet element = this;\n\t\twhile (typeof element.get (0) !== 'undefined' && found === null) {\n\t\t\tconst search = element.find (selector);\n\t\t\tif (search.length > 0) {\n\t\t\t\tfound = search;\n\t\t\t}\n\t\t\telement = element.parent ();\n\t\t}\n\n\t\tif (found !== null) {\n\t\t\treturn found;\n\t\t}\n\n\t\treturn element;\n\t}\n\n\t/**\n\t * Get or set the value of a given attribute\n\t *\n\t * @param  {string} attribute - Attribute's name\n\t * @param  {string|Number} [value] - Value to set the attribute to\n\t * @return {type} - If no value is provided, this function returns the current\n\t * value of the provided attribute\n\t */\n\tattribute (attribute, value) {\n\t\tif (this.collection[0]) {\n\t\t\tif (typeof value === 'undefined') {\n\t\t\t\tthis.collection[0].getAttribute (attribute);\n\t\t\t} else {\n\t\t\t\treturn this.collection[0].setAttribute (attribute, value);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Check whether an element has an attribute or not\n\t *\n\t * @param {string} attribute - The name of the attribute to check existance for\n\t * @returns {boolean} - Whether or not the attribute is present\n\t */\n\thasAttribute (attribute) {\n\t\tif (this.collection[0]) {\n\t\t\treturn this.collection[0].hasAttribute (attribute);\n\t\t}\n\t}\n\n\t/**\n\t * Insert content to the `after` property of an element\n\t *\n\t * @param  {string} content - String representation of the content to add\n\t */\n\tafter (content) {\n\t\tfor (const element of this.collection) {\n\t\t\telement.insertAdjacentHTML ('afterend', content);\n\t\t}\n\t}\n\n\t/**\n\t * Insert content to the `before` property of an element\n\t *\n\t * @param  {string} content - String representation of the content to add\n\t */\n\tbefore (content) {\n\t\tfor (const element of this.collection) {\n\t\t\telement.insertAdjacentHTML ('beforebegin', content);\n\t\t}\n\t}\n\n\t/**\n\t * Get or modify the `style` properties of the elements matching the selector\n\t *\n\t * @param  {string|Object} properties - Properties to change or get. Can be\n\t * either an individual property or a JSON object with key-value pairs\n\t * @param  {string} [value] - Value to set the property to when only changing\n\t * one property\n\t * @return {string} - If a peoperty is given but not a value for it, this\n\t * function will return its current value\n\t */\n\tstyle (properties, value) {\n\t\tfor (let i = 0; i < this.collection.length; i++) {\n\t\t\tif (typeof properties === 'string' && value !== 'undefined') {\n\t\t\t\tthis.collection[i].style[properties] = value;\n\t\t\t} else if (typeof properties === 'string' && value === 'undefined') {\n\t\t\t\treturn this.collection[i].style[properties];\n\t\t\t} else if (typeof properties === 'object') {\n\t\t\t\tfor (const property in properties) {\n\t\t\t\t\tthis.collection[i].style[property] = properties[property];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Animate the given `style` properties on all elements in the collection in\n\t * with a given time duration\n\t *\n\t * @param  {Object} style - JSON object with the key-value pairs of properties\n\t * to animate\n\t * @param  {int} time - Time in milliseconds during which the properties will\n\t * be animated\n\t */\n\tanimate (style, time) {\n\t\tfor (let i = 0; i < this.collection.length; i++) {\n\t\t\tfor (const property in style) {\n\n\t\t\t\tconst start = new Date().getTime();\n\t\t\t\tconst collection = this.collection;\n\t\t\t\tlet timer;\n\t\t\t\tlet initialValue;\n\t\t\t\tif (typeof this.collection[i].style[property] !== 'undefined') {\n\t\t\t\t\tinitialValue = this.collection[i].style[property];\n\n\t\t\t\t\ttimer = setInterval (() => {\n\t\t\t\t\t\tconst step = Math.min (1, (new Date ().getTime () - start) / time);\n\n\t\t\t\t\t\tcollection[i].style[property] = (initialValue + step * (style[property] - initialValue));\n\n\t\t\t\t\t\tif (step == 1) {\n\t\t\t\t\t\t\tclearInterval (timer);\n\t\t\t\t\t\t}\n\t\t\t\t\t}, 25);\n\t\t\t\t\tthis.collection[i].style[property] = initialValue;\n\n\t\t\t\t} else if (typeof (this.collection[i])[property] !== 'undefined') {\n\t\t\t\t\tinitialValue = (this.collection[i])[property];\n\n\t\t\t\t\ttimer = setInterval(() => {\n\t\t\t\t\t\tconst step = Math.min (1, (new Date ().getTime () - start) / time);\n\n\t\t\t\t\t\t(collection[i])[property] = (initialValue + step * (style[property] - initialValue));\n\n\t\t\t\t\t\tif (step == 1) {\n\t\t\t\t\t\t\tclearInterval (timer);\n\t\t\t\t\t\t}\n\t\t\t\t\t}, 25);\n\t\t\t\t\t(this.collection[i])[property] = initialValue;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Use a fade in animation i the first element matching the selector\n\t *\n\t * @param  {type} [time=400] - Time duration for the animation\n\t * @param  {type} callback - Callback function to run once the animation is over\n\t */\n\tfadeIn (time = 400, callback) {\n\t\tif (this.collection[0]) {\n\t\t\tconst element = this.collection[0];\n\t\t\telement.style.opacity = 0;\n\n\t\t\tlet last = +new Date();\n\n\t\t\tconst tick = () => {\n\t\t\t\telement.style.opacity = +element.style.opacity + (new Date() - last) / time;\n\t\t\t\tlast = +new Date();\n\n\t\t\t\tif (+element.style.opacity < 1) {\n\t\t\t\t\t(window.requestAnimationFrame && requestAnimationFrame(tick)) || setTimeout(tick, 16);\n\t\t\t\t} else {\n\t\t\t\t\tif (typeof callback === 'function') {\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\ttick();\n\t\t}\n\t}\n\n\t/**\n\t * Use a fade out animation i the first element matching the selector\n\t *\n\t * @param  {type} [time=400] - Time duration for the animation\n\t * @param  {type} callback - Callback function to run once the animation is over\n\t */\n\tfadeOut (time = 400, callback) {\n\t\tif (this.collection[0]) {\n\t\t\tlet last = +new Date ();\n\t\t\tconst element = this.collection[0];\n\t\t\tconst tick = () => {\n\t\t\t\telement.style.opacity = +element.style.opacity - (new Date() - last) / time;\n\t\t\t\tlast = +new Date ();\n\n\t\t\t\tif (+element.style.opacity > 0) {\n\t\t\t\t\t(window.requestAnimationFrame && requestAnimationFrame (tick)) || setTimeout(tick, 16);\n\t\t\t\t} else {\n\t\t\t\t\tif (typeof callback === 'function') {\n\t\t\t\t\t\tcallback ();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\ttick ();\n\t\t}\n\t}\n\n\t/**\tCheck if the first element in the collection matches a given selector\n\t *\n\t * @param  {string} selector - Selector to match\n\t * @return {boolean} - Whether the element matches the selector or not\n\t */\n\tmatches (selector) {\n\t\tconst check = Element.prototype;\n\t\tconst polyfill = check.matches || check.webkitMatchesSelector || check.mozMatchesSelector || check.msMatchesSelector || function () {\n\t\t\treturn [].indexOf.call (document.querySelectorAll (selector), this) !== -1;\n\t\t};\n\t\treturn polyfill.call (this.collection[0], selector);\n\t}\n\n\t/**\n\t * Remove all elemets in the collection\n\t */\n\tremove () {\n\t\tfor (const element of this.collection) {\n\t\t\telement.parentNode.removeChild (element);\n\t\t}\n\t}\n\n\t/**\n\t * Replace the first element in the collection with a new one\n\t */\n\treplaceWith (element) {\n\t\tif (this.collection[0]) {\n\t\t\tconst div = document.createElement ('div');\n\t\t\tdiv.innerHTML = element;\n\t\t\tthis.collection[0].parentElement.replaceChild (div.firstChild, this.collection[0]);\n\t\t}\n\t}\n\n\t/**\n\t * Reset every element in the collection\n\t */\n\treset () {\n\t\tif (this.length > 0) {\n\t\t\tthis.collection[0].reset ();\n\t\t}\n\t}\n\n\t/**\n\t * Get or set a property for the first element in the collection\n\t *\n\t * @param  {string} property - Property name to set or get\n\t * @param  {string|Number} [value] - Value to set the property to\n\t * @return {string|Number} - If no value is provided, this funcion will return the\n\t * current value of the indicated property\n\t */\n\tproperty (property, value) {\n\t\tif (this.collection[0]) {\n\t\t\tif (typeof value !== 'undefined') {\n\t\t\t\tthis.collection[0][property] = value;\n\t\t\t} else {\n\t\t\t\treturn this.collection[0][property];\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * Simple wrapper function to use the DOM library\n *\n * @param  {string|Object|array} selector - Selector or DOM element to use\n * @return {DOM} - DOM instance or class if no selector is used\n */\nexport function $_ (selector) {\n\tif (typeof selector !== 'undefined') {\n\t\treturn new DOM (selector);\n\t} else {\n\t\treturn DOM;\n\t}\n}\n\n/**\n * Utility function to attach the 'load' listener to the window\n *\n * @param  {function} callback - Callback function to run when the window is ready\n */\nexport function $_ready (callback) {\n\twindow.addEventListener ('load', callback);\n}","/**\n* ==============================\n* Request\n* ==============================\n*/\n\n/**\n * Simple Wrapper for the fetch API, providing simple functions to handle requests\n *\n * @class\n */\nexport class Request {\n\n\t/**\n\t * @static serialize - Serialize an object of data into a URI encoded format\n\t *\n\t * @param  {Object} data - Key-value object of data to serialize\n\t * @return {string} - Serialized Data\n\t */\n\tstatic serialize (data) {\n\t\treturn Object.keys (data).map ((key) => {\n\t\t\treturn encodeURIComponent (key) + '=' + encodeURIComponent (data[key]);\n\t\t}).join ('&');\n\t}\n\n\t/**\n\t * @static get - Make a GET request to a given URL with the provided data\n\t * parameters and an optional configuration object for the request.\n\t *\n\t * @param  {string} url - URL to make the request to\n\t * @param  {Object} [data = {}] - Parameters to send in the URL, represented\n\t * as a JSON object. These parameters will be sent as a query in the URL\n\t * @param  {Object} [options = {}] - Options object for configurations you want\n\t * to use in the fetch () request made.\n\t * @return {Promise<Response>} - Resolves to the response of the request\n\t */\n\tstatic get (url, data = {}, options = {}) {\n\t\tconst query = Request.serialize (data);\n\n\t\t// Check if there is actually any data parameters and join them to the\n\t\t// url as query parameters\n\t\tif (query !== '') {\n\t\t\turl = `${url}?${query}`;\n\t\t}\n\n\t\treturn fetch (url, options);\n\t}\n\n\t/**\n\t * @static post - Make a POST request to a given URL with the provided data\n\t * and an optional configuration object for the request.\n\t *\n\t * @param  {string} url - URL to make the request\n\t * @param  {Object} [data = {}] - Set of data to send in the URL, represented\n\t * as a JSON object\n \t * @param  {Object} [options = {}] - Options object for configurations you want\n\t * to use in the fetch () request made. The Content-Type header is used to\n\t * serialize data in the correct format and defaults to application/x-www-form-urlencoded\n\t * @return {Promise<Response>} - Resolves to the response of the request\n\t */\n\tstatic post (url, data, options = {}) {\n\t\tlet formData;\n\t\tif (typeof options.headers !== 'undefined') {\n\t\t\tconst contentType = options.headers['Content-Type'];\n\t\t\tif (typeof contentType !== 'undefined') {\n\t\t\t\tif (contentType == 'multipart/form-data') {\n\t\t\t\t\tformData = new FormData ();\n\t\t\t\t\tfor (const value in data) {\n\t\t\t\t\t\tformData.append (value, data[value]);\n\t\t\t\t\t}\n\t\t\t\t} else if (contentType == 'application/json') {\n\t\t\t\t\tformData = JSON.stringify (data);\n\t\t\t\t} else {\n\t\t\t\t\tformData = Request.serialize (data);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tformData = Request.serialize (data);\n\t\t}\n\n\t\treturn fetch (url, Object.assign ({}, {\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/x-www-form-urlencoded'\n\t\t\t},\n\t\t\tbody: formData\n\t\t}, options));\n\t}\n\n\t/**\n\t * @static put - Make a PUT request to a given URL with the provided data\n\t * and an optional configuration object for the request.\n\t *\n\t * @param  {string} url - URL to make the request\n\t * @param  {Object} [data = {}] - Set of data to send in the URL, represented\n\t * as a JSON object\n \t * @param  {Object} [options = {}] - Options object for configurations you want\n\t * to use in the fetch () request made. The Content-Type header is used to\n\t * serialize data in the correct format and defaults to application/x-www-form-urlencoded\n\t * @return {Promise<Response>} - Resolves to the response of the request\n\t */\n\tstatic put (url, data, options = {}) {\n\t\treturn Request.post (url, data, Object.assign ({}, {method: 'PUT'}, options));\n\t}\n\n\t/**\n\t * @static delete - Make a DELETE request to a given URL with the provided data\n\t * and an optional configuration object for the request.\n\t *\n\t * @param  {string} url - URL to make the request\n\t * @param  {Object} [data = {}] - Parameters to send in the URL, represented\n\t * as a JSON object. These parameters will be sent as a query in the URL\n \t * @param  {Object} [options = {}] - Options object for configurations you want\n\t * to use in the fetch () request made. The Content-Type header is used to\n\t * serialize data in the correct format and defaults to application/x-www-form-urlencoded\n\t * @return {Promise<Response>} - Resolves to the response of the request\n\t */\n\tstatic delete (url, data, options = {}) {\n\t\treturn Request.get (url, data, Object.assign ({}, {method: 'DELETE'}, options));\n\t}\n\n\t/**\n \t * @static json - Request a JSON object from a given URL through a GET request\n \t *\n \t * @param  {string} url - URL to make the request to\n \t * @param  {Object} [data = {}] - Parameters to send in the URL, represented\n \t * as a JSON object. These parameters will be sent as a query in the URL\n \t * @param  {Object} [options = {}] - Options object for configurations you want\n \t * to use in the fetch () request made.\n \t * @return {Promise<Object>} - Resolves to the json object obtained from the request response\n \t */\n\tstatic json (url, data = {}, options = {}) {\n\t\treturn Request.get (url, data, options).then ((response) => {\n\t\t\treturn response.json ();\n\t\t});\n\t}\n\n\t/**\n \t * @static blob - Request a Blob from a given URL through a GET request\n \t *\n \t * @param  {string} url - URL to make the request to\n \t * @param  {Object} [data = {}] - Parameters to send in the URL, represented\n \t * as a JSON object. These parameters will be sent as a query in the URL\n \t * @param  {Object} [options = {}] - Options object for configurations you want\n \t * to use in the fetch () request made.\n \t * @return {Promise<Blob>} - Resolves to the blob obtained from the request response\n \t */\n\tstatic blob (url, data = {}, options = {}) {\n\t\treturn Request.get (url, data, options).then ((response) => {\n\t\t\treturn response.blob ();\n\t\t});\n\t}\n}","/**\n * ==============================\n * File System\n * ==============================\n */\n\nimport { Request } from './Request';\n\n/**\n * A simple class wrapper for the File and FileReader web API, while this class\n * doesn't actually provide acces to the host file system, it does provide useful\n * utilities for form file inputs and remote content loading.\n *\n * @class\n */\nexport class FileSystem {\n\n\n\t/**\n\t * @static readRemote - Read a file from a remote location given a URL. This\n\t * function will fetch the file blob using the Request class and then use the\n\t * read () function to read the blob in the format required.\n\t *\n\t * @param {type} url - URL to fetch the file from\n\t * @param {type} [type = 'base64'] - Type of data to be read, values can be\n\t * 'text', 'base64' and 'buffer'. This parameter is used for the read () function.\n\t * @param {Object} [props = {}] - Props to send to the Request object\n\t * @return {Promise<ArrayBuffer|string>} - Content of the file. The format\n\t * depends on the type parameter used.\n\t */\n\tstatic readRemote (url, type = 'base64', props = {}) {\n\t\treturn Request.blob (url, {}, props).then ((file) => {\n\t\t\treturn FileSystem.read (file, type);\n\t\t});\n\t}\n\n\t/**\n\t * @static read - Read a given File or Blob object.\n\t *\n\t * @param  {File|Blob} file - File to read\n\t * @param  {string} [type = 'text'] - Type of data to be read, values can be\n\t * 'text', 'base64' and 'buffer'.\n\t * @return {Promise<Event, ArrayBuffer|string>} - Promise that resolves to\n\t * the Load event and content of the file. The format depends on the type\n\t * parameter used.\n\t */\n\tstatic read (file, type = 'text') {\n\t\treturn new Promise ((resolve, reject) => {\n\t\t\tconst reader = new FileReader ();\n\n\t\t\treader.onload = (event) => {\n\t\t\t\t// Pass down the event object and the content\n\t\t\t\tresolve (event, event.target.result);\n\t\t\t};\n\n\t\t\treader.onerror = (error) => {\n\t\t\t\treject (error);\n\t\t\t};\n\n\t\t\tif (type === 'base64') {\n\t\t\t\treader.readAsDataURL (file);\n\t\t\t} else if (type === 'buffer') {\n\t\t\t\treader.readAsArrayBuffer (file);\n\t\t\t} else {\n\t\t\t\treader.readAsText (file, 'UTF-8');\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * @static create - Create a new File, this uses the File API and will note\n\t * actually create a file in the user's file system, however using it with\n\t * other features, that may be possible\n\t *\n\t * @param  {string} file - Name of the file (Including extension)\n\t * @param  {ArrayBuffer|ArrayBufferView|Blob|string} content - Content to save in the file\n\t * @param  {string} [type = 'text/plain'] - Mime Type for the file\n\t * @return {Promise<File>}\n\t */\n\tstatic create (name, content, type = 'text/plain') {\n\t\treturn Promise.resolve (new File ([content], name, {type}));\n\t}\n\n\t/**\n\t * @static extension - Returns the extension of a file given its file name.\n\t *\n\t * @param  {string} name - Name or full path of the file\n\t * @return {string} - File extension without the leading dot (.)\n\t */\n\tstatic extension (name) {\n\t\treturn name.split ('.').pop ();\n\t}\n\n\t/**\n\t * @static isImage - Check if a file is an image by its extension.\n\t *\n\t * @param  {string} name - Name or full path of the file\n\t * @return {boolean}\n\t */\n\tstatic isImage (name) {\n\t\tconst extensions = ['jpg', 'jpeg', 'png', 'gif', 'svg', 'webp', 'bmp'];\n\t\treturn extensions.indexOf (FileSystem.extension (name).toLowerCase ()) > -1;\n\t}\n\n}","/**\n* ==============================\n* Form\n* ==============================\n*/\n\nimport { $_ } from './DOM';\n\n/**\n * Utility class that provides simple function for filling and retrieving values\n * from froms. This class requires the use of the `data-form` attribute.\n *\n * @class\n */\nexport class Form {\n\n\t/**\n\t * @static fill - Fill a form's inputs with the given values. Each key in the\n\t * provided object must match the `name` attribute of the input to fill.\n\t *\n\t * @param  {string} name - Form name. Must match the `data-form` attribute of the Form.\n\t * @param  {Object} data - JSON object with key-value pairs to fill the inputs.\n\t */\n\tstatic fill (name, data) {\n\t\tfor (const field in data) {\n\t\t\tconst element = $_(`form[data-form='${name}'] [name='${field}']`).get (0);\n\t\t\tif (typeof element != 'undefined') {\n\t\t\t\tswitch (element.type) {\n\n\t\t\t\t\tcase 'file':\n\t\t\t\t\tcase 'file[]':\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\telement.value = data[field];\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t}\n\n\t/**\n\t * @static values - Get all the values from a form's input. The keys are mapped\n\t * using the `name` attribute of each input.\n\t *\n\t * @param  {string} name - Form name. Must match the `data-form` attribute of the Form.\n\t * @return {Object} - Key-value JSON object\n\t */\n\tstatic values (name) {\n\t\tconst data = {};\n\t\t$_(`form[data-form='${name}'] [name]`).each ((element) => {\n\t\t\tlet value;\n\t\t\tswitch (element.type) {\n\t\t\t\tcase 'file[]':\n\t\t\t\t\tvalue = element.files;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'file':\n\t\t\t\t\tvalue = element.files[0];\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tvalue = element.value;\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif (typeof value != 'undefined' && value !== null) {\n\t\t\t\tdata[element.name] = value;\n\t\t\t}\n\t\t});\n\n\t\treturn data;\n\t}\n}","/**\n* ==============================\n* Platform\n* ==============================\n*/\n\n/**\n * General checks for what kind of platform is the being used to run the app.\n * @class\n */\nexport class Platform {\n\n\t/**\n\t * Check if the screen has a retina pixel ratio\n\t * @returns {boolean}\n\t */\n\tstatic retina () {\n\t\treturn window.devicePixelRatio >= 2;\n\t}\n\n\t/**\n\t * Check if the device is on portrait orientation\n\t * @returns {boolean}\n\t */\n\tstatic portrait () {\n\t\treturn window.orientation === 0 || window.orientation === 180;\n\t}\n\n\t/**\n\t * Check if the device is on landscape orientation\n\t * @returns {boolean}\n\t */\n\tstatic landscape () {\n\t\treturn (window.orientation === 90 || window.orientation === -90);\n\t}\n\n\t/**\n\t * Get device Orientation\n\t * @returns {string} portrait | landscape\n\t */\n\tstatic orientation () {\n\t\treturn Platform.portrait () ? 'portrait' : 'landscape';\n\t}\n\n\t/**\n\t * Check if the app is running over Electron\n\t * @returns {boolean}\n\t */\n\tstatic electron () {\n\t\treturn window && window.process && window.process.type;\n\t}\n\n\t/**\n\t * Check if the app is running over Cordova\n\t * @returns {boolean}\n\t */\n\tstatic cordova () {\n\t\treturn !!window.cordova;\n\t}\n\n\t/**\n\t * Check if the app is running in a desktop platform\n\t * @returns {boolean}\n\t */\n\tstatic desktop (platform = 'Any') {\n\t\tlet match = false;\n\t\tswitch (platform) {\n\t\t\tcase 'Windows':\n\t\t\t\tmatch = navigator.platform.includes ('Win');\n\t\t\t\tbreak;\n\n\t\t\tcase 'macOS':\n\t\t\t\tmatch = navigator.platform.includes ('Mac');\n\t\t\t\tbreak;\n\n\t\t\tcase 'Linux':\n\t\t\t\tmatch = navigator.platform.includes ('Linux');\n\t\t\t\tbreak;\n\n\t\t\tcase 'FreeBSD':\n\t\t\t\tmatch = navigator.platform.includes ('FreeBSD');\n\t\t\t\tbreak;\n\n\t\t\tcase 'webOS':\n\t\t\t\tmatch = navigator.platform.includes ('WebTV');\n\t\t\t\tbreak;\n\n\t\t\tcase 'Any':\n\t\t\tdefault:\n\t\t\t\tmatch = navigator.platform.includes ('Win')\n\t\t\t\t\t\t|| navigator.platform.includes ('Mac')\n\t\t\t\t\t\t|| navigator.platform.includes ('Linux')\n\t\t\t\t\t\t|| navigator.platform.includes ('FreeBSD')\n\t\t\t\t\t\t|| navigator.platform.includes ('WebTV');\n\t\t\t\tbreak;\n\t\t}\n\t\treturn match;\n\t}\n\n\t/**\n\t * Check if the app is running in a mobile platform\n\t * @param {string } [platform='Any'] - Check for a specific mobile platform [Android | iOS | Opera | Windows | BlackBerry | Any]\n\t * @returns {boolean}\n\t */\n\tstatic mobile (platform = 'Any') {\n\t\tlet match = false;\n\t\tswitch (platform) {\n\t\t\tcase 'Android':\n\t\t\t\tmatch = /Android/i.test (navigator.userAgent);\n\t\t\t\tbreak;\n\n\t\t\tcase 'iOS':\n\t\t\t\tmatch = /iPhone|iPad|iPod/i.test (navigator.userAgent);\n\t\t\t\tbreak;\n\n\t\t\tcase 'Opera':\n\t\t\t\tmatch = /Opera Mini/i.test (navigator.userAgent);\n\t\t\t\tbreak;\n\n\t\t\tcase 'Windows':\n\t\t\t\tmatch = /Windows Phone|IEMobile|WPDesktop/i.test (navigator.userAgent);\n\t\t\t\tbreak;\n\n\t\t\tcase 'BlackBerry':\n\t\t\t\tmatch = /BlackBerry|BB10/i.test (navigator.userAgent);\n\t\t\t\tbreak;\n\n\t\t\tcase 'Any':\n\t\t\tdefault:\n\t\t\t\tmatch = /Android|iPhone|iPad|iPod|Windows Phone|IEMobile|WPDesktop|BlackBerry|BB10/i.test (navigator.userAgent);\n\t\t\t\tbreak;\n\t\t}\n\t\treturn match;\n\t}\n\n\t/**\n\t * @static serviceWorkers - Check if the platform allows the use of service\n\t * workers\n\t *\n\t * @return {boolean} - Whether they're supported or not\n\t */\n\tstatic serviceWorkers () {\n\t\tif (typeof navigator !== 'undefined') {\n\t\t\tif ('serviceWorker' in navigator && location.protocol.indexOf ('http') > -1) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n}","/**\n * ==============================\n * Preload\n * ==============================\n */\n\nimport { Request } from './Request';\n\n/**\n * A simple class for asset preloading. This class assumes you have a service\n * worker set up that will be caching all requests.\n * @class\n */\nexport class Preload {\n\n\t/**\n\t * @static image - Preload an image file\n\t *\n\t * @param  {string} route - Route to the image\n\t * @return {Promise} - Resolves to the image object or gets rejected with\n\t * the rejection event\n\t */\n\tstatic image (route) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst image = new Image ();\n\n\t\t\timage.onload = () => {\n\t\t\t\tresolve (image);\n\t\t\t};\n\n\t\t\timage.onerror = (e) => {\n\t\t\t\treject (e);\n\t\t\t};\n\n\t\t\timage.src = route;\n\t\t});\n\t}\n\n\t/**\n\t * @static file - Preload any kind of file\n\t *\n\t * @param  {string} route - Route to the file\n\t * @return {Promise} - Resolves or rejects depending on request success\n\t */\n\tstatic file (route) {\n\t\treturn Request.blob (route);\n\t}\n}","/**\n* ==============================\n* Local Storage Adapter\n* ==============================\n*/\n\n/**\n * The Local Storage Adapter provides the Space Class the ability to interact\n * with the localStorage api found in most modern browsers.\n *\n * @class\n */\nexport class LocalStorage {\n\n\t/**\n\t * Create a new LocalStorage. If no configuration is provided, the LocalStorage\n\t * global object is used. The LocalStorage Adapter can provide independency\n\t * by store name and space name.\n\t *\n\t * @constructor\n\t * @param {Object} [configuration={name = '', version = '', store = ''}] - Configuration Object for the Adapter\n\t * @param {string} configuration.name - Name of the Space\n\t * @param {string} configuration.version - Version of the Space in Semantic versioning syntax\n\t * @param {string} configuration.store - Name of the Object Store to use\n\t *\n\t */\n\tconstructor ({name = '', version = '', store = ''}) {\n\t\tthis.name = name;\n\t\tthis.version = version;\n\t\tthis.store = store;\n\n\t\tthis.upgrades = {};\n\n\t\tif (this.version === '') {\n\t\t\tthis.numericVersion = 0;\n\t\t} else {\n\t\t\tthis.numericVersion = parseInt (version.replace (/\\./g, ''));\n\t\t}\n\n\t\tif (name !== '' && version !== '' && store !== '') {\n\t\t\tthis.id = `${this.name}::${this.store}::${this.version}_`;\n\t\t} else if (name !== '' && version !== '') {\n\t\t\tthis.id = `${this.name}::${this.version}_`;\n\t\t} else if (name !== '') {\n\t\t\tthis.id = `${this.name}::_`;\n\t\t} else {\n\t\t\tthis.id = '';\n\t\t}\n\t}\n\n\t/**\n\t * Open the Storage Object\n\t *\n\t * @return {Promise}\n\t */\n\topen () {\n\t\tif (typeof this.storage === 'object' && !(this.storage instanceof Promise)) {\n\t\t\treturn Promise.resolve (this);\n\t\t} else if (this.storage instanceof Promise) {\n\t\t\treturn this.storage;\n\t\t} else {\n\t\t\tthis.storage = new Promise ((resolve) => {\n\t\t\t\tlet upgradesToApply = [];\n\t\n\t\t\t\t// Check if this space is versioned\n\t\t\t\tif (this.version !== '') {\n\t\t\t\t\t// Get the versionless part of the ID to check if an upgrade needs\n\t\t\t\t\t// to ocurr based on the version available on storage and the current\n\t\t\t\t\t// version.\n\t\t\t\t\tlet versionless = '';\n\t\t\t\t\tif (this.name !== '' && this.version !== '' && this.store !== '') {\n\t\t\t\t\t\tversionless = `${this.name}::${this.store}::`;\n\t\t\t\t\t} else if (this.name !== '' && this.version !== '') {\n\t\t\t\t\t\tversionless = `${this.name}::`;\n\t\t\t\t\t}\n\t\n\t\t\t\t\t// Get all the currently stored keys that contain the versionless\n\t\t\t\t\t// ID, which means they belong to this space\n\t\t\t\t\tconst storedVersions = Object.keys (window.localStorage).filter ((key) => {\n\t\t\t\t\t\treturn key.indexOf (versionless) === 0;\n\t\t\t\t\t}).map ((key) => {\n\t\t\t\t\t\t// Remove the versionless part of the ID and keep only the\n\t\t\t\t\t\t// part of the key belonging to the ID\n\t\t\t\t\t\treturn key.replace (versionless, '').split ('_')[0];\n\t\t\t\t\t}). filter ((key) => {\n\t\t\t\t\t\t// Filter all that didn't match the versionless part fully\n\t\t\t\t\t\treturn key.indexOf ('::') === -1;\n\t\t\t\t\t}).sort ();\n\t\n\t\t\t\t\tif (storedVersions.length > 0) {\n\t\t\t\t\t\t// We'll only take the lowest one every time\n\t\t\t\t\t\tconst oldVersion = storedVersions[0];\n\t\t\t\t\t\tconst oldVersionNumeric = parseInt (oldVersion.replace (/\\./g, ''));\n\n\t\t\t\t\t\tif (oldVersionNumeric < this.numericVersion) {\n\t\t\t\t\t\t\t// Check what upgrade functions have been declared in their respective order\n\t\t\t\t\t\t\tconst availableUpgrades = Object.keys (this.upgrades).sort ();\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// Find the first update that needs to be applied to the database given\n\t\t\t\t\t\t\t// the old version it currently has.\n\t\t\t\t\t\t\tconst startFrom = availableUpgrades.findIndex (u => {\n\t\t\t\t\t\t\t\tconst [old, ] = u.split ('::');\n\t\t\t\t\t\t\t\treturn parseInt (old) === oldVersionNumeric;\n\t\t\t\t\t\t\t});\n\t\t\n\t\t\t\t\t\t\tif (startFrom > -1) {\n\t\t\t\t\t\t\t\tupgradesToApply = availableUpgrades.slice (startFrom).filter ((u) => {\n\t\t\t\t\t\t\t\t\tconst [old, next] = u.split ('::');\n\t\t\t\t\t\t\t\t\treturn parseInt (old) < this.numericVersion && parseInt (next) <= this.numericVersion;\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\n\t\t\t\t\t\t\t// Get the previous ID using the old version\n\t\t\t\t\t\t\tlet previousId = `${this.name}::${oldVersion}_`;\n\t\t\n\t\t\t\t\t\t\tif (this.name !== '' && this.version !== '' && this.store !== '') {\n\t\t\t\t\t\t\t\tpreviousId = `${this.name}::${this.store}::${oldVersion}_`;\n\t\t\t\t\t\t\t} else if (this.name !== '' && this.version !== '') {\n\t\t\t\t\t\t\t\tpreviousId = `${this.name}::${oldVersion}_`;\n\t\t\t\t\t\t\t}\n\t\t\n\t\t\t\t\t\t\t// Get all keys from the previous version\n\t\t\t\t\t\t\tconst keys = Object.keys (window.localStorage).filter ((key) => {\n\t\t\t\t\t\t\t\treturn key.indexOf (previousId) === 0;\n\t\t\t\t\t\t\t}).map ((key) => {\n\t\t\t\t\t\t\t\treturn key.replace (previousId, '');\n\t\t\t\t\t\t\t});\n\t\t\n\t\t\t\t\t\t\tfor (const key of keys) {\n\t\t\t\t\t\t\t\t// Get the value stored with the previous version\n\t\t\t\t\t\t\t\tconst previous = window.localStorage.getItem (`${previousId}${key}`);\n\t\t\n\t\t\t\t\t\t\t\t// Re-insert the value using the new ID as a key\n\t\t\t\t\t\t\t\twindow.localStorage.setItem (this.id + key, previous);\n\n\t\t\t\t\t\t\t\t// Delete the previous value.\n\t\t\t\t\t\t\t\twindow.localStorage.removeItem (`${previousId}${key}`);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tresolve ({ upgrades: upgradesToApply });\n\t\t\t}).then (({ upgrades }) => {\n\t\t\t\tthis.storage = window.localStorage;\n\t\t\t\treturn new Promise ((resolve) => {\n\t\t\t\t\tconst res = () => resolve (this);\n\t\t\t\t\tthis._upgrade (upgrades, res);\n\t\t\t\t});\n\t\t\t});\n\t\t\treturn this.storage;\n\t\t}\n\t}\n\n\t/**\n\t * Store a key-value pair\n\t *\n\t * @param  {string} key - Key with which this value will be saved\n\t * @param  {Object|string|Number} - Value to save\n\t * @return {Promise<{key, value}>}\n\t */\n\tset (key, value) {\n\t\treturn this.open ().then (() => {\n\n\t\t\tif (typeof value === 'object') {\n\t\t\t\tthis.storage.setItem (this.id + key, JSON.stringify (value));\n\t\t\t} else {\n\t\t\t\tthis.storage.setItem (this.id + key, value);\n\t\t\t}\n\n\t\t\treturn Promise.resolve ({key, value});\n\t\t});\n\t}\n\n\t/**\n\t * Update a key-value pair. In difference with the set () method, the update\n\t * method will use an Object.assign () in the case of objects so no value is\n\t * lost.\n\t *\n\t * @param  {string} key - Key with which this value will be saved\n\t * @param  {Object|string|Number} - Value to save\n\t * @return {Promise<{key, value}>}\n\t */\n\tupdate (key, value) {\n\t\treturn this.get (key).then ((currentValue) => {\n\t\t\tif (typeof currentValue === 'object') {\n\t\t\t\tif (typeof value === 'object') {\n\t\t\t\t\tvalue = Object.assign ({}, currentValue, value);\n\t\t\t\t}\n\t\t\t\tthis.storage.setItem (this.id + key, JSON.stringify (value));\n\t\t\t} else {\n\t\t\t\tthis.storage.setItem (this.id + key, value);\n\t\t\t}\n\t\t\treturn Promise.resolve ({key, value});\n\t\t});\n\t}\n\n\t/**\n\t * Retrieves a value from storage given it's key\n\t *\n\t * @param  {string} - Key with which the value was saved\n\t * @return {Promise<Object>|Promise<string>|Promise<Number>} - Resolves to the retreived value\n\t * or its rejected if it doesn't exist\n\t */\n\tget (key) {\n\t\treturn this.open ().then (() => {\n\t\t\treturn new Promise ((resolve, reject) => {\n\t\t\t\tlet value = null;\n\t\t\t\tvalue = this.storage.getItem (this.id + key);\n\t\t\t\ttry {\n\t\t\t\t\tconst o = JSON.parse (value);\n\t\t\t\t\tif (o && typeof o === 'object') {\n\t\t\t\t\t\tvalue = o;\n\t\t\t\t\t}\n\t\t\t\t} catch (exception) {\n\t\t\t\t\t// Unable to parse to JSON\n\t\t\t\t}\n\n\t\t\t\tif (typeof value !== 'undefined' && value !== null) {\n\t\t\t\t\tresolve (value);\n\t\t\t\t} else {\n\t\t\t\t\treject ();\n\t\t\t\t}\n\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Retrieves all the values in the space in a key-value JSON object\n\t *\n\t * @return {Promise<Object>} - Resolves to the retreived values\n\t */\n\tgetAll () {\n\t\treturn this.keys ().then ((keys) => {\n\t\t\tconst values = {};\n\t\t\tconst promises = [];\n\t\t\tfor (const key of keys) {\n\t\t\t\tpromises.push (this.get (key).then ((value) => {\n\t\t\t\t\tvalues[key] = value;\n\t\t\t\t}));\n\t\t\t}\n\t\t\treturn Promise.all (promises).then (() => {\n\t\t\t\treturn values;\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Check if the space contains a given key.\n\t *\n\t * @param  {string} key - Key to look for.\n\t * @return {Promise} Promise gets resolved if it exists and rejected if\n\t * doesn't\n\t */\n\tcontains (key) {\n\t\treturn this.keys ().then ((keys) => {\n\t\t\tif (keys.includes (key)) {\n\t\t\t\tPromise.resolve ();\n\t\t\t} else {\n\t\t\t\treturn Promise.reject ();\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Upgrade a Space Version\n\t *\n\t * @param oldVersion {string} - The version of the storage to be upgraded\n\t * @param newVersion {string} - The version to be upgraded to\n\t * @param callback {function} - Function to transform the old stored values to the new version's format\n\t * @returns {Promise}\n\t */\n\tupgrade (oldVersion, newVersion, callback) {\n\t\tthis.upgrades[`${parseInt (oldVersion.replace (/\\./g, ''))}::${parseInt (newVersion.replace (/\\./g, ''))}`] = callback;\n\t\treturn Promise.resolve ();\n\t}\n\n\t// This function acts as a helper for the upgrade progress by executing the\n\t// needed upgrade callbacks in the correct order and sychronously.\n\t_upgrade (upgradesToApply, resolve) {\n\t\t// Check if there are still upgrades to apply\n\t\tif (upgradesToApply.length > 0) {\n\t\t\tthis.upgrades[upgradesToApply[0]].call (this, this).then (() => {\n\t\t\t\tthis._upgrade (upgradesToApply.slice (1), resolve);\n\t\t\t}).catch ((e) => console.error (e));\n\t\t} else {\n\t\t\tresolve ();\n\t\t}\n\t}\n\n\t/**\n\t * Rename a Space\n\t *\n\t * @param {string} name - New name to be used.\n\t * @returns {Promise} - Result of the rename operation\n\t */\n\trename (name) {\n\t\t// Check if the name is different\n\t\tif (this.name !== name) {\n\t\t\treturn this.keys ().then ((keys) => {\n\t\t\t\t// Save the previous Space id\n\t\t\t\tconst oldId = this.id;\n\n\t\t\t\t// Set new object properties with the new name\n\t\t\t\tthis.name = name;\n\n\t\t\t\tif (this.name !== '' && this.version !== '' && this.store !== '') {\n\t\t\t\t\tthis.id = `${this.name}::${this.store}::${this.version}_`;\n\t\t\t\t} else if (this.name !== '' && this.version !== '') {\n\t\t\t\t\tthis.id = `${this.name}::${this.version}_`;\n\t\t\t\t} else if (this.name !== '') {\n\t\t\t\t\tthis.id = `${this.name}::_`;\n\t\t\t\t} else {\n\t\t\t\t\tthis.id = '';\n\t\t\t\t}\n\n\t\t\t\tconst promises = [];\n\t\t\t\tfor (const key of keys) {\n\t\t\t\t\tpromises.push (this.set (key, this.storage.getItem (`${oldId}${key}`)).then (() => {\n\t\t\t\t\t\tthis.storage.removeItem (`${oldId}${key}`);\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t\treturn Promise.all (promises);\n\t\t\t});\n\t\t} else {\n\t\t\treturn Promise.reject ();\n\t\t}\n\t}\n\n\t/**\n\t * Get the key that corresponds to a given index in the storage\n\t *\n\t * @param  {Number} index - Index to get the key from\n\t * @param  {boolean} [full=false] - Whether to return the full key name including space id or just the key name\n\t * @return {Promise<string>} - Resolves to the key's name\n\t */\n\tkey (index, full = false) {\n\t\treturn this.open ().then (() => {\n\t\t\tif (full === true) {\n\t\t\t\treturn Promise.resolve (this.storage.key (index));\n\t\t\t} else {\n\t\t\t\treturn Promise.resolve (this.storage.key (index).replace (this.id, ''));\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Return all keys stored in the space.\n\t *\n\t * @param {boolean} [full=false] - Whether to return the full key name including space id or just the key name\n\t * @return {Promise<string[]>} - Array of keys\n\t */\n\tkeys (full = false) {\n\t\treturn this.open ().then (() => {\n\t\t\treturn Promise.resolve (Object.keys (this.storage).filter ((key) => {\n\t\t\t\treturn key.indexOf (this.id) === 0;\n\t\t\t}).map ((key) => {\n\t\t\t\tif (full === true) {\n\t\t\t\t\treturn key;\n\t\t\t\t} else {\n\t\t\t\t\treturn key.replace (this.id, '');\n\t\t\t\t}\n\t\t\t}));\n\t\t});\n\t}\n\n\t/**\n\t * Delete a value from the space given its key\n\t *\n\t * @param  {string} key - Key of the item to delete\n\t * @return {Promise<value>} - Resolves to the value of the deleted object\n\t */\n\tremove (key) {\n\t\treturn this.get (key).then ((value) => {\n\t\t\tthis.storage.removeItem (this.id + key);\n\t\t\treturn Promise.resolve (value);\n\t\t});\n\t}\n\n\t/**\n\t * Clear the entire space\n\t *\n\t * @return {Promise} - Result of the clear operation\n\t */\n\tclear () {\n\t\treturn this.keys ().then ((keys) => {\n\t\t\tfor (const key of keys) {\n\t\t\t\tthis.remove (key);\n\t\t\t}\n\t\t\treturn Promise.resolve ();\n\t\t});\n\t}\n}","/**\n* ==============================\n* Session Storage Adapter\n* ==============================\n*/\n\nimport { LocalStorage } from './LocalStorage';\n\n/**\n * The Session Storage Adapter provides the Space Class the ability to interact\n * with the sessionStorage api found in most modern browsers. Since this API\n * shares pretty much the same methods to the local storage one, this class\n * inherits from the LocalStorage adapter.\n *\n * @class\n */\nexport class SessionStorage extends LocalStorage {\n\n\t/**\n\t * Create a new SessionStorage. If no configuration is provided, the SessionStorage\n\t * global object is used.The SessionStorage Adapter can provide independency\n\t * by store name and space name.\n\t *\n\t * @constructor\n\t * @param {Object} [configuration={name = '', version = '', store = ''}] - Configuration Object for the Adapter\n\t * @param {string} configuration.name - Name of the Space\n\t * @param {string} configuration.version - Version of the Space in Semantic versioning syntax\n\t * @param {string} configuration.store - Name of the Object Store to use\n\t *\n\t */\n\tconstructor ({name = '', version = '', store = ''}) {\n\t\tsuper ({name, version, store});\n\t}\n\n\t/**\n\t * Open the Storage Object\n\n\t * @return {Promise<SessionStorage>}\n\t */\n\topen () {\n\t\tif (typeof this.storage === 'undefined') {\n\t\t\tthis.storage = window.sessionStorage;\n\t\t}\n\t\treturn Promise.resolve (this);\n\t}\n}","/**\n* ==============================\n* IndexedDB Adapter\n* ==============================\n*/\n\n/**\n * The IndexedDB Adapter provides the Space Class the ability to interact\n * with the IndexedDB API found in most modern browsers.\n *\n * @class\n */\nexport class IndexedDB {\n\n\t/**\n\t * Create a new IndexedDB. Differently from Local and Session Storages, the\n\t * IndexedDB Adapter requires a mandatory name, version and store name.\n\t *\n\t * @constructor\n\t * @param {Object} [configuration={name = '', version = '', store = '', props = {}, index = {}}] - Configuration Object for the Adapter\n\t * @param {string} configuration.name - Name of the Space\n\t * @param {string} configuration.version - Version of the Space in Semantic versioning syntax\n\t * @param {string} configuration.store - Name of the Object Store to use\n\t * @param {Object} configuration.props - Optional Parameters for the Object Store\n\t * @param {Object} configuration.index - Object of the indexes to declare for\n\t * the  Object Store. Each index is a JSON object with the following properties:\n\t * @param {String} configuration.index[...].name - Name for the Index\n\t * @param {String} configuration.index[...].field - Field on the store to apply the index to\n\t * @param {Object} configuration.index[...].props - Index properties object\n\t */\n\tconstructor ({name = '', version = '', store = '', props = {}, index = {}}) {\n\t\tthis.name = name;\n\t\tthis.version = version;\n\t\tthis.store = store;\n\t\tthis.props = props;\n\t\tthis.index = index;\n\n\t\tthis.upgrades = {};\n\n\t\tif (this.version === '') {\n\t\t\tthis.numericVersion = 0;\n\t\t} else {\n\t\t\tthis.numericVersion = parseInt (version.replace (/\\./g, ''));\n\t\t}\n\t}\n\n\t/**\n\t * Open the Storage Object\n\t *\n\t * @return {Promise}\n\t */\n\topen () {\n\n\t\tif (this.name === '') {\n\t\t\tconsole.error ('No name has been defined for IndexedDB space.');\n\t\t\treturn Promise.reject ();\n\t\t}\n\n\t\tif (this.store === '') {\n\t\t\tconsole.error ('No store has been defined for IndexedDB space.');\n\t\t\treturn Promise.reject ();\n\t\t}\n\n\t\tif (this.storage instanceof IDBDatabase) {\n\t\t\treturn Promise.resolve (this);\n\t\t} else if (this.storage instanceof Promise) {\n\t\t\treturn this.storage;\n\t\t} else {\n\t\t\tthis.storage = new Promise ((resolve, reject) => {\n\t\t\t\tlet upgradesToApply = [];\n\t\t\t\tconst storage = window.indexedDB.open (this.name, this.numericVersion);\n\n\t\t\t\tstorage.onerror = (event) => {\n\t\t\t\t\treject (event);\n\t\t\t\t};\n\n\t\t\t\tstorage.onsuccess = (event) => {\n\t\t\t\t\tresolve ({ storage: event.target.result, upgrades: upgradesToApply });\n\t\t\t\t};\n\n\t\t\t\tstorage.onupgradeneeded = (event) => {\n\t\t\t\t\t// If the previous version is less than one, it means that\n\t\t\t\t\t// the database needs to be created first\n\t\t\t\t\tif (event.oldVersion < 1) {\n\t\t\t\t\t\t// Create all the needed Stores\n\t\t\t\t\t\tconst store = event.target.result.createObjectStore (this.store, this.props);\n\t\t\t\t\t\tfor (const index of Object.keys (this.index)) {\n\t\t\t\t\t\t\tstore.createIndex (this.index[index].name, this.index[index].field, this.index[index].props);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Check what upgrade functions have been declared in their respective order\n\t\t\t\t\t\tconst availableUpgrades = Object.keys (this.upgrades).sort ();\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Find the first update that needs to be applied to the database given\n\t\t\t\t\t\t// the old version it currently has.\n\t\t\t\t\t\tconst startFrom = availableUpgrades.findIndex (u => {\n\t\t\t\t\t\t\tconst [old, ] = u.split ('::');\n\t\t\t\t\t\t\treturn parseInt (old) === event.oldVersion;\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (startFrom > -1) {\n\t\t\t\t\t\t\tupgradesToApply = availableUpgrades.slice (startFrom).filter ((u) => {\n\t\t\t\t\t\t\t\tconst [old, next] = u.split ('::');\n\t\t\t\t\t\t\t\treturn parseInt (old) < this.numericVersion && parseInt (next) <= this.numericVersion;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Once the transaction is done, resolve the storage object\n\t\t\t\t\tconst transaction = event.target.transaction;\n\t\t\t\t\ttransaction.addEventListener ('success', () => {\n\t\t\t\t\t\tresolve ({ storage: event.target.result, upgrades: upgradesToApply });\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t}).then (({ storage, upgrades }) => {\n\t\t\t\tthis.storage = storage;\n\t\t\t\treturn new Promise ((resolve) => {\n\t\t\t\t\tconst res = () => resolve (storage);\n\t\t\t\t\tthis._upgrade (upgrades, res, event);\n\t\t\t\t});\n\t\t\t});\n\t\t\treturn this.storage;\n\t\t}\n\t}\n\n\t/**\n\t * Store a key-value pair. Because of the nature of a IndexedDB Database, the\n\t * stored values must be JSON objects.\n\t *\n\t * @param  {string} key - Key with which this value will be saved\n\t * @param  {Object} - Value to save\n\t * @return {Promise<Object>} - When resolved, a {key, value} object is handed\n\t * down, when it's rejected, the event is handed down.\n\t */\n\tset (key = null, value) {\n\t\treturn this.open ().then (() => {\n\t\t\treturn new Promise ((resolve, reject) => {\n\t\t\t\tconst transaction = this.storage.transaction (this.store, 'readwrite').objectStore (this.store);\n\t\t\t\tlet op;\n\t\t\t\tif (key !== null) {\n\t\t\t\t\top = transaction.put (Object.assign ({}, {id: key}, value));\n\t\t\t\t} else {\n\t\t\t\t\top = transaction.add (value);\n\t\t\t\t}\n\t\t\t\top.addEventListener ('success', (event) => { resolve ({key: event.target.result, value: value});});\n\t\t\t\top.addEventListener ('error', (event) => {reject (event);});\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Update a key-value pair. In difference with the set () method, the update\n\t * method will use an Object.assign () in the case of objects so no value is\n\t * lost.\n\t *\n\t * @param  {string} key - Key with which this value will be saved\n\t * @param  {Object} - Value to save\n\t * @return {Promise<Object>} - When resolved, a {key, value} object is handed\n\t * down, when it's rejected, the event is handed down.\n\t */\n\tupdate (key, value) {\n\t\treturn this.get (key).then ((currentValue) => {\n\t\t\t// If this key did not exist on the storage, then create it using the\n\t\t\t// set method\n\t\t\tif (typeof currentValue === 'undefined') {\n\t\t\t\treturn this.set (key, value);\n\t\t\t}\n\t\t\treturn new Promise ((resolve, reject) => {\n\t\t\t\tconst transaction = this.storage.transaction (this.store, 'readwrite').objectStore (this.store);\n\t\t\t\tconst op = transaction.put (Object.assign ({}, currentValue, value));\n\t\t\t\top.addEventListener ('success', (event) => {resolve ({key: event.target.result, value: value});});\n\t\t\t\top.addEventListener ('error', (event) => {reject (event);});\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Retrieves a value from storage given it's key\n\t *\n\t * @param  {string} - Key with which the value was saved\n\t * @return {Promise<Object>} - Resolves to the retreived value or its rejected\n\t * if it doesn't exist\n\t */\n\tget (key) {\n\t\treturn this.open ().then (() => {\n\t\t\treturn new Promise ((resolve, reject) => {\n\t\t\t\tconst transaction = this.storage.transaction (this.store).objectStore (this.store);\n\t\t\t\tconst op = transaction.get (key);\n\n\t\t\t\top.addEventListener ('success', (event) => {resolve (event.target.result);});\n\t\t\t\top.addEventListener ('error', (event) => {reject (event);});\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Retrieves all the values in the space in a key-value JSON object\n\t *\n\t * @return {Promise<Object>} - Resolves to the retreived values\n\t */\n\tgetAll () {\n\t\treturn this.open ().then (() => {\n\t\t\treturn new Promise ((resolve, reject) => {\n\t\t\t\tconst transaction = this.storage.transaction (this.store).objectStore (this.store);\n\t\t\t\tconst op = transaction.getAll ();\n\n\t\t\t\top.addEventListener ('success', (event) => {resolve (event.target.result);});\n\t\t\t\top.addEventListener ('error', (event) => {reject (event);});\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Check if the space contains a given key.\n\t *\n\t * @param  {string} key - Key to look for.\n\t * @return {Promise} - Promise gets resolved if it exists and rejected if it\n\t * doesn't\n\t */\n\tcontains (key) {\n\t\treturn this.get (key).then ((keys) => {\n\t\t\tif (keys.includes (key)) {\n\t\t\t\tPromise.resolve ();\n\t\t\t} else {\n\t\t\t\treturn Promise.reject ();\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Upgrade a Space Version. Upgrades must be declared before the open ()\n\t * method is executed.\n\t *\n\t * @param {string} oldVersion - The version to be upgraded\n\t * @param {string} newVersion - The version to be upgraded to\n\t * @param {function} callback - Function to transform the old stored values to the new version's format\n\t * @returns {Promise}\n\t */\n\tupgrade (oldVersion, newVersion, callback) {\n\t\tthis.upgrades[`${parseInt (oldVersion.replace (/\\./g, ''))}::${parseInt (newVersion.replace (/\\./g, ''))}`] = callback;\n\t\treturn Promise.resolve ();\n\t}\n\n\t// This function acts as a helper for the upgrade progress by executing the\n\t// needed upgrade callbacks in the correct order and sychronously.\n\t_upgrade (upgradesToApply, resolve, event) {\n\t\t// Check if there are still upgrades to apply\n\t\tif (upgradesToApply.length > 0) {\n\t\t\tthis.upgrades[upgradesToApply[0]].call (this, this, event).then (() => {\n\t\t\t\tthis._upgrade (upgradesToApply.slice (1), resolve, event);\n\t\t\t}).catch ((e) => console.error (e));\n\t\t} else {\n\t\t\tresolve ();\n\t\t}\n\t}\n\n\t/**\n\t * Renaming the space is not possible with the IndexedDB adapter therefore\n\t * this function always gets a rejection.\n\t *\n\t * @returns {Promise} - Result of the rename operation\n\t */\n\trename () {\n\t\treturn Promise.reject ();\n\t}\n\n\t/**\n\t * Getting a key by its index is not possible in this adapter, therefore this\n\t * function always gets rejected.\n\t *\n\t * @return {Promise} - Promise Rejection\n\t */\n\tkey () {\n\t\treturn Promise.reject ();\n\t}\n\n\t/**\n\t * Return all keys stored in the space.\n\t *\n\t * @return {Promise<string[]>}  - Array of keys\n\t */\n\tkeys () {\n\t\treturn this.open ().then (() => {\n\t\t\treturn new Promise ((resolve, reject) => {\n\t\t\t\tconst transaction = this.storage.transaction (this.store, 'readwrite').objectStore (this.store);\n\t\t\t\tconst op = transaction.getAllKeys ();\n\t\t\t\top.addEventListener ('success', (event) => {resolve (event.target.result);}, false);\n\t\t\t\top.addEventListener ('error', (event) => {reject (event);}, false);\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Delete a value from the space given its key\n\t *\n\t * @param  {string} key - Key of the item to delete\n\t * @return {Promise<key, value>} - Resolves to the key and value of the deleted object\n\t */\n\tremove (key) {\n\t\treturn this.get (key).then ((value) => {\n\t\t\treturn new Promise ((resolve, reject) => {\n\t\t\t\tconst transaction = this.storage.transaction (this.store, 'readwrite').objectStore (this.store);\n\t\t\t\tconst op = transaction.delete (key);\n\t\t\t\top.addEventListener ('success', () => {resolve (value);}, false);\n\t\t\t\top.addEventListener ('error', (event) => {reject (event);}, false);\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Clear the entire space\n\t *\n\t * @return {Promise} - Result of the clear operation\n\t */\n\tclear () {\n\t\treturn this.open ().then (() => {\n\t\t\treturn new Promise ((resolve, reject) => {\n\t\t\t\tconst transaction = this.storage.transaction (this.store, 'readwrite').objectStore (this.store);\n\t\t\t\tconst op = transaction.clear ();\n\t\t\t\top.addEventListener ('success', () => {resolve ();}, false);\n\t\t\t\top.addEventListener ('error', (event) => {reject (event);}, false);\n\t\t\t});\n\t\t});\n\t}\n}","/**\n* ==============================\n* Remote Storage Adapter\n* ==============================\n*/\n\nimport { Request } from './../Request';\n\n/**\n * The Remote Storage Adapter provides the Space Class the ability to interact\n * with a server in order to handle data persistance. The server's implementation\n * is up to the developer but it will need to respond to this adapter's request\n * formatting. This adapter uses the Request class to perfom its tasks.\n *\n * @class\n */\nexport class RemoteStorage {\n\n\t/**\n\t * Create a new Remote Storage. This adapter requires an endpoint url where\n\t * it will make the requests. If a store is defined, the request will be made\n\t * using the store as an URL, for example, let's assume the following endpoint:\n\t *\n\t * https://example.com/api/v1/\n\t *\n\t * If no store is defined, then the requests will be made to that simple route,\n\t * with a store definition, requests will be made to:\n\t *\n\t *  https://example.com/api/v1/{myStore}/\n\t *\n\t * The key of each item in this store represents another part of the request\n\t *\n\t * https://example.com/api/v1/{key}/\n\t *\n\t * Or:\n\t *\n\t * https://example.com/api/v1/{myStore}/{key}/\n\t *\n\t * This adapter just as the IndexedDB, works with JSON objects instead of string or\n\t * numeric values.\n\t *\n\t * @constructor\n\t * @param {object} [configuration={name = '', version = '', store = '', endpoint = '', props = {}] - Configuration Object for the Adapter\n\t * @param {string} configuration.name - Name of the Space\n\t * @param {string} configuration.version - Version of the Space in Semantic versioning syntax\n\t * @param {string} configuration.store - Name of the Object Store to use\n\t * @param {string} configuration.endpoint - Endpoint URL where the requests will be made\n\t * @param {string} configuration.props - Properties object to use for the fetch requests\n\t */\n\tconstructor ({name = '', version = '', store = '', endpoint = '', props = {}}) {\n\t\tthis.name = name;\n\t\tthis.version = version;\n\t\tthis.store = store;\n\t\tthis.endpoint = `${endpoint}${store}/`;\n\t\tthis.props = props;\n\t}\n\n\t/**\n\t * Open the Storage Object\n\t *\n\t * @return {Promise<RemoteStorage>}\n\t */\n\topen () {\n\t\tif (typeof this.storage === 'undefined') {\n\t\t\tthis.storage = Request;\n\t\t}\n\t\treturn Promise.resolve (this);\n\t}\n\n\t/**\n\t * Store a key-value pair. This function sends a POST request to the server\n\t *\n\t * @param  {string} key - Key with which this value will be saved\n\t * @param  {Object} value - Value to save\n\t * @return {Promise<Response>}\n\t */\n\tset (key, value) {\n\t\treturn this.open ().then (() => {\n\t\t\treturn this.storage.post (this.endpoint + key, value, this.props);\n\t\t});\n\t}\n\n\t/**\n\t * Update a key-value pair. In difference with the set () method, the update\n\t * method will use an Object.assign () in the case of objects so no value is\n\t * lost. This function sends a PUT request to the server.\n\t *\n\t * @param  {string} key - Key with which this value will be saved\n\t * @param  {Object} value - Value to save\n\t * @return {Promise<Object>}\n\t */\n\tupdate (key, value) {\n\t\treturn this.get (key).then ((currentValue) => {\n\t\t\treturn this.storage.put (this.endpoint + key, Object.assign ({}, currentValue, value), this.props).then ((response) => {\n\t\t\t\treturn response.json ();\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Retrieves a value from storage given it's key\n\t *\n\t * @param  {string} - Key with which the value was saved\n\t * @return {Promise<Object>} - Resolves to the retreived value or its rejected\n\t * if it doesn't exist\n\t */\n\tget (key) {\n\t\treturn this.open ().then (() => {\n\t\t\treturn this.storage.json (this.endpoint + key, {}, this.props);\n\t\t});\n\t}\n\n\t/**\n\t * Retrieves all the values in the space in a key-value JSON object\n\t *\n\t * @return {Promise<Object>} - Resolves to the retreived values\n\t */\n\tgetAll () {\n\t\treturn this.open ().then (() => {\n\t\t\treturn this.storage.json (this.endpoint, {}, this.props);\n\t\t});\n\t}\n\n\t/**\n\t * Check if a space contains a given key.\n\t *\n\t * @param  {string} key - Key to look for.\n\t * @return {Promise} Promise gets resolved if it exists and rejected if it\n\t * doesn't\n\t */\n\tcontains (key) {\n\t\treturn this.keys ().then ((keys) => {\n\t\t\tif (keys.includes (key)) {\n\t\t\t\tPromise.resolve ();\n\t\t\t} else {\n\t\t\t\treturn Promise.reject ();\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Upgrading the Storage must be done on the server side, therefore this function\n\t * always gets rejected.\n\t *\n\t * @returns {Promise}\n\t */\n\tupgrade () {\n\t\treturn Promise.reject ();\n\t}\n\n\t/**\n\t * Renaming the Storage must be done on the server side, therefore this function\n\t * always gets rejected.\n\t *\n\t * @returns {Promise}\n\t */\n\trename () {\n\t\treturn Promise.reject ();\n\t}\n\n\t/**\n\t * Getting a key by its index is not possible in this adapter, therefore this\n\t * function always gets rejected.\n\t *\n\t * @return {Promise} - Promise Rejection\n\t */\n\tkey () {\n\t\treturn Promise.reject ();\n\t}\n\n\t/**\n\t * Return all keys stored in the space. This makes a GET request to the full\n\t * endpoint (the URL of the endpoint and store name) with a keys query\n\t * parameter:\n\t *\n\t * https://example.com/api/v1/?keys=true\n \t *\n\t * Or:\n \t *\n \t * https://example.com/api/v1/{myStore}/?keys=true\n\t *\n\t * @return {Promise<string[]>} - Array of keys\n\t */\n\tkeys () {\n\t\treturn this.open ().then (() => {\n\t\t\treturn this.storage.json (this.endpoint, {keys: true}, this.props);\n\t\t});\n\t}\n\n\t/**\n\t * Delete a value from the space given it's key. This function sends a DELETE\n\t * request to the server.\n\t *\n\t * @param  {string} key - Key of the item to delete\n\t * @return {Promise<key, value>} - Resolves to the key and value of the deleted object\n\t */\n\tremove (key) {\n\t\treturn this.open ().then (() => {\n\t\t\treturn this.storage.delete (this.endpoint + key, {}, this.props).then ((response) => {\n\t\t\t\treturn Promise.resolve (key, response.json ());\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Clear the entire space. This function sends a DELETE request to the server.\n\t * The difference between a clear () and remove () operation is that the clear\n\t * operation does not uses a key in the URL where the request is made.\n\t *\n\t * @return {Promise} - Result of the clear operation\n\t */\n\tclear () {\n\t\treturn this.open ().then (() => {\n\t\t\treturn this.storage.delete (this.endpoint, {}, this.props);\n\t\t});\n\t}\n}","/**\n* ==============================\n* Space\n* ==============================\n*/\n\nimport { LocalStorage } from './SpaceAdapter/LocalStorage';\nimport { SessionStorage } from './SpaceAdapter/SessionStorage';\nimport { IndexedDB } from './SpaceAdapter/IndexedDB';\nimport { RemoteStorage } from './SpaceAdapter/RemoteStorage';\n\n/**\n * List of Adapters Available\n */\nexport const SpaceAdapter = {\n\tLocalStorage,\n\tSessionStorage,\n\tIndexedDB,\n\tRemoteStorage\n};\n\n/**\n * Space provides a simple wrapper for different Storage APIs. It aims to\n * provide data independence through storage namespaces and versioning, allowing\n * transparent data formatting and content modifications through versions.\n *\n * While this class documentation provides some information, specific details may\n * be addressed on the documentation of each adapter.\n *\n * @class\n */\nexport class Space {\n\n\t/**\n\t * Create a new Space Object. If no name and version is defined, the global LocalSpace space is used.\n\t *\n\t * @constructor\n\t * @param {SpaceAdapter} [adapter = SpaceAdapter.LocalStorage] - Space Adapter\n\t * to use. Currently LocalStorage, SessionStorage, IndexedDB and Server are\n\t * available\n\t * @param {Object} [configuration = {}] - Configuration object for the space.\n\t * This configuration may change depending on the adapter used, however all\n\t * adapters have support for a name, version and store properties.\n\t * @param {string} configuration.name - Name of the Space\n\t * @param {string} configuration.version - Version of the Space in Semantic versioning syntax\n\t * @param {string} configuration.store - Name of the Object Store to use\n\t */\n\tconstructor (adapter = SpaceAdapter.LocalStorage, configuration = {}) {\n\t\t// Assign the provided configuration to the default one\n\t\tthis._configuration = Object.assign ({}, {name: '', version: '', store: ''}, configuration);\n\n\t\t// Set up the adapter instance to use\n\t\tthis.adapter = new adapter (this._configuration);\n\n\t\t// This object stores all the callbacks the user can define for the\n\t\t// space operations\n\t\tthis.callbacks = {\n\t\t\t'create': [],\n\t\t\t'update': [],\n\t\t\t'delete': []\n\t\t};\n\n\t\t// A transformation is an object that can contain a set and get functions\n\t\t// every transformation will be applied to the retrieved value or to the\n\t\t// value before storing it.\n\t\tthis.transformations = {\n\n\t\t};\n\t}\n\n\t/**\n\t * Modify the space configuration, it will also be passed down to the adapter\n\t * using its configuration () function.\n\t *\n\t * @param  {object} - Configuration object to set up\n\t * @return {object} - Configuration object if no param was passed\n\t */\n\tconfiguration (object = null) {\n\t\tif (object !== null) {\n\t\t\tthis._configuration = Object.assign ({}, this._configuration, object);\n\t\t\tthis.adapter.configuration (object);\n\t\t} else {\n\t\t\treturn this._configuration;\n\t\t}\n\t}\n\n\t/**\n\t * Open the Storage Object to be used depending on the SpaceAdapter\n\t *\n\t * @return {Promise}\n\t */\n\topen () {\n\t\treturn this.adapter.open ().then (() => {\n\t\t\treturn Promise.resolve (this);\n\t\t});\n\t}\n\n\t/**\n\t * Store a key-value pair\n\t *\n\t * @param  {string} key - Key with which this value will be saved\n\t * @param  {Object|string|Number} - Value to save\n\t * @return {Promise<{key, value}>}\n\t */\n\tset (key, value) {\n\t\t// Apply all set transformations to the value\n\t\tfor (const id of Object.keys (this.transformations)) {\n\t\t\tif (typeof this.transformations[id].set === 'function') {\n\t\t\t\tvalue = this.transformations[id].set.call (null, key, value);\n\t\t\t}\n\t\t}\n\n\t\treturn this.adapter.set (key, value).then (({key, value}) => {\n\t\t\tfor (const callback of this.callbacks.create) {\n\t\t\t\tcallback.call (null, key, value);\n\t\t\t}\n\t\t\treturn Promise.resolve ({key, value});\n\t\t});\n\t}\n\n\t/**\n\t * Update a key-value pair. In difference with the set () method, the update\n\t * method will use an Object.assign () in the case of objects so no value is\n\t * lost.\n\t *\n\t * @param  {string} key - Key with which this value will be saved\n\t * @param  {Object|string|Number} - Value to save\n\t * @return {Promise<{key, value}>}\n\t */\n\tupdate (key, value) {\n\t\t// Apply all set transformations to the value\n\t\tfor (const id of Object.keys (this.transformations)) {\n\t\t\tif (typeof this.transformations[id].set === 'function') {\n\t\t\t\tvalue = this.transformations[id].set.call (null, key, value);\n\t\t\t}\n\t\t}\n\n\t\treturn this.adapter.update (key, value).then (({key, value}) => {\n\t\t\tfor (const callback of this.callbacks.update) {\n\t\t\t\tcallback.call (null, key, value);\n\t\t\t}\n\t\t\treturn Promise.resolve ({key, value});\n\t\t});\n\t}\n\n\t/**\n\t * Retrieves a value from storage given it's key\n\t *\n\t * @param  {string} - Key with which the value was saved\n\t * @return {Promise<Object>|Promise<string>|Promise<Number>} - Resolves to the retreived value\n\t * or its rejected if it doesn't exist.\n\t */\n\tget (key) {\n\t\treturn this.adapter.get (key).then ((value) => {\n\t\t\t// Apply all get transformations to the value\n\t\t\tfor (const id of Object.keys (this.transformations)) {\n\t\t\t\tif (typeof this.transformations[id].get === 'function') {\n\t\t\t\t\tvalue = this.transformations[id].get.call (null, key, value);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn value;\n\t\t});\n\t}\n\n\t/**\n\t * Retrieves all the values in the space in a key-value JSON object\n\t *\n\t * @return {Promise<Object>} - Resolves to the retreived values\n\t */\n\tgetAll () {\n\t\treturn this.adapter.getAll ().then ((values) => {\n\t\t\t// Apply all get transformations to the value\n\t\t\tfor (const key of Object.keys (values)) {\n\t\t\t\tfor (const id of Object.keys (this.transformations)) {\n\t\t\t\t\tif (typeof this.transformations[id].get === 'function') {\n\t\t\t\t\t\tvalues[key] = this.transformations[id].get.call (null, key, values[key]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn values;\n\t\t});\n\t}\n\n\t/**\n\t * Iterate over every value in the space\n\t *\n\t * @param  {function (key, value)} callback - A callback function receiving the\n\t * key and value of a value. Must return a callback\n\t * @return {Promise} - Resolves when all callbacks have been resolved.\n\t */\n\teach (callback) {\n\t\treturn this.getAll ().then ((values) => {\n\t\t\tconst promises = [];\n\t\t\tfor (const i of Object.keys (values)) {\n\t\t\t\tpromises.push (callback.call (this, i, values[i]));\n\t\t\t}\n\t\t\treturn Promise.all (promises);\n\t\t});\n\t}\n\n\t/**\n\t * Check if a space contains a given key. Not all adapters may give this information\n\t *\n\t * @param  {string} key - Key to look for.\n\t * @return {Promise} - Promise gets resolved if it exists and rejected if\n\t * doesn't\n\t */\n\tcontains (key) {\n\t\treturn this.adapter.contains (key);\n\t}\n\n\t/**\n\t * Upgrade a Space Version. Not all adapters may provide this functionality\n\t *\n\t * @param oldVersion {string} - The version of the storage to be upgraded\n\t * @param newVersion {string} - The version to be upgraded to\n\t * @param callback {function} - Function to transform the old stored values to the new version's format\n\t *\n\t * @returns {Promise} - Result of the upgrade operation\n\t */\n\tupgrade (oldVersion, newVersion, callback) {\n\t\treturn this.adapter.upgrade (oldVersion, newVersion, callback).then (() => {\n\t\t\treturn Promise.resolve (this);\n\t\t});\n\t}\n\n\t/**\n\t * Rename a Space. Not all adapters may provide this functionality\n\t *\n\t * @param {string} name - New name to be used.\n\t * @returns {Promise} Result of the rename operation\n\t */\n\trename (name) {\n\t\treturn this.adapter.rename (name);\n\t}\n\n\t/**\n\t * Add a callback function to be run every time a value is created.\n\t *\n\t * @param  {function (key, value)} callback - Callback Function. Key and Value pair will be sent as parameters when run.\n\t */\n\tonCreate (callback) {\n\t\tthis.callbacks.create.push (callback);\n\t}\n\n\t/**\n\t * Add a callback function to be run every time a value is updated.\n\t *\n\t * @param  {function (key, value)} callback - Callback Function. Key and Value pair will be sent as parameters when run.\n\t */\n\tonUpdate (callback) {\n\t\tthis.callbacks.update.push (callback);\n\t}\n\n\t/**\n\t * Add a callback function to be run every time a value is deleted.\n\t *\n\t * @param  {function (key, value)} callback - Callback Function. Key and Value pair will be sent as parameters when run.\n\t */\n\tonDelete (callback) {\n\t\tthis.callbacks.delete.push (callback);\n\t}\n\n\t/**\n\t * Add a transformation function to the space.\n\t *\n\t * @param  {string} id - Unique transformation name or identifier\n\t * @param  {function (key, value)|null} get - Transformation function to apply to the content before\n\t * returning the value when using the get () function .\n\t * @param  {function (key, value)|null} set - Transformation function to apply to the content before\n\t * saving it when using the set () function befo.\n\t */\n\taddTransformation ({id, get, set}) {\n\t\tthis.transformations[id] = {\n\t\t\tid,\n\t\t\tget,\n\t\t\tset\n\t\t};\n\t}\n\n\t/**\n\t * Remove a transformation function given its id\n\t *\n\t * @param  {string} id - Name or identifier of the transformation to remove\n\t */\n\tremoveTransformation (id) {\n\t\tdelete this.transformations[id];\n\t}\n\n\t/**\n\t * Get the key that corresponds to a given index in the storage. Not all adapters may provide this functionality\n\t *\n\t * @param  {Number} index - Index to get the key from\n\t * @param  {boolean} [full = false] - Whether to return the full key name including space id or just the key name\n\t * @return {Promise<string>} - Resolves to the key's name\n\t */\n\tkey (index, full = false) {\n\t\treturn this.adapter.key (index, full);\n\t}\n\n\t/**\n\t * Return all keys stored in the space. Not all adapters may provide this functionality\n\t *\n\t * @param {boolean} [full = false] - Whether to return the full key name including space id or just the key name\n\t * @return {Promise<string[]>} - Array of keys\n\t */\n\tkeys (full = false) {\n\t\treturn this.adapter.keys (full);\n\t}\n\n\t/**\n\t * Delete a value from the space given it's key\n\t *\n\t * @param  {string} key - Key of the item to delete\n\t * @return {Promise<key, value>} - Resolves to the key and value of the deleted object\n\t */\n\tremove (key) {\n\t\treturn this.adapter.remove (key).then ((value) => {\n\t\t\t// Run the callback for deletions\n\t\t\tfor (const callback of this.callbacks.delete) {\n\t\t\t\tcallback.call (null, key, value);\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Clear the entire space\n\t *\n\t * @return {Promise} - Result of the clear operation\n\t */\n\tclear () {\n\t\treturn this.adapter.clear ();\n\t}\n}","/**\n* ==============================\n* Text\n* ==============================\n*/\n\n/**\n * Provides utility functions for texts\n * @class\n */\nexport class Text {\n\n\t/**\n\t * @static capitalize - Capatalizes every word in a string\n\t *\n\t * @param  {string} text - Text string to capitalize\n\t * @return {string} - Capitalized string\n\t */\n\tstatic capitalize (text) {\n\t\treturn text.replace (/\\w\\S*/g, (txt) => {\n\t\t\treturn txt.charAt (0).toUpperCase () + txt.substr (1).toLowerCase ();\n\t\t});\n\t}\n\n\t/**\n\t * @static suffix - Gets the suffix of a string given a key\n\t *\n\t * @param  {string} key - Key part of the string\n\t * @param  {string} text - Full string to extract the suffix from\n\t * @return {string} - Suffix\n\t */\n\tstatic suffix (key, text) {\n\t\tlet suffix = '';\n\t\tlet position = text.indexOf (key);\n\t\tif (position !== -1) {\n\t\t\tposition += key.length;\n\t\t\tsuffix = text.substr (position, text.length - position);\n\t\t}\n\t\treturn suffix;\n\t}\n\n\n\t/**\n\t * @static selection - Get the currently selected text\n\t *\n\t * @return {string} - Text selection\n\t */\n\tstatic selection () {\n\t\tif (window.getSelection) {\n\t\t\treturn window.getSelection ().toString ();\n\t\t} else if (document.selection && document.selection.type != 'Control') {\n\t\t\treturn document.selection.createRange ().text;\n\t\t}\n\t}\n\n\t/**\n\t * @static prefix - Gets the prefix of a string given a key\n\t *\n\t * @param  {string} key - Key part of the string\n\t * @param  {string} text - Full string to extract the prefix from\n\t * @return {string} - Prefix\n\t */\n\tstatic prefix (key, text) {\n\t\tlet prefix = '';\n\t\tconst position = text.indexOf (key);\n\t\tif (position != -1) {\n\t\t\tprefix = text.substr (0, position);\n\t\t}\n\t\treturn prefix;\n\t}\n\n\t/**\n\t * @static friendly - Transforms a given text into a friendly URL string replacing all special characters\n\t *\n\t * @param  {string} text - The text to build the url from\n\t * @return {string} - Friendly URL\n\t */\n\tstatic friendly (text) {\n\t\tconst regex = [\n\t\t\t/[]/,\n\t\t\t/[]/,\n\t\t\t/[]/,\n\t\t\t/[]/,\n\t\t\t/[]/,\n\t\t\t/[]/,\n\t\t\t/[]/,\n\t\t\t/[]/,\n\t\t\t/[]/,\n\t\t\t/[]/,\n\t\t\t//,\n\t\t\t//,\n\t\t\t//,\n\t\t\t//,\n\t\t\t/_/,\n\t\t\t/[<>']/,\n\t\t\t/[\"]/,\n\t\t\t/[(){}[\\]]/,\n\t\t\t/[?!#$%&^*`~/|]/,\n\t\t\t/[,.:;]/,\n\t\t\t/ /\n\t\t];\n\n\t\tconst replacements = [\n\t\t\t'a',\n\t\t\t'A',\n\t\t\t'I',\n\t\t\t'i',\n\t\t\t'e',\n\t\t\t'E',\n\t\t\t'o',\n\t\t\t'O',\n\t\t\t'u',\n\t\t\t'U',\n\t\t\t'c',\n\t\t\t'C',\n\t\t\t'n',\n\t\t\t'N',\n\t\t\t'-',\n\t\t\t'',\n\t\t\t'',\n\t\t\t'',\n\t\t\t'',\n\t\t\t'',\n\t\t\t'-'\n\t\t];\n\n\t\tfor (const index in regex) {\n\t\t\ttext = text.replace(new RegExp(regex[index], 'g'), replacements[index]);\n\t\t}\n\n\t\treturn text;\n\t}\n}","/**\n* ==============================\n* Util\n* ==============================\n*/\n\n/**\n * Provides diverse utility functions\n * @class\n */\nexport class Util {\n\n\n\t/**\n\t * @static callAsync - Calls any function using promises to keep a standard\n\t * behavior between async and sync functions.\n\t *\n\t * @param  {funcion} callable - The function to run\n\t * @param  {Object} context - The object `this` will be mapped to\n\t * @param  {any} ...args - List of parameters to pass to the function when called\n\t * @return {Promise} - A promise that resolves to the result of the function\n\t */\n\tstatic callAsync (callable, context, ...args) {\n\t\ttry {\n\t\t\t// Call the provided function using the context and arguments given\n\t\t\tconst result = callable.apply (context, args);\n\n\t\t\t// Check if the function returned a simple value or a Promise\n\t\t\tif (result instanceof Promise) {\n\t\t\t\treturn result;\n\t\t\t} else {\n\t\t\t\treturn Promise.resolve (result);\n\t\t\t}\n\t\t} catch (e) {\n\t\t\treturn Promise.reject (e);\n\t\t}\n\t}\n\n\t/**\n\t * @static uuid - Creates a UUID. This UUIDs should not be trusted for uniqueness\n\t *\n\t * @return {string} - Generated UUID\n\t */\n\tstatic uuid () {\n\t\tif (window.crypto) {\n\t\t\treturn ([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g, (c) =>\n\t\t\t\t(c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString (16)\n\t\t\t);\n\t\t} else {\n\t\t\tconst generate = () => Math.floor ((1 + Math.random()) * 0x10000).toString (16).substring (1);\n\t\t\treturn generate () + generate () + '-' + generate () + '-' + generate () + '-' +\n\t\t\tgenerate () + '-' + generate () + generate () + generate ();\n\t\t}\n\t}\n}","export * from './src/DOM';\nexport * from './src/FileSystem';\nexport * from './src/Form';\nexport * from './src/Platform';\nexport * from './src/Preload';\nexport * from './src/Request';\nexport * from './src/Space';\nexport * from './src/Text';\nexport * from './src/Util';"]}